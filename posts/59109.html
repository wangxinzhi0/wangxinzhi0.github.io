<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="utf-8"><meta name="keywords" content="LeetCode高频考题刷题笔记-中等, 志其余年"><meta name="description" content="个人技术博客"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><title>LeetCode高频考题刷题笔记-中等 | 志其余年</title><link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/hexo/logo.1spkqairezog.png"><link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css"><link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css"><link rel="stylesheet" type="text/css" href="/libs/aos/aos.css"><link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css"><link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" type="text/css" href="/css/matery.css"><link rel="stylesheet" type="text/css" href="/css/my.css"><script src="/libs/jquery/jquery.min.js"></script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="志其余年" type="application/atom+xml"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><style>body{background-image:url(https://cdn.jsdelivr.net/gh/Tokisaki-Galaxy/res/site/medias/background.jpg);background-repeat:no-repeat;background-size:cover;background-attachment:fixed}</style><body><script>("1"===localStorage.getItem("dark")||matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add("dark")</script><a onclick="switchNightMode()" id="sma"><i class="fa fa-moon-o" id="nightMode" aria-hidden="true"></i></a><script type="text/javascript">var st,OriginTitile=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="≥Ö‿Ö≤ 网页崩溃了！",clearTimeout(st)):(document.title="≥◔◡◔≤ 皮一下，很开心！",st=setTimeout(function(){document.title=OriginTitile},3e3))})</script><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/hexo/logo.1spkqairezog.png" class="logo-img" alt="LOGO"> <span class="logo-span">志其余年</span></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-home" style="zoom:.6"></i> <span>首页</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fas fa-tags" style="zoom:.6"></i> <span>标签</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fas fa-bookmark" style="zoom:.6"></i> <span>分类</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/archives" class="waves-effect waves-light"><i class="fas fa-archive" style="zoom:.6"></i> <span>归档</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/about" class="waves-effect waves-light"><i class="fas fa-user-circle" style="zoom:.6"></i> <span>关于</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fas fa-comments" style="zoom:.6"></i> <span>留言板</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/friends" class="waves-effect waves-light"><i class="fas fa-address-book" style="zoom:.6"></i> <span>友情链接</span></a></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fas fa-search" title="搜索" style="zoom:.85"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/hexo/logo.1spkqairezog.png" class="logo-img circle responsive-img"><div class="logo-name">志其余年</div><div class="logo-desc">个人技术博客</div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fa-fw fas fa-tags"></i> 标签</a></li><li class="m-nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fa-fw fas fa-bookmark"></i> 分类</a></li><li class="m-nav-item"><a href="/archives" class="waves-effect waves-light"><i class="fa-fw fas fa-archive"></i> 归档</a></li><li class="m-nav-item"><a href="/about" class="waves-effect waves-light"><i class="fa-fw fas fa-user-circle"></i> 关于</a></li><li class="m-nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fa-fw fas fa-comments"></i> 留言板</a></li><li class="m-nav-item"><a href="/friends" class="waves-effect waves-light"><i class="fa-fw fas fa-address-book"></i> 友情链接</a></li></ul></div></div></nav></header><div class="bg-cover pd-header post-cover" style="background-image:url(https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/hexo/1.1kdunfmnl4yo.jpg)"><div class="container" style="right:0;left:0"><div class="row"><div class="col s12 m12 l12"><div class="brand"><h1 class="description center-align post-title">LeetCode高频考题刷题笔记-中等</h1></div></div></div></div></div><main class="post-container content"><link rel="stylesheet" href="/libs/tocbot/tocbot.css"><style>#articleContent h1::before,#articleContent h2::before,#articleContent h3::before,#articleContent h4::before,#articleContent h5::before,#articleContent h6::before{display:block;content:" ";height:100px;margin-top:-100px;visibility:hidden}#articleContent :focus{outline:0}.toc-fixed{position:fixed;top:64px}.toc-widget{width:345px;padding-left:20px}.toc-widget .toc-title{padding:35px 0 15px 17px;font-size:1.5rem;font-weight:700;line-height:1.5rem}.toc-widget ol{padding:0;list-style:none}#toc-content{padding-bottom:30px;overflow:auto}#toc-content ol{padding-left:10px}#toc-content ol li{padding-left:10px}#toc-content .toc-link:hover{color:#42b983;font-weight:700;text-decoration:underline}#toc-content .toc-link::before{background-color:transparent;max-height:25px;position:absolute;right:23.5vw;display:block}#toc-content .is-active-link{color:#42b983}#floating-toc-btn{position:fixed;right:15px;bottom:76px;padding-top:15px;margin-bottom:0;z-index:998}#floating-toc-btn .btn-floating{width:48px;height:48px}#floating-toc-btn .btn-floating i{line-height:48px;font-size:1.4rem}</style><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><a href="/tags/LeetCode/"><span class="chip bg-color">LeetCode</span> </a><a href="/tags/LeetCode-medium/"><span class="chip bg-color">LeetCode-medium</span></a></div></div><div class="col s5 right-align"><div class="post-cate"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E5%88%B7%E9%A2%98/" class="post-category">数据结构与算法刷题</a></div></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp; 2021-03-14</div><div class="post-date info-break-policy"><i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp; 2021-08-02</div><div class="info-break-policy"><i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp; 51.3k</div><div class="info-break-policy"><i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp; 214 分</div><div id="busuanzi_container_page_pv" class="info-break-policy"><i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp; <span id="busuanzi_value_page_pv"></span></div></div></div><hr class="clearfix"><div class="card-content article-card-content"><div id="articleContent"><ul><li>参考网站<a target="_blank" rel="noopener" href="https://leetcode-solution-leetcode-pp.gitbook.io/leetcode-solution/">力扣加加</a></li></ul><h1 id="高频中等题"><a href="#高频中等题" class="headerlink" title="高频中等题"></a>高频中等题</h1><h2 id="面试题-17-09-第-k-个数"><a href="#面试题-17-09-第-k-个数" class="headerlink" title="面试题 17.09. 第 k 个数"></a>面试题 17.09. 第 k 个数</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/get-kth-magic-number-lcci/">https://leetcode-cn.com/problems/get-kth-magic-number-lcci/</a></p><p><strong>方法一</strong>：动态规划+三指针</p><p>动态规划</p><ul><li><code>1</code>没有质因子，<code>1</code>与任何正整数（包括<code>1</code>本身）都是互质；</li><li>设置<code>1</code>为第一位，<code>dp[0]=1</code>;</li><li>初始化三个指针<code>p3，p5，p7</code>，均指向<code>dp[0]</code>；</li><li>在<code>dp[p3]</code>乘以<code>3</code>, <code>dp[p5]</code>乘以<code>5</code>，<code>dp[p7]</code>乘以<code>7</code>中选取最小数字作为新的数字，并将该数字的指针向前移动一步；</li></ul><pre class="language-java"><code class="language-java">dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
p3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> p5 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> p7 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span> dp<span class="token punctuation">[</span>p3<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>p5<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>p7<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">7</span> <span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span> <span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">;</span>
p3 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> p5 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> p7 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span> dp<span class="token punctuation">[</span>p3<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>p5<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>p7<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">7</span> <span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span> <span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">;</span>
p3 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> p5 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> p7 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

dp<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span> dp<span class="token punctuation">[</span>p3<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>p5<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>p7<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">7</span> <span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">7</span> <span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">7</span><span class="token punctuation">;</span>
p3 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> p5 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> p7 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

dp<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span> dp<span class="token punctuation">[</span>p3<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>p5<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>p7<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">7</span> <span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">21</span> <span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">9</span><span class="token punctuation">;</span>
p3 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> p5 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> p7 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

dp<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span> dp<span class="token punctuation">[</span>p3<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>p5<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>p7<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">7</span> <span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">21</span> <span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">15</span><span class="token punctuation">;</span>
p3 <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> p5 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> p7 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

dp<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span> dp<span class="token punctuation">[</span>p3<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>p5<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>p7<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">7</span> <span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">21</span> <span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">21</span><span class="token punctuation">;</span>
p3 <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span> p5 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> p7 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getKthMagicNumber</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//初始化动态规划数组大小</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//首元素</span>
        <span class="token keyword">int</span> p3<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> p5<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> p7<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//初始化指针指向首个元素</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//选出最小的数字</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>p3<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>p5<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>p7<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//将选择乘数的指针前移一位</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> dp<span class="token punctuation">[</span>p3<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">)</span> p3<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> dp<span class="token punctuation">[</span>p5<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">)</span> p5<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> dp<span class="token punctuation">[</span>p7<span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">7</span><span class="token punctuation">)</span> p7<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//返回动态规划数组最后一个元素</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(k)，k为第k个数。</li><li>空间复杂度：O(k)。</li></ul><p><strong>方法二</strong>：小顶堆</p><p>创建小顶堆，创建<code>HashSet</code>保存<code>k</code>个数值。首先将<code>1</code>放入小顶堆，然后死循环取出小顶堆的堆顶并删除，判断该元素是否已在<code>HashSet</code>中，如不在，则加入<code>HashSet</code>并将该数乘以<code>3、5、7</code>的结果放入小顶堆，直到<code>HashSet</code>集合大小为<code>k</code>，返回此时从小顶堆取出的元素<code>val</code>。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getKthMagicNumber</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//最小堆处理写入数值，Integer不够</span>
        PriorityQueue<span class="token operator">&lt;</span>Long<span class="token operator">></span> priorityQueue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//HashSet保存k个位数值</span>
        Set<span class="token operator">&lt;</span>Long<span class="token operator">></span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        priorityQueue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>1L<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//获取并删除队首元素（堆顶元素）</span>
            Long val <span class="token operator">=</span> priorityQueue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//该元素是否已经在HashSet中，在则不操作，否则插入</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>set<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
                priorityQueue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>val<span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                priorityQueue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>val<span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                priorityQueue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>val<span class="token operator">*</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//返回此时从小顶堆取出的队首元素</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span>k<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> val<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(k)。</li><li>空间复杂度：O(k)。</li></ul><h2 id="面试题-17-23-最大黑方阵"><a href="#面试题-17-23-最大黑方阵" class="headerlink" title="面试题 17.23. 最大黑方阵"></a>面试题 17.23. 最大黑方阵</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/max-black-square-lcci/">https://leetcode-cn.com/problems/max-black-square-lcci/</a></p><p><strong>方法一</strong>：动态规划</p><p>创建两个辅助数组<code>right</code>和<code>down</code>，数组大小与矩阵相同，分别记录<code>matrix</code>当前元素右边和下边连续<code>0</code>的数目。</p><p>初始化两个数组：</p><ul><li>首先逆序遍历将最后一行和最后一列初始化</li><li>然后逆序遍历<code>matrix</code>其他元素，完成数组初始化，如果<code>matrix[i][j] == 0</code>，<code>right[i][j] = right[i][j+1] + 1</code>，<code>down[i][j] = down[i+1][j] + 1</code></li></ul><p>初始化<code>right</code>和<code>down</code>数组后，遍历矩阵，对于元素为<code>0</code>的<code>matrix[i][j]</code>，取<code>right[i][j]</code>和<code>down[i][j]</code>中的较小值暂时记录在<code>maxSize</code>中。对于<code>0,1，...，maxSize</code>中每一个可能的边长<code>k</code>，对应的正方形的上边和左边均满足全为<code>0</code>，所以再判断右边和下边两条边即可。<code>right[i+k][j]&gt;k</code>和<code>down[i][j+k]&gt;k</code>。当前最长边记录在<code>res[2]</code>中。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">findSquare</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> matrix<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
       <span class="token keyword">int</span> len <span class="token operator">=</span> matrix<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
       <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//结果数组</span>
       <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> right <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//辅助数组，记录当前元素右边连续0数目</span>
       <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> down <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//辅助数组，记录当前元素下边连续0数目</span>

       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//统计最后一行和最后一列的左边连续0数目和下边连续0数目</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">==</span>len<span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//最后一个元素为0</span>
                right<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
                down<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//最后一列</span>
                    right<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                    down<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> down<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//最后一行</span>
                    right<span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> right<span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
                    down<span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
       <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>len<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//统计除最后一行和最后一列其他元素的左边和下边连续0的数目</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span>len<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span> j<span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    right<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> right<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
                    down<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> down<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>len<span class="token operator">-</span>res<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>len<span class="token operator">-</span>res<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    <span class="token keyword">int</span> maxsize<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//记录当前0元素右边和下边连续0数目的最小值</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>right<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> down<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> maxsize <span class="token operator">=</span>  right<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span> 
                    <span class="token keyword">else</span> maxsize <span class="token operator">=</span> down<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> res<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> maxsize<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//判断正方形下边和右边两条边</span>
                        <span class="token keyword">if</span><span class="token punctuation">(</span>right<span class="token punctuation">[</span>i<span class="token operator">+</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> k <span class="token operator">&amp;&amp;</span> down<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">+</span>k<span class="token punctuation">]</span> <span class="token operator">></span> k<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                            res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
                            res<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> j<span class="token punctuation">;</span>
                            res<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//更新最大子方阵</span>
                        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
                    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//无满足条件的子方阵</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li><p>时间复杂度：O(n<sup>2</sup>)。</p></li><li><p>空间复杂度：O(n<sup>2</sup>)，辅助数组。</p></li></ul><h2 id="0002-两数相加"><a href="#0002-两数相加" class="headerlink" title="0002. 两数相加"></a>0002. 两数相加</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/add-two-numbers/">https://leetcode-cn.com/problems/add-two-numbers/</a></p><p><strong>方法一</strong>：模拟</p><p>由于输入的两个链表都是逆序存储数字的位数的，因此两个链表中同一位置的数字可以直接相加。</p><p>我们同时遍历两个链表，逐位计算它们的和，并与当前位置的进位值相加。具体而言，</p><ul><li><p>如果当前两个链表处相应位置的数字为<code>n1</code>，<code>n2</code>，进位值为<code>carry</code>，则它们的和为<code>n1+n2+carry</code>；其中，答案链表处的数字为<code>(n1+n2+carry)%10</code>，而新的进位值值为<code>(n1+n2+carry)/10</code>。</p></li><li><p>如果两个链表的长度不同，则可以认为长度短的链表后面有若干个<code>0</code>。</p></li><li><p>此外，如果链表遍历结束后，有<code>carry&gt;0</code>，还需要在答案链表的后面附加一个节点，节点的值为<code>carry</code>。</p></li></ul><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> ListNode <span class="token function">addTwoNumbers</span><span class="token punctuation">(</span>ListNode l1<span class="token punctuation">,</span> ListNode l2<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        ListNode head <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ListNode cur <span class="token operator">=</span> head<span class="token punctuation">;</span>
        <span class="token keyword">int</span> carry <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>l1<span class="token operator">!=</span>null <span class="token operator">||</span> l2<span class="token operator">!=</span>null <span class="token operator">||</span> carry<span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> sum<span class="token operator">=</span><span class="token punctuation">(</span>l1<span class="token operator">!=</span>null <span class="token operator">?</span> l1<span class="token punctuation">.</span>val<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>l2<span class="token operator">!=</span>null <span class="token operator">?</span> l2<span class="token punctuation">.</span>val<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> carry<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//求两个节点和进位的和，节点为空时，用0替代相加</span>
            carry <span class="token operator">=</span> sum<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//进位的值</span>
            cur<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span>sum<span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//sum对10求余后放到节点中</span>
            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>l1<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//后移</span>
                l1<span class="token operator">=</span>l1<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            l2 <span class="token operator">=</span> l2<span class="token operator">!=</span>null <span class="token operator">?</span> l2<span class="token punctuation">.</span>next<span class="token operator">:</span>null<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//l2 = l2!=null ? l2.next:l2</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(max(m, n))，其中m和n分别为两个链表的长度。我们要遍历两个链表的全部位置，而处理每个位置只需要O(1)的时间。</li><li>空间复杂度：O(1)。</li></ul><p><strong>方法二</strong>：递归</p><p>看代码</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> ListNode <span class="token function">addTwoNumbers</span><span class="token punctuation">(</span>ListNode l1<span class="token punctuation">,</span> ListNode l2<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    ListNode head <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//哨兵节点</span>
    <span class="token function">helper</span><span class="token punctuation">(</span>head<span class="token punctuation">,</span> l1<span class="token punctuation">,</span> l2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">helper</span><span class="token punctuation">(</span>ListNode result<span class="token punctuation">,</span> ListNode l1<span class="token punctuation">,</span> ListNode l2<span class="token punctuation">,</span> <span class="token keyword">int</span> carry<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>l1 <span class="token operator">==</span> null <span class="token operator">&amp;&amp;</span> l2 <span class="token operator">==</span> null <span class="token operator">&amp;&amp;</span> carry <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//递归终止条件</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token punctuation">(</span>l1 <span class="token operator">!=</span> null <span class="token operator">?</span> l1<span class="token punctuation">.</span>val <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>l2 <span class="token operator">!=</span> null <span class="token operator">?</span> l2<span class="token punctuation">.</span>val <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> carry<span class="token punctuation">;</span>
    result<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    result<span class="token punctuation">.</span>next<span class="token punctuation">.</span>val <span class="token operator">=</span> sum <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//新节点的值</span>
    carry <span class="token operator">=</span> sum <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//进位值</span>
    <span class="token function">helper</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>next<span class="token punctuation">,</span> l1 <span class="token operator">!=</span> null <span class="token operator">?</span> l1<span class="token punctuation">.</span>next <span class="token operator">:</span> null<span class="token punctuation">,</span> l2 <span class="token operator">!=</span> null <span class="token operator">?</span> l2<span class="token punctuation">.</span>next <span class="token operator">:</span> null<span class="token punctuation">,</span> carry<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><ul><li>时间复杂度：O(max(m, n))，其中m和n分别为两个链表的长度。我们要遍历两个链表的全部位置，而处理每个位置只需要O(1)的时间。</li><li>空间复杂度：O(max(m, n))，递归占用空间。</li></ul><h2 id="0003-无重复字符的最长子串"><a href="#0003-无重复字符的最长子串" class="headerlink" title="0003. 无重复字符的最长子串"></a>0003. 无重复字符的最长子串</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/">https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/</a></p><p><strong>方法一</strong>：滑动窗口</p><p>「滑动窗口」</p><p>我们使用<strong>两个指针表示字符串中的某个子串（或窗口）的左右边界</strong>，其中左指针代表着子串的起始位置，右指针代表子串不含重复字符的最大长度位置。</p><p>在每一步的操作中，我们将左指针向右移动一格，表示我们开始<strong>枚举下一个字符作为起始位置</strong>，然后我们可以不断地移动右指针，但需要保证这两个指针对应的子串没有重复的字符。在移动结束后，这个子串就对应着<strong>以左指针开始，不包含重复字符的最长子串</strong>。我们记录下这个子串的长度。</p><p>在枚举结束后，我们找到的最长的子串的长度即为答案。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0003-1.645dt74lc640.png" alt="0003-1"></p><p>「判断重复字符」</p><p>我们还需要使用一种数据结构来<strong>判断是否有重复字符</strong>，<code>Java</code>中采用<code>HashSet</code>集合，在左指针向右移动是，我们从哈希集合中移除一个字符，在右指针向右移动时，我们往哈希集合中添加一个字符。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">lengthOfLongestSubstring</span><span class="token punctuation">(</span>String s<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//哈希集合，记录每个字符是否出现过</span>
        Set<span class="token operator">&lt;</span>Character<span class="token operator">></span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//右指针，初始化-1，相当于位于字符串左边界的左侧，还没有开始移动</span>
        <span class="token keyword">int</span> right<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> ans<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> left<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> left<span class="token operator">&lt;</span>len<span class="token punctuation">;</span> left<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>left<span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//左指针向右移动一格，移除一个字符</span>
                set<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>left<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>right<span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span>len <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>set<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>right<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//不断地移动右指针</span>
                set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>right<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                right<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//以left为起始，right结束的一个无重复字符子串</span>
            ans <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> set<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，其中n是字符串的长度，左指针和右指针分别会遍历整个字符串一次。</li><li>空间复杂度：O(|∑|)，其中∑表示字符集（即字符串中可以出现的字符），|∑|表示字符集的大小。在本题中没有明确说明字符集，因此可以默认为所有ASCII码在[0,128)内的字符，即|∑|=128。我们用哈希集合存储出现过的字符，而字符最多有|∑|个，因此空间复杂度为O(|∑|)。</li></ul><h2 id="0005-最长回文子串"><a href="#0005-最长回文子串" class="headerlink" title="0005. 最长回文子串"></a>0005. 最长回文子串</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/longest-substring-without-repeating-characters">https://leetcode-cn.com/problems/longest-substring-without-repeating-characters</a></p><p><strong>方法一</strong>：中心扩散法</p><p>本题最容易想到的一种方法应该就是<strong>中心扩散法</strong>。中心扩散法怎么去找回文串？</p><p>从每一个位置出发，向两边扩散即可。遇到不是回文的时候结束。举个例子，<code>str=acdbbdaa</code>，我们需要寻找从第一个<code>b</code>（位置<code>3</code>）出发最长回文串为多少。怎么寻找？</p><ul><li>首先往左寻找与当前位置相同的字符，直到遇到不相等为止；</li><li>然后向右寻找与当前位置相同的字符，直到遇到不相等为止；</li><li>最后左右双向扩散，直到左和右不相等，如下图所示。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0005-1.6ctez85ds9c0.png" alt="0005-1"></p><p>每个位置向两边扩散都会出现一个窗口大小（<code>len</code>），如果<code>len&gt;maxLen</code>(用来表示最长回文串的长度)，则更新<code>maxLen</code>的值。</p><p>因为我们最后要返回的是具体子串，而不是长度，因此还需要记录一下<code>maxLen</code>时的起始位置<code>maxStart</code>，即此时还要<code>maxStart=len</code>。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> String <span class="token function">longestPalindrome</span><span class="token punctuation">(</span>String s<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token operator">==</span>null <span class="token operator">||</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> maxLen<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//最长回文子串长度</span>
        <span class="token keyword">int</span> maxStart<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//最长回文子串起始位置</span>
        <span class="token keyword">int</span> len<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前位置最长回文子串长度</span>
        <span class="token keyword">int</span> left<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>right<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//中心扩散法辅助指针</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> cur<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> cur<span class="token operator">&lt;</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> cur<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            len<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//更新len！！！</span>
            left<span class="token operator">=</span>cur<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
            right<span class="token operator">=</span>cur<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//向左扩散，遇到不相等结束</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>left<span class="token operator">>=</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token operator">==</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                left<span class="token operator">--</span><span class="token punctuation">;</span>
                len<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//向右扩散，遇到不相等结束</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>right<span class="token operator">&lt;</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token operator">==</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                right<span class="token operator">++</span><span class="token punctuation">;</span>
                len<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//左右同时扩散，遇到不相等结束</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>left<span class="token operator">>=</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> right<span class="token operator">&lt;</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token operator">==</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                left<span class="token operator">--</span><span class="token punctuation">;</span>
                right<span class="token operator">++</span><span class="token punctuation">;</span>
                len <span class="token operator">+=</span><span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//使用当前位置最长回文串长度len，更新最长回文子串长度maxLen，并记录起始位置</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>len<span class="token operator">></span>maxLen<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                maxLen<span class="token operator">=</span>len<span class="token punctuation">;</span>
                maxStart<span class="token operator">=</span>left<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>maxStart<span class="token punctuation">,</span> maxStart<span class="token operator">+</span>maxLen<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//[)</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n^2)，<code>n</code>是字符串长度，每个回文中心都会向外扩展。</li><li>空间复杂度：O(1)。</li></ul><p><strong>方法二</strong>：动态规划</p><p>中心扩散的方法，其实做了很多重复计算。<strong>动态规划</strong>就是为了减少重复计算的问题。动态规划听起来高大上，其实说白了就是空间换时间，将计算结果暂时存起来，避免重复计算。作用和工程中用<code>redis</code>做缓存有异曲同工之妙。</p><p>我们用一个<code>booleand dp[l][r]</code>表示字符串从<code>i</code>到<code>j</code>这段是否为回文，试想如果<code>dp[l][r]=true</code>，我们要判断<code>dp[l-1][r+1]</code>是否为回文，只需要判断字符串在(<code>l-1</code>)和(<code>r+1</code>)两个位置是否为相同的字符。</p><p>进入正题，动态规划的关键是找到初始状态和状态转移方程。</p><p><strong>初始状态</strong>，<code>l=r</code>时，<code>dp[l][r]=true</code>。</p><p><strong>状态转移方程</strong>，<code>dp[l][r]=true</code>并且(<code>l-1</code>)和(<code>r+1</code>)两个位置为相同的字符，此时<code>dp[l-1][r+1]=true</code>。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    
    <span class="token keyword">public</span> String <span class="token function">longestPalindrome</span><span class="token punctuation">(</span>String s<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>s <span class="token operator">==</span> null <span class="token operator">||</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> s<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> maxStart <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//最长回文串的起点</span>
        <span class="token keyword">int</span> maxLen <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//最长回文串的长度</span>
        <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">boolean</span><span class="token punctuation">[</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//保存计算结果</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> right <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> right <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> right<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//right初始化为1</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> left <span class="token operator">&lt;</span> right<span class="token punctuation">;</span> left<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//left初始化为0，且left&lt;right</span>
                <span class="token comment" spellcheck="true">//left和right处字符相等，且满足right-left&lt;=2或left+1到right-1处为回文串</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span> <span class="token operator">==</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>right <span class="token operator">-</span> left <span class="token operator">&lt;=</span> <span class="token number">2</span> <span class="token operator">||</span> dp<span class="token punctuation">[</span>left <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>right <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    <span class="token comment" spellcheck="true">//记录计算结果</span>
                    dp<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                    <span class="token comment" spellcheck="true">//更新最长回文串</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>right <span class="token operator">-</span> left <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">></span> maxLen<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                        maxLen <span class="token operator">=</span> right <span class="token operator">-</span> left <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
                        maxStart <span class="token operator">=</span> left<span class="token punctuation">;</span>
                    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>maxStart<span class="token punctuation">,</span> maxStart<span class="token operator">+</span>maxLen<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n^2)，<code>n</code>是字符串长度。</li><li>空间复杂度：O(n^2)。</li></ul><h2 id="0011-盛最多水的容器"><a href="#0011-盛最多水的容器" class="headerlink" title="0011. 盛最多水的容器"></a>0011. 盛最多水的容器</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/container-with-most-water/description/">https://leetcode-cn.com/problems/container-with-most-water/description/</a></p><p><strong>方法一</strong>：双指针</p><p>这道题看似简单，做起来才发现不容易，分治法、动态规划都用不上，要想得到O(n)的解法只有使用双指针一条路。即使看题解写出双指针代码，你可能也不清楚为什么正确，移动双指针为什么没有漏掉某些情况呢？</p><p>如果没有真正理解题目，即使一次对着答案做出来了，再次遇到这个题目可能还是不会。要理解这道题的正确性和原来，需要从背后的<strong>缩减搜索空间</strong>的思想去考虑题解。</p><p>用一句话概括双指针解法的要点：<strong>指针每移动一次，都意味着排除掉了一根柱子</strong>。</p><p>如下图所示，一开始我们考虑相距最远的两个柱子所能容纳的面积。水的宽度是两根柱子之间的距离<code>d=8</code>，水的高度取决于两根柱子之间较短的那个，即左边柱子的高度<code>h=3</code>，水的面积就是<code>3×8=24</code>。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0011-1.7isxqcl71fg0.png" alt="0011-1"></p><p>如果选择固定一根柱子，另一根变化，水的面积会有什么变化吗？稍加思考可得：</p><ul><li>当前柱子是最两侧的柱子，水的宽度<code>d</code>为最大，其他组合水的宽度都比这个小；</li><li>左边柱子较短，决定了水的高度为<code>3</code>，如果移动左边的柱子，新的水面高度不确定，但一定不会超过右边柱子高度<code>7</code>；</li><li>如果移动右边的柱子，新的水面高度一定不会超过左边的柱子高度<code>3</code>，也就是不会超过现在的水面高度</li></ul><p>由此可见，如果固定左边的柱子，移动右边的柱子，那么水的高度一定不会增加，且宽度一定减少，所以水的面积一定减少。这个时候，左边的柱子和任意一个其他柱子的组合，其实都可以排除了。也就是我们可以排除左边的柱子了。</p><p>这个排除左边柱子的操作，就是双指针中左指针加一，随着不断地排除，当左指针和右指针相遇，算法就结束了。</p><p>此题类似<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/two-sum-ii-input-array-is-sorted/">0167 两数之和ΙΙ-输入有序数组</a></p><p>考虑下标约束和指针移动意味着什么？缩减搜索空间。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0011-2.3dtb299muo20.png" alt="0011-2"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxArea</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> height<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//初始化双指针</span>
        <span class="token keyword">int</span> left<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> right<span class="token operator">=</span>height<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//初始化结果和临时变量</span>
        <span class="token keyword">int</span> ans<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> area<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>left<span class="token operator">&lt;</span>right<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//当前指针位置对于的容器大小</span>
            area <span class="token operator">=</span> <span class="token punctuation">(</span>right<span class="token operator">-</span>left<span class="token punctuation">)</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>height<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">,</span> height<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//更新最大容器</span>
            ans <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> area<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//移动指针，排除数值较小的指针组合，与其他柱子结合都小于等于当前面积</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>height<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token operator">&lt;</span>height<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                left<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                right<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，n为height数组长度。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0015-三数之和"><a href="#0015-三数之和" class="headerlink" title="0015. 三数之和"></a>0015. 三数之和</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/3sum/">https://leetcode-cn.com/problems/3sum/</a></p><p><strong>方法一</strong>：排序+双指针</p><p>本题的难点在于如何<strong>去除重复解</strong>。</p><p><strong>特判情况</strong>：对于数组为<code>null</code>或数组长度小于<code>3</code>，返回空列表。</p><p>首先对数组进行<strong>排序</strong>，排序后遍历数组，固定一个数<code>num[i]</code>，再使用<strong>左右指针</strong>指向<code>nums[i]</code>后面数组的两端。</p><ul><li>如果<code>nums[i]</code>大于<code>0</code>，则三数之和必然无法等于<code>0</code>，结束循环；</li><li>如果<code>nums[i]==nums[i-1]</code>，则说明该数字重复，会导致结果重复，所以应该跳过；</li><li>令左指针<code>L=i+1</code>，右指针<code>R=n-1</code>，当<code>L&lt;R</code>时，执行循环：</li><li><ul><li>当<code>nums[i] + nums[L] + nums[R]==0</code>时，将三个数添加进结果集。如果此时<code>nums[L]==nums[L+1]</code>，则会导致结果重复，应该跳过，如果<code>L&lt;R</code>且数字相等，<code>L</code>一直右移。如果此时<code>nums[R]==nums[R-1]</code>，则会导致结果重复，应该跳过，如果<code>L&lt;R</code>且数字相等，<code>R</code>一直左移。</li><li>若和大于<code>0</code>，说明<code>nums[R]</code>太大，<code>R</code>左移。</li><li>若和小于<code>0</code>，说明<code>nums[L]</code>太小，<code>L</code>右移</li></ul></li></ul><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> <span class="token function">threeSum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> ans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//特判情况</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token operator">==</span>null <span class="token operator">||</span> len<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//排序</span>
        Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历+双指针</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//如果当前数字大于0，则三数之和一定大于0，所以结束循环</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">></span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span>nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//去重</span>
            <span class="token keyword">int</span> L<span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//双指针遍历</span>
            <span class="token keyword">int</span> R<span class="token operator">=</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>L<span class="token operator">&lt;</span>R<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">int</span> sum <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>L<span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>R<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>sum<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//三数之和为0</span>
                    <span class="token comment" spellcheck="true">// ArrayList&lt;Integer> list = new ArrayList&lt;>();</span>
                    <span class="token comment" spellcheck="true">// list.add(nums[i]);</span>
                    <span class="token comment" spellcheck="true">// list.add(nums[L]);</span>
                    <span class="token comment" spellcheck="true">// list.add(nums[R]);</span>
                    <span class="token comment" spellcheck="true">// ans.add(list);</span>
                    ans<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>nums<span class="token punctuation">[</span>L<span class="token punctuation">]</span><span class="token punctuation">,</span>nums<span class="token punctuation">[</span>R<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//返回指定数据组成的固定大小的列表</span>
                    <span class="token keyword">while</span><span class="token punctuation">(</span>L<span class="token operator">&lt;</span>R <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>L<span class="token punctuation">]</span><span class="token operator">==</span>nums<span class="token punctuation">[</span>L<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//去重</span>
                        L<span class="token operator">++</span><span class="token punctuation">;</span>
                    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
                    <span class="token keyword">while</span><span class="token punctuation">(</span>L<span class="token operator">&lt;</span>R <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>R<span class="token punctuation">]</span><span class="token operator">==</span>nums<span class="token punctuation">[</span>R<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//去重</span>
                        R<span class="token operator">--</span><span class="token punctuation">;</span>
                    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
                    L<span class="token operator">++</span><span class="token punctuation">;</span>
                    R<span class="token operator">--</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>sum<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//和小，L右移</span>
                    L<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>sum<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//和大，R左移</span>
                    R<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n^2)，数组排序<code>O(nlog n)</code>，数组遍历和双指针遍历<code>O(n^2)</code>，总体<code>O(n^2)</code>。</li><li>空间复杂度：O(log n)。我们忽略存储答案的空间，额外排序的空间复杂度为<code>O(log n)</code>。然而我们修改了输入的数组<code>nums</code>，在实际情况下不一定允许，因此也可以看成使用了一个额外的数组存储了<code>nums</code>的副本并进行排序，空间复杂度为<code>O(n)</code>。</li></ul><h2 id="0017-电话号码的字母组合"><a href="#0017-电话号码的字母组合" class="headerlink" title="0017. 电话号码的字母组合"></a>0017. 电话号码的字母组合</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number">https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number</a></p><p><strong>方法一</strong>：回溯</p><p>当题目出现“<strong>所有组合</strong>”等类似字眼时，我们的第一感觉就要想到用<strong>回溯</strong>。也就是在循环里套了递归调用。</p><p>首先需要一个<code>map</code>集合，从输入数字映射到字符串，这里可以用<code>String</code>数组。需要<code>StringBuilder</code>来拼接字符串。输入<code>digits</code>为<code>null</code>和长度为<code>0</code>时，直接返回空列表。</p><p>回溯函数<code>backtrack(digits, 0)</code>，输入数字字符串和当前拼接索引</p><ul><li>当拼接字符串长度等于<code>digits</code>长度时，将拼接字符串<code>sb</code>转为字符串保存到列表<code>res</code>中；</li><li>取出当前输入数字对应的字符串映射<code>map[digits.charAt(index)-&#39;2&#39;]</code>；</li><li>将此字符串转换为新的字符数组，遍历该数组，首先拼接字符<code>sb.append(ch)</code>，然后调用回溯函数<code>backtrack(digits, index+1)</code>，回溯时删除拼接字符串的最后一个字符<code>sb.deleteCharAt(sb.length()-1)</code>。</li></ul><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//数字到字符串的映射</span>
    <span class="token keyword">private</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span> map<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token string">"abc"</span><span class="token punctuation">,</span> <span class="token string">"def"</span><span class="token punctuation">,</span> <span class="token string">"ghi"</span><span class="token punctuation">,</span> <span class="token string">"jkl"</span><span class="token punctuation">,</span> <span class="token string">"mno"</span><span class="token punctuation">,</span> <span class="token string">"pqrs"</span><span class="token punctuation">,</span> <span class="token string">"tuv"</span><span class="token punctuation">,</span> <span class="token string">"wxyz"</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//拼接字符</span>
    <span class="token keyword">private</span> StringBuilder sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//结果集</span>
    <span class="token keyword">private</span> List<span class="token operator">&lt;</span>String<span class="token operator">></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>String<span class="token operator">></span> <span class="token function">letterCombinations</span><span class="token punctuation">(</span>String digits<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//特例</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>digits<span class="token operator">==</span>null <span class="token operator">||</span> digits<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> res<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//调用回溯函数，digits输入数字字符串，0当前数字索引</span>
        <span class="token function">backtrack</span><span class="token punctuation">(</span>digits<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//回溯函数</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">backtrack</span><span class="token punctuation">(</span>String digits<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//拼接字符长度等于digits长度</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> digits<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//输入数字对应的映射字符串</span>
        String val <span class="token operator">=</span> map<span class="token punctuation">[</span>digits<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token operator">-</span><span class="token string">'2'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token operator">:</span>val<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//取出当前输入数字对应的字符串映射</span>
            sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//拼接字符</span>
            <span class="token function">backtrack</span><span class="token punctuation">(</span>digits<span class="token punctuation">,</span> index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//递归调用下一个输入数字</span>
            sb<span class="token punctuation">.</span><span class="token function">deleteCharAt</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//回溯时删除最后一个拼接字符</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(3^m×4^n)，其中m是输入中对应3个字母的数字个数，n是输入中对应3个字母的数字个数。当输入包含m个对应3个字母和n个对应4个字母的数字时，不同的字母组合一共有3^m×4^n中，需要遍历每一种字母组合。</li><li>空间复杂度：O(m+n)，m+n是输入数字的总个数，除了返回值外，空间复杂度主要取决于哈希表以及回溯过程中的递归调用层数，哈希表与输入无关，可以看出常数，递归调用层数最大为m+n。</li></ul><p><strong>方法二</strong>：队列法</p><p>我们也可使用队列，初始化队列仅含一个空字符串。遍历输入的<code>digits</code>，得到输入数字对应的映射字符串，然后从队列中取出所有当前元素，与映射字符串分别拼接后入队，直到遍历到<code>digits</code>末尾，最后队列中的元素就是所求结果。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0017-1.76abzgcyfkg.png" alt="0017-1"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>String<span class="token operator">></span> <span class="token function">letterCombinations</span><span class="token punctuation">(</span>String digits<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//特例</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>digits<span class="token operator">==</span>null <span class="token operator">||</span> digits<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//数字到字符串的映射</span>
        String<span class="token punctuation">[</span><span class="token punctuation">]</span> map<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token string">"abc"</span><span class="token punctuation">,</span> <span class="token string">"def"</span><span class="token punctuation">,</span> <span class="token string">"ghi"</span><span class="token punctuation">,</span> <span class="token string">"jkl"</span><span class="token punctuation">,</span> <span class="token string">"mno"</span><span class="token punctuation">,</span> <span class="token string">"pqrs"</span><span class="token punctuation">,</span> <span class="token string">"tuv"</span><span class="token punctuation">,</span> <span class="token string">"wxyz"</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        List<span class="token operator">&lt;</span>String<span class="token operator">></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//先往队列里加入一个空字符串</span>
        res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>digits<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//由当前遍历的数字字符，取出对应的字符串</span>
            String letters <span class="token operator">=</span> map<span class="token punctuation">[</span>digits<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">-</span><span class="token string">'2'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//从当前队列中将每个元素依次取出拼接</span>
            <span class="token keyword">int</span> size <span class="token operator">=</span> res<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//不可写在第二个循环，会造成死循环</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>size<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//取出队首元素</span>
                String temp <span class="token operator">=</span> res<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//与letters拼接</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> k<span class="token operator">&lt;</span>letters<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>temp<span class="token operator">+</span>letters<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(3^m×4^n)，其中m是输入中对应3个字母的数字个数，n是输入中对应3个字母的数字个数。</li><li>空间复杂度：O(3^m×4^n)，拼接字符串一共要生成3^m×4^n个结果。</li></ul><h2 id="0019-删除链表的倒数第-N-个节点"><a href="#0019-删除链表的倒数第-N-个节点" class="headerlink" title="0019. 删除链表的倒数第 N 个节点"></a>0019. 删除链表的倒数第 N 个节点</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/">https://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/</a></p><p><strong>方法一</strong>：栈</p><p>一种容易想到的方法是两次遍历链表，第一次遍历得到链表长度<code>L</code>，随后再次遍历，当遍历到<code>L-n+1</code>时，它就是我们要删除的节点。时间复杂度O(L)，空间复杂度：O(1)。</p><p>题目进阶要求<strong>一次遍历完成</strong>，可以借用栈空间，根据栈「先进后出」的原则，我们弹出栈的第n个节点就是需要删除的节点，并且当前栈顶的节点就是待删除节点的前驱节点。设置一个傀儡头结点指向头结点，在删除头结点时起作用。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> ListNode <span class="token function">removeNthFromEnd</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        ListNode dummy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> head<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//傀儡节点，指向头结点</span>
        Deque<span class="token operator">&lt;</span>ListNode<span class="token operator">></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span>ListNode<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ListNode cur <span class="token operator">=</span> dummy<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>cur <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//链表所有节点入栈</span>
            stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>
            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//弹出n个链表节点，栈顶为待删除元素的前一个节点</span>
            stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        ListNode prev <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//获得栈顶节点</span>
        prev<span class="token punctuation">.</span>next <span class="token operator">=</span> prev<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//删除倒数第n个节点</span>
        <span class="token keyword">return</span> dummy<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(L)，L为链表长度。</li><li>空间复杂度：O(L)，栈空间。</li></ul><p><strong>方法二</strong>：双指针</p><p>能不能不适用栈，一次遍历完成呢？答案是肯定的，使用双指针，遍历结束时，一个指针<code>slow</code>指向待删除元素的前一个元素，另一个指针<code>quick</code>指向末尾的<code>null</code>，将<code>slow</code>指向下下一个元素即可。</p><ul><li>创建傀儡节点<code>dummy</code>指向父节点，设置<code>slow</code>指向傀儡节点，<code>quick</code>指向<code>head</code>头结点</li><li>先将<code>quick</code>后移<code>n</code>次</li><li>同时移动<code>quick</code>和<code>slow</code>，直到<code>quick</code>为空，此时<code>slow</code>指向待删除元素的前一个元素</li><li>将<code>slow</code>指向下下一个节点即可，返回<code>dummy.next</code></li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0019-1.5rduod3x12g0.gif" alt="0019-1"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> ListNode <span class="token function">removeNthFromEnd</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        ListNode dummy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> head<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//傀儡头结点</span>
        ListNode quick <span class="token operator">=</span> head<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//快指针指向头结点</span>
        ListNode slow <span class="token operator">=</span> dummy<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//慢指针指向傀儡头结点</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//快指针后移n次</span>
            quick <span class="token operator">=</span> quick<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>quick <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//快慢指针同时后移，直到快指针为null，此时慢指针指向待删除节点的前一个节点</span>
            quick <span class="token operator">=</span> quick<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            slow <span class="token operator">=</span> slow<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        slow<span class="token punctuation">.</span>next <span class="token operator">=</span> slow<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//删除倒数第n个节点</span>
        <span class="token keyword">return</span> dummy<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(L)，L为链表长度。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0022-括号生成"><a href="#0022-括号生成" class="headerlink" title="0022. 括号生成"></a>0022. 括号生成</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/generate-parentheses">https://leetcode-cn.com/problems/generate-parentheses</a></p><p>这一类问题是在一棵隐式的树上求解，可以用深度优先遍历，也可以用广度优先遍历。<br>一般用深度优先遍历。原因是：</p><ul><li>代码好写，使用递归的方法，直接借助系统栈完成状态的转移；</li><li>广度优先遍历得自己编写结点类和借助队列。</li></ul><p>这里的「状态」是指程序执行到 隐式树 的某个结点的语言描述，在程序中用不同的 变量 加以区分。</p><p><strong>方法一</strong>：回溯（深度优先遍历）</p><p>由于我们需要求解所有可能，因此回溯就不难想到，但这与<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number">0017.电话号码的字符组合</a>不同，<code>0017</code>所有组合情况都符合条件，而本题需要组成的括号有效。因此需要对回溯进行优化，<strong>回溯的优化手段大多数是剪枝</strong>。</p><p>「<strong>做加法</strong>」括号使用数从<code>0-&gt;n</code>，做减法与做加法类似，括号剩余数从<code>n-&gt;0</code>。做加法的情况如下。</p><ul><li><p>当前左右括号使用数都小于<code>n</code>个时，才能产生分支。在左边和右边使用括号数都等于<code>n</code>时，是一种结果（<strong>回溯退出条件</strong>）；</p></li><li><p>产生左分支的时候，当前左括号使用数小于<code>n</code>可以使用；</p></li><li><p>产生右分支的时候，还受左分支的限制，左边使用括号数一定得严格小于右边使用括号数(<strong>剪枝</strong>)，才可以产生分支；</p></li></ul><p>加法递归树</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0022-1.pp6m3ws6feo.png" alt="0022-1"></p><p>减法递归树</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0022-2.10c0f9c0brfk.png" alt="0022-2"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// 做加法</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>String<span class="token operator">></span> <span class="token function">generateParenthesis</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        List<span class="token operator">&lt;</span>String<span class="token operator">></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">/**
     * @param res    结果集
     * @param cur    当前递归得到的结果
     * @param left   左括号使用数
     * @param right  右括号使用数
     * @param n      左括号、右括号一共需要使用的数目
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span>String<span class="token operator">></span> res<span class="token punctuation">,</span> StringBuilder cur<span class="token punctuation">,</span> <span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">==</span> n <span class="token operator">&amp;&amp;</span> right <span class="token operator">==</span> n<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//回溯结束条件，拼接字符串放入结果集</span>
            res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//剪枝，左括号使用数小于右括号使用数时！如，())</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> n<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//左括号使用数小于n，递归</span>
            cur<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'('</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> left <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> right<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
            cur<span class="token punctuation">.</span><span class="token function">deleteCharAt</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>right <span class="token operator">&lt;</span> n<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//右括号使用数小于n，递归</span>
            cur<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">')'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
            cur<span class="token punctuation">.</span><span class="token function">deleteCharAt</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(4^n/sqrt(n))，n为括号对数，在回溯过程中，每个答案需要O(n)的时间复制到答案数组中。</li><li>空间复杂度：O(n)，除了答案集合之外，所需空间取决于递归栈的深度，每一层递归函数需要O(1)的空间，最多递归2n层，因此空间复杂度为O(n)。</li></ul><p><strong>方法二</strong>：广度优先遍历</p><p>通过编写广度优先遍历的代码，读者可以体会一下，为什么搜索几乎都是用深度优先遍历（回溯算法）。</p><p>广度优先遍历，需要程序员自己编写节点类，显示使用队列这个数据结构。深度优先遍历的时候，就可以直接使用系统栈，在递归方法执行完成的时候，系统栈顶就把我们所需要的状态信息直接弹出，而无需编写节点类和显示使用栈。</p><p>使用广度优先遍历，结果集都在最后一层，即叶子节点处得到所有的结果集。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//创建队列节点，保存当前状态</span>
    <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">private</span> String str<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前得到的字符串</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> left<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//已使用的左括号数量</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> right<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//已使用的右括号数量</span>

        <span class="token keyword">public</span> <span class="token function">Node</span><span class="token punctuation">(</span>String str<span class="token punctuation">,</span> <span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>str <span class="token operator">=</span> str<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>String<span class="token operator">></span> <span class="token function">generateParenthesis</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//结果集</span>
        List<span class="token operator">&lt;</span>String<span class="token operator">></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//双端队列</span>
        Deque<span class="token operator">&lt;</span>Node<span class="token operator">></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//将空字符串放入</span>
        queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>queue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//检索并删除队列的头元素</span>
            Node curNode <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//左右括号使用数量为n，加入结果集</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>curNode<span class="token punctuation">.</span>left <span class="token operator">==</span> n <span class="token operator">&amp;&amp;</span> curNode<span class="token punctuation">.</span>right <span class="token operator">==</span> n<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>curNode<span class="token punctuation">.</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//左括号入队，左括号使用数量小于n</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>curNode<span class="token punctuation">.</span>left <span class="token operator">&lt;</span> n<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>curNode<span class="token punctuation">.</span>str <span class="token operator">+</span> <span class="token string">"("</span><span class="token punctuation">,</span> curNode<span class="token punctuation">.</span>left<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> curNode<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//右括号入队，右括号使用数量小于n，且左括号使用数量大于右括号使用数量</span>
            <span class="token comment" spellcheck="true">//（回溯中，左括号使用数量小于右括号，剪枝）迭代中，入队条件与剪枝条件相反</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>curNode<span class="token punctuation">.</span>right <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> curNode<span class="token punctuation">.</span>left <span class="token operator">></span> curNode<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>curNode<span class="token punctuation">.</span>str <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">,</span> curNode<span class="token punctuation">.</span>left<span class="token punctuation">,</span> curNode<span class="token punctuation">.</span>right<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><h2 id="0024-两两交换链表中的节点"><a href="#0024-两两交换链表中的节点" class="headerlink" title="0024. 两两交换链表中的节点"></a>0024. 两两交换链表中的节点</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/swap-nodes-in-pairs/">https://leetcode-cn.com/problems/swap-nodes-in-pairs/</a></p><p><strong>方法一</strong>：递归</p><p>可以通过递归的方式实现两两交换链表中的节点。</p><p><strong>递归的终止条件</strong>是链表中没有节点，或者链表中只有一个节点，此时无法交换。</p><p>如果链表中至少有两个节点，则在两两交换链表中的节点之后，原始链表的头结点变成新的链表的第二个节点，原始链表的第二个节点变成新的链表的头结点。链表中的其余节点的两两交换可以递归地实现。在对链表中的其余节点递归地两两交换之后，更新节点之间的指针关系，即可完成整个链表的两两交换。</p><p>用<code>head</code>表示原始链表的头结点(新链表的第二个节点)，用<code>newHead</code>表示新的链表的头结点(原始链表的第二个节点)，则原始链表中的其余节点的头结点时<code>newHead.next</code>。令<code>head.next=swapPairs(newHead.next)</code>，表示将其余节点进行两两交换，交换后的新的头结点为head的下一个节点。然后令<code>newHead.next=head</code>，即完成了所有节点的交换。最后返回新的链表头结点<code>newHead</code>。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> ListNode <span class="token function">swapPairs</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>head<span class="token operator">==</span>null <span class="token operator">||</span> head<span class="token punctuation">.</span>next<span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//递归终止条件</span>
            <span class="token keyword">return</span> head<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//理解交换过程</span>
        ListNode newHead <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//新的头结点，原链表的第二个节点</span>
        head<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token function">swapPairs</span><span class="token punctuation">(</span>newHead<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//原始头节点的指向修改为新头节点下一个节点作为头结点交换结果</span>
        newHead<span class="token punctuation">.</span>next <span class="token operator">=</span> head<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//新的头节点指向旧链表的头节点</span>
        <span class="token keyword">return</span> newHead<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，其中n是链表的节点数量，需要对每个节点进行更新指针的操作。</li><li>空间复杂度：O(n)，取决于递归调用的栈空间。</li></ul><p><strong>方法二</strong>：迭代</p><p>也可以通过迭代的方式实现两两交换链表中的节点。</p><p>创建哑结点dumyHead，令dummyHead.next=head。令temp表示当前到达的节点，初始时temp=dummyHead。每次需要交换temp后面的两个节点。</p><p>如果temp后面没有节点或只有一个节点，则没有更多的节点需要交换，因此结束交换。否则，获得temp后面的两个节点node1和node2，通过更新节点的指针关系实现两两交换节点。</p><p>具体而言，交换之前的节点关系是temp-&gt;node1-&gt;node2，交换之后的节点关系要变成temp-&gt;node2-&gt;node1，因此需要进行如下操作。</p><pre class="language-java"><code class="language-java">temp<span class="token punctuation">.</span>next <span class="token operator">=</span> node2
node1<span class="token punctuation">.</span>next <span class="token operator">=</span> node2<span class="token punctuation">.</span>next
node2<span class="token punctuation">.</span>next <span class="token operator">=</span> node1
</code></pre><p>完成上述操作后，节点关系即变成temp-&gt;node2-&gt;node1，再令temp=node1，对链表中其余节点进行两两交换，直到全部节点都被两两交换。</p><p>两两交换链表中的节点之后，新的链表头结点是dummyHead.next，返回新的链表头结点即可。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0024-1.3iz0dhno2ym0.png" alt="0024-1"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> ListNode <span class="token function">swapPairs</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        ListNode dummyHead <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//哑(头)节点</span>
        dummyHead<span class="token punctuation">.</span>next<span class="token operator">=</span>head<span class="token punctuation">;</span>
        ListNode temp<span class="token operator">=</span>dummyHead<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//待交换节点的前一个节点</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>temp<span class="token punctuation">.</span>next<span class="token operator">!=</span>null <span class="token operator">&amp;&amp;</span> temp<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            ListNode node1 <span class="token operator">=</span> temp<span class="token punctuation">.</span>next<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//两个指针指向两个待交换节点</span>
            ListNode node2 <span class="token operator">=</span> temp<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            temp<span class="token punctuation">.</span>next <span class="token operator">=</span> node2<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//修改指针指向，注意避免链表断裂</span>
            node1<span class="token punctuation">.</span>next <span class="token operator">=</span> node2<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            node2<span class="token punctuation">.</span>next <span class="token operator">=</span> node1<span class="token punctuation">;</span>
            temp <span class="token operator">=</span> node1<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//修改temp</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> dummyHead<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，其中n是链表的节点数量，需要对每个节点进行更新指针的操作。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0029-两数相除"><a href="#0029-两数相除" class="headerlink" title="0029. 两数相除"></a>0029. 两数相除</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/divide-two-integers/">https://leetcode-cn.com/problems/divide-two-integers/</a></p><p><strong>方法一</strong>：递归+倍增测试</p><p>符合直觉的做法是，被减数一次一次减去减数，不断更新差，直到差小于<code>0</code>，我们减了多少次，结果就是多少。注意：思路简单，效率极低。而且越界的判断没那么简单。</p><p><strong>一些简单的特殊情况处理</strong></p><ul><li>被除数为<code>0</code>，直接返回<code>0</code></li><li>除数为<code>1</code>，直接返回被除数</li><li>除数为-1，存在唯一的溢出情况，被除数为<code>Inter.MIN_VALUE</code>，<code>-2^31</code>，按题目要求返回<code>Integer.MAX_VALUE</code>，<code>2^31-1</code>。不溢出直接返回改变符号的被除数</li></ul><p>设置<code>boolean</code>标志位，通过异或判断结果为正还是负，即判断两数是否异号，<code>(dividend ^ divisor)&lt;0</code>为异号。之后将除数和被除数均转为符号相同的数运算（因为<code>int</code>类型，负数的表示范围大）。</p><p>int类型范围<code>[-2^31, 2^31 - 1]</code>。</p><p>举个例子：<code>11</code>除以<code>3</code>，正数运算为例</p><ul><li>首先<code>11&gt;3</code>，结果至少是<code>1</code>。我们让<code>3</code>翻倍就是<code>6</code>，发现<code>11</code>比<code>6</code>大，那结果至少是<code>2</code>了，接着让<code>6</code>再翻倍是<code>12</code>，此时翻倍结果大于<code>11</code>，就不能让<code>2</code>翻倍得<code>4</code>了，但是我们知道结果肯定在<code>2</code>和<code>4</code>之间。</li><li>也就是<code>2</code>加上某个数就是结果，这个数是多少呢？我们让<code>11</code>减去最后一次倍增的结果<code>6</code>，即<code>12-6=5</code>，剩下<code>5</code>，我们计算<code>5</code>是<code>3</code>的几倍，接着倍增测试，看，递归出现了。</li></ul><p>用正数运算，采用<code>long</code>防止溢出，最后根据<code>res</code>处理溢出。</p><p>用负数运算，采用被除数左移防止溢出。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//1. 使用long防止溢出</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">divide</span><span class="token punctuation">(</span><span class="token keyword">int</span> dividend<span class="token punctuation">,</span> <span class="token keyword">int</span> divisor<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//特例处理</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>dividend <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>divisor <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> dividend<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>divisor <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//运算溢出情况</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>dividend<span class="token operator">==</span>Integer<span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">)</span> <span class="token keyword">return</span> Integer<span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token operator">-</span>dividend<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        
        <span class="token comment" spellcheck="true">//异或判断结果正负</span>
        <span class="token keyword">boolean</span> sign <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dividend<span class="token operator">^</span>divisor<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span> sign<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//被除数和除数均转为正数处理</span>
        <span class="token keyword">long</span> a <span class="token operator">=</span> dividend<span class="token punctuation">;</span>
        <span class="token keyword">long</span> b <span class="token operator">=</span> divisor<span class="token punctuation">;</span>
        a <span class="token operator">=</span> a<span class="token operator">></span><span class="token number">0</span><span class="token operator">?</span>a<span class="token operator">:</span><span class="token operator">-</span>a<span class="token punctuation">;</span>
        b <span class="token operator">=</span> b<span class="token operator">></span><span class="token number">0</span><span class="token operator">?</span>b<span class="token operator">:</span><span class="token operator">-</span>b<span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//方案一：迭代</span>
        <span class="token keyword">long</span> res<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>a<span class="token operator">>=</span>b<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//正数运算，3/2可进入</span>
            <span class="token keyword">long</span> temp<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">long</span> tb <span class="token operator">=</span> b<span class="token punctuation">;</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>tb<span class="token operator">+</span>tb<span class="token punctuation">)</span><span class="token operator">&lt;=</span>a<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//倍增测试</span>
                tb <span class="token operator">=</span> tb<span class="token operator">+</span>tb<span class="token punctuation">;</span>
                temp <span class="token operator">=</span> temp<span class="token operator">+</span>temp<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            res <span class="token operator">+=</span> temp<span class="token punctuation">;</span>
            a <span class="token operator">-=</span> tb<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//方案二：递归调用</span>
        <span class="token comment" spellcheck="true">// long res = div(a,b);</span>

        <span class="token comment" spellcheck="true">//返回结果</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token operator">></span>Integer<span class="token punctuation">.</span>MAX_VALUE <span class="token operator">||</span> res<span class="token operator">&lt;</span>Integer<span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">)</span> res <span class="token operator">=</span> Integer<span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//溢出处理</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>sign<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token operator">-</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//精髓和难点就在于下面这几句，使用long类型，divisor倍增时不会越界</span>
    <span class="token keyword">private</span> <span class="token keyword">long</span> <span class="token function">div</span><span class="token punctuation">(</span><span class="token keyword">long</span> a<span class="token punctuation">,</span> <span class="token keyword">long</span> b<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>  
        <span class="token comment" spellcheck="true">//递归结束条件</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token operator">&lt;</span>b<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">long</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> tb <span class="token operator">=</span> b<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//测试值</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>tb<span class="token operator">+</span>tb<span class="token punctuation">)</span><span class="token operator">&lt;=</span>a<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            count <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//最小解翻倍</span>
            tb <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//当前测试的值也翻倍</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> count <span class="token operator">+</span> <span class="token function">div</span><span class="token punctuation">(</span>a<span class="token operator">-</span>tb<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//2. 转为负数，被除数左移防止溢出</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">divide</span><span class="token punctuation">(</span><span class="token keyword">int</span> dividend<span class="token punctuation">,</span> <span class="token keyword">int</span> divisor<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//特例处理</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>dividend <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>divisor <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> dividend<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>divisor <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>dividend<span class="token operator">==</span>Integer<span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">)</span> <span class="token keyword">return</span> Integer<span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//唯一的运算溢出情况</span>
            <span class="token keyword">return</span> <span class="token operator">-</span>dividend<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        
        <span class="token comment" spellcheck="true">//异或判断结果正负</span>
        <span class="token keyword">boolean</span> sign <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dividend<span class="token operator">^</span>divisor<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span> sign<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//被除数和除数均转为负数处理，-2^31不能用正数表示，唯一的表示溢出情况</span>
        dividend <span class="token operator">=</span> dividend<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">?</span>dividend<span class="token operator">:</span><span class="token operator">-</span>dividend<span class="token punctuation">;</span>
        divisor <span class="token operator">=</span> divisor<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">?</span>divisor<span class="token operator">:</span><span class="token operator">-</span>divisor<span class="token punctuation">;</span>
        
        <span class="token comment" spellcheck="true">//方案一：迭代</span>
        <span class="token keyword">int</span> res<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>dividend<span class="token operator">&lt;=</span>divisor<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//负数运算，-2/-1可进入</span>
            <span class="token keyword">int</span> temp<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> tb<span class="token operator">=</span>divisor<span class="token punctuation">;</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dividend<span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>tb<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//倍增测试</span>
                tb <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                temp <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            res <span class="token operator">+=</span> temp<span class="token punctuation">;</span>
            dividend <span class="token operator">-=</span> tb<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//方案二：递归调用</span>
        <span class="token comment" spellcheck="true">// int res = div(dividend,divisor);</span>

        <span class="token comment" spellcheck="true">//返回结果</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>sign<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span>res<span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//精髓和难点就在于下面这几句，dividend和divisor都是负数，且中间不会出现越界</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">div</span><span class="token punctuation">(</span><span class="token keyword">int</span> dividend<span class="token punctuation">,</span> <span class="token keyword">int</span> divisor<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>  
        <span class="token comment" spellcheck="true">//递归结束条件，负数运算，被除数大于除数时返回0，如-1除以-2</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>dividend<span class="token operator">></span>divisor<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> tb <span class="token operator">=</span> divisor<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//测试值</span>
        <span class="token comment" spellcheck="true">//如果对tb翻倍，就可能越界，所以算dividend减半</span>
        <span class="token comment" spellcheck="true">//不能用&lt;=号，由于dividend>>1可能牺牲精度，本来时tb*2不满足的情况满足</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dividend<span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>tb<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            count <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//最小解翻倍</span>
            tb <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//当前测试的值也翻倍，dividend/2 > tb，而dividend没有越界，所以2*t也不会越界</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> count <span class="token operator">+</span> <span class="token function">div</span><span class="token punctuation">(</span>dividend<span class="token operator">-</span>tb<span class="token punctuation">,</span>divisor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><h2 id="0031-下一个排列"><a href="#0031-下一个排列" class="headerlink" title="0031. 下一个排列"></a>0031. 下一个排列</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/next-permutation/solution/xia-yi-ge-pai-lie-by-leetcode-solution/">https://leetcode-cn.com/problems/next-permutation/solution/xia-yi-ge-pai-lie-by-leetcode-solution/</a></p><p><strong>方法一</strong>：两边扫描</p><p>本题要求找给定序列的下一个更大排列，以数字序列<code>[1,2,3]</code>为例，其排列依次为：</p><p><code>[1,2,3]-&gt;[1,3,2]-&gt;[2,1,3]-&gt;[2,3,1]-&gt;[3,1,2]-&gt;[3,2,1]</code></p><p>特别地，排序<code>[3,2,1]</code>的下一个排列是最小的排列<code>[1,2,3]</code>。</p><p>注意到下一个排列总是比当前排列要大，除非该排列已经是最大的排列。我们希望找到一种方法，能够找到一个大于当前序列的新序列，且变化的幅度尽可能小。具体地：</p><ul><li>我们需要将一个<strong>左边的较小数</strong>与一个<strong>右边的较大数</strong>交换，能够让当前排列变大，从而得到下一个排列。</li><li>同时我们要让这个<strong>较小数尽量靠右</strong>，而<strong>较大数尽可能小</strong>。当交换完成后，<strong>较大数右边的数需要按照升序重新排列</strong>，这样可以保证新排列大于原来排列的情况下，使变大的幅度尽可能小。</li></ul><p>以<code>[4,5,2,6,3,1]</code>为例：</p><ul><li>我们找到符合条件的一对<strong>较小数与较大数</strong>的组合为<code>2</code>和<code>3</code>，满足较小数尽量靠右，而较大数尽可能小。</li><li>当我们完成交换后排列变为<code>[4,5,3,6,2,1]</code>，此时我们可以重排较小数右边的序列，序列变为<code>[4,5,3,1,2,6]</code>。</li></ul><p>具体的算法：</p><ul><li>从后向前扫描数组，<strong>找到第一个降序位置为较小数</strong>，必然可以与其右边一个数交换位置得到一个较大序列。如果没找到降序位置，说明当前序列已经是一个降序序列（即最大序列），直接将序列翻转得到升序序列即可（最小序列）；</li><li>接着从后向前扫描数组，<strong>找到第一个比较小数大的较大数</strong>，交换两个数的位置，然后将最小数位置后面所有位置按升序排列（本身是降序，双指针指向末尾两两交换即可），得到下一个比当前排列大的排列。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0031-1.4c5bqf5maqq0.png" alt="0031-1"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">nextPermutation</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//较小数位置</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">>=</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">>=</span>nums<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//从右到左扫描，找到第一个降序位置i</span>
            i<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//存在降序位置i</span>
            <span class="token keyword">int</span> j<span class="token operator">=</span>nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//较大数位置</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>j<span class="token operator">></span>i <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">>=</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//从右到左扫描，找到第一个比较小数大的数的位置</span>
                j<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//交换较大数和较小数</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token function">reverse</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//交换后，较小数位置后面的数据升序排列。或者整个数组升序排列</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//交换数组两个位置数据</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> temp<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        temp <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
        nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//数组i及以后位置数据升序排列，本身是降序</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">reverse</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> start<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> left<span class="token operator">=</span>start<span class="token punctuation">;</span>
        <span class="token keyword">int</span> right<span class="token operator">=</span>nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>left<span class="token operator">&lt;</span>right<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span>
            left<span class="token operator">++</span><span class="token punctuation">;</span>
            right<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>            
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，n为给定序列长度，至多需要扫描两次序列，以及进行一次反转操作。</li><li>空间复杂度：O(1)，只需要常数的空间存放若干变量。</li></ul><h2 id="0033-搜索旋转排序数组"><a href="#0033-搜索旋转排序数组" class="headerlink" title="0033. 搜索旋转排序数组"></a>0033. 搜索旋转排序数组</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/search-in-rotated-sorted-array/">https://leetcode-cn.com/problems/search-in-rotated-sorted-array/</a></p><p><strong>方法一</strong>：二分查找</p><p>对于有序数组，可以使用二分查找的方法查找元素。但是这道题中，数组本身不是有序的，进行旋转后只保证了数组的局部是有序的，还能进行二分查找吗？答案是可以的。</p><p>可以发现的是，我们将数组从中间分开成左右两部分是，一定有一部分是有序的。拿示例<code>[4,5,6,7,0,1,2]</code>来看，我们从<code>7</code>这个位置分开成<code>[4,5,6,7]</code>和<code>[0,1,2]</code>两个都有序，从<code>6</code>分开左边<code>[4,5,6]</code>有序。</p><p>这启示我们可以在常规二分查找的时候查看当前<code>mid</code>为分割位置分隔处理的两个部分<code>[l, mid]</code>和<code>[mid+1, r]</code>哪个部分有序，并根据有序的哪个部分确定我们如何改变二分查找的上下界，因为我们能够根据有序的那部分判断<code>target</code>在不在这个部分。</p><ul><li>如果<code>nums[0]&lt;=nums[mid]</code>（<code>0</code>到<code>mid</code>有序）</li><li><ul><li>如果<code>nums[0]&lt;=target&lt;nums[mid]</code>，<code>target</code>在有序部分中间，改变右搜索边界为<code>mid-1</code></li><li>否则，<code>target</code>在无序部分，改变左搜索边界为<code>mid+1</code></li></ul></li><li>否则（<code>mid</code>到<code>nums.length-1</code>有序）</li><li><ul><li>如果<code>nums[mid]&lt;target&lt;=nums[mid]</code>，<code>target</code>在有序部分中间，改变左搜索边界为<code>mid+1</code></li><li>否则<code>target</code>在无序部分，改变右搜索边界为<code>mid-1</code></li></ul></li><li>如果搜索结束<code>l&gt;r</code>，仍没有找到<code>target</code>，返回<code>-1</code></li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0033-1.1rqf9pzpdkww.png" alt="0033-1"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len<span class="token operator">=</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>len<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//特例判断</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>len<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> target<span class="token operator">==</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token number">0</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> right <span class="token operator">=</span> len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>left<span class="token operator">&lt;=</span>right<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>left<span class="token operator">+</span>right<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token operator">==</span>target<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//mid处数值等于target</span>
                <span class="token keyword">return</span> mid<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&lt;=</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//0-mid有序</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&lt;=</span>target <span class="token operator">&amp;&amp;</span> target<span class="token operator">&lt;</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//target在有序部分之间，更新right</span>
                    right<span class="token operator">=</span>mid<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//target在无序部分之间，更新left</span>
                    left<span class="token operator">=</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//mid-(len-1)有序</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token operator">&lt;</span>target <span class="token operator">&amp;&amp;</span> target<span class="token operator">&lt;=</span>nums<span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//target在有序部分之间，更新left</span>
                    left<span class="token operator">=</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//target在无序部分之间，更新right</span>
                    right<span class="token operator">=</span>mid<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//没有找到target</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(log n)，<code>n</code>为<code>nums</code>数组的大小，整个算法的时间复杂度即为二分查找的时间复杂度<code>O(log n)</code>。</li><li>空间复杂度：O(1)，只需要常数级别的空间存放变量。</li></ul><h2 id="0034-在排序数组中查找元素的第一个和最后一个位置"><a href="#0034-在排序数组中查找元素的第一个和最后一个位置" class="headerlink" title="0034 在排序数组中查找元素的第一个和最后一个位置"></a>0034 在排序数组中查找元素的第一个和最后一个位置</h2><p><strong>题目地址</strong>：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/">https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/</a></p><p><strong>方法一</strong>：二分查找</p><p>数组有序，可以采用两次二分查找。</p><p>可以采用两次二分查找，一次查找左边界，一次查找右边界，<strong>注意收缩条件和是否找到目标值的判断</strong>。</p><p>也可以直接二分查找找到目标值，之后往前和往后查找等于目标值的最前和最后索引，返回即可。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//二分查找+边界判断</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">searchRange</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//特例</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token operator">==</span>null <span class="token operator">||</span> nums<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//二分查找</span>
        <span class="token keyword">int</span> left<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> right<span class="token operator">=</span>nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>left<span class="token operator">&lt;=</span>right<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> mid <span class="token operator">=</span> left<span class="token operator">+</span><span class="token punctuation">(</span>right<span class="token operator">-</span>left<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token operator">&lt;</span>target<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                left <span class="token operator">=</span> mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token operator">></span>target<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                right <span class="token operator">=</span> mid<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//找到目标值</span>
                <span class="token keyword">int</span> index1<span class="token operator">=</span>mid<span class="token punctuation">,</span> index2<span class="token operator">=</span>mid<span class="token punctuation">;</span>
                <span class="token keyword">while</span><span class="token punctuation">(</span>index1<span class="token operator">-</span><span class="token number">1</span><span class="token operator">>=</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>index1<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span> index1<span class="token operator">--</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//找到目标值左边界</span>
                <span class="token keyword">while</span><span class="token punctuation">(</span>index2<span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span>nums<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>index2<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span> index2<span class="token operator">++</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//找到目标值右边界</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>index1<span class="token punctuation">,</span> index2<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//两次二分查找找到左右边界</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">searchRange</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token operator">==</span>null <span class="token operator">||</span> nums<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//查找左边界</span>
        <span class="token keyword">int</span> left<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> right<span class="token operator">=</span>nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>left<span class="token operator">&lt;=</span>right<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> mid <span class="token operator">=</span> left<span class="token operator">+</span><span class="token punctuation">(</span>right<span class="token operator">-</span>left<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token operator">&lt;</span>target<span class="token punctuation">)</span> left <span class="token operator">=</span> mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> right <span class="token operator">=</span> mid<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//等于也-1，收缩到左边界</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>left<span class="token operator">==</span>nums<span class="token punctuation">.</span>length <span class="token operator">||</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token operator">!=</span>target<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//表示没找到</span>
        <span class="token keyword">int</span> index1<span class="token operator">=</span>left<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//记录左边界</span>

        <span class="token comment" spellcheck="true">//查找右边界</span>
        left<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        right<span class="token operator">=</span>nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>left<span class="token operator">&lt;=</span>right<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> mid <span class="token operator">=</span> left<span class="token operator">+</span><span class="token punctuation">(</span>right<span class="token operator">-</span>left<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token operator">></span>target<span class="token punctuation">)</span> right <span class="token operator">=</span> mid<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> left <span class="token operator">=</span> mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//等于也+1，收缩到右边界</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//if(right==-1 || nums[right]!=target) return new int[]&amp;#123;-1,-1&amp;#125;;//无需该步判断</span>
        <span class="token keyword">int</span> index2<span class="token operator">=</span>right<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//查找左边界没有提前返回，说明数组中有目标值，右边界一定有效</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>index1<span class="token punctuation">,</span> index2<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(log n)，<code>n</code>为数组元素数。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0039-组合总和"><a href="#0039-组合总和" class="headerlink" title="0039. 组合总和"></a>0039. 组合总和</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/combination-sum/">https://leetcode-cn.com/problems/combination-sum/</a></p><p><strong>方法一</strong>：回溯+剪枝</p><p>思路分析：根据示例<code>1</code>，输入<code>candidates=[2,3,6,7]</code>，<code>target=7</code></p><ul><li>候选数组里有<code>2</code>，如果找到组合总和为<code>7-2=5</code>的所有组合，再在之前加上<code>2</code>，就是<code>7</code>的所有组合；</li><li>同理考虑<code>3</code>，如果找到组合总和为<code>7-3=4</code>的所有组合，再在之前加上<code>3</code>，就是<code>7</code>的所有组合，依次这样找下去。</li></ul><p>基于以上的想法，可以画出如下的树形图。建议大家自己在纸上画出这颗树，<strong>这类问题都需要先画出树形图，然后编码实现</strong>。</p><p>画出树形图</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0039-1.1op4ncdyvu4g.png" alt="0039-1"></p><p>对于组合来说，以上是一种树形图，还可以根据一个数选和不选画树形图（<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/combination-sum/solution/zu-he-zong-he-by-leetcode-solution/">官方题解</a>）。</p><p>说明：</p><ul><li>以<code>target=7</code>为<strong>根节点</strong>，创建一个分支的时候<strong>做减法</strong>；</li><li>每一个箭头表示：从父节点的数值减去边上的数值，得到孩子节点的数值。边的数值就是题目中给出的<code>candidate</code>数组的每个元素的值；</li><li><strong>减到0或者负数的时候停止</strong>，即：节点0和负数节点为叶子结点；</li><li>所有从根节点到节点<code>0</code>的路径（只能从上往下，没有回路）就是题目要找的一个结果。</li></ul><p>这棵树有<code>4</code>个叶子结点的值为<code>0</code>，对应的路径列表是<code>[[2,2,3], [2,3,2], [3,2,2], [7]]</code>，而示例中给的输出只有<code>[[7], [2,2,3]]</code>。即：题目中要求每一个符合要求的解是不计算顺序的。下面分析为什么会重复。</p><p>重复路径产生的原因（<strong>难点</strong>）</p><ul><li>在每一个节点做减法展开分支的时候，由于题目中说<strong>每一个元素可以重复使用</strong>，我们<strong>考虑了所有的候选数</strong>，因此出现了重复的列表。</li></ul><p>怎么去除重复呢？<strong>遇到这一类相同元素不计算顺序的问题，我们在搜索时按照某种顺序搜索</strong>。此题具体做法</p><ul><li>每一次搜索的时候设置下一轮搜索的起点<code>begin</code>，见下图。即：从每一层的第<code>2</code>个节点开始，都不能搜索产生同一层节点已经使用过的<code>candidate</code>元素。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0039-2.3dg42lrkmkc0.png" alt="0039-2"></p><hr><p>剪枝提速</p><ul><li>根据上面画树形图的经验，如果<code>target</code>减去一个数得到负数，那么减去一个更大的树仍然是负数，同样搜索不到结果。基于这个想法，我们可以对输入数组进行排序，添加相关逻辑达到进一步剪枝的目的。</li><li>排序是为了提高搜索速度，对于解决这个问题来说非必要。<strong>但是搜索问题一般复杂度较高，能剪枝就尽量剪枝</strong>。</li></ul><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//未剪枝代码</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> <span class="token function">combinationSum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> candidates<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//结果集合</span>
        List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//拼接路径</span>
        List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> combine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//深度优先搜索</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>candidates<span class="token punctuation">,</span> target<span class="token punctuation">,</span> res<span class="token punctuation">,</span> combine<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回结果集合</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
      * @param candidates 候选数组
      * @param target     搜索目标值
      * @param res        结果集合
      * @param combine    从根节点到叶子结点的路径，是一个列表
      * @param begin      搜索起点
    **/</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> candidates<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> combine<span class="token punctuation">,</span> <span class="token keyword">int</span> begin<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//搜索目标为负数和0时不再产生新的孩子节点</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>target <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>target <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>combine<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//res.add(combine);为什么不行？combine是拼接路径，随着搜索变化</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        
        <span class="token comment" spellcheck="true">//重点理解从begin开始搜索的语意</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>begin<span class="token punctuation">;</span> i<span class="token operator">&lt;</span>candidates<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//添加当前搜索值</span>
            combine<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//更新查找目标，下一轮搜索起点仍然是i，因为元素可以重复使用，这里容易出错</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>candidates<span class="token punctuation">,</span> target<span class="token operator">-</span>candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> res<span class="token punctuation">,</span> combine<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//状态重置</span>
            combine<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>combine<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//剪枝代码，排序是前提！！！</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> <span class="token function">combinationSum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> candidates<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//结果集合</span>
        List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//拼接路径</span>
        List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> combine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//排序是剪枝的前提！！！</span>
        Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>candidates<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//深度优先搜索</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>candidates<span class="token punctuation">,</span> target<span class="token punctuation">,</span> res<span class="token punctuation">,</span> combine<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回结果集合</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
      * @param candidates 候选数组
      * @param target     搜索目标值
      * @param res        结果集合
      * @param combine    从根节点到叶子结点的路径，是一个列表
      * @param begin      搜索起点
    **/</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> candidates<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> combine<span class="token punctuation">,</span> <span class="token keyword">int</span> begin<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//搜索目标为负数的情况被剪枝</span>
        <span class="token comment" spellcheck="true">//搜索目标为0时不再产生新的孩子节点，作为递归终止条件</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>target <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>combine<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//res.add(combine);为什么不行？combine是拼接路径，随着搜索变化</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        
        <span class="token comment" spellcheck="true">//重点理解从begin开始搜索的语意</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>begin<span class="token punctuation">;</span> i<span class="token operator">&lt;</span>candidates<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//重点理解这里剪枝，前提是候选数组已经有序</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token operator">-</span>candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//添加当前搜索值</span>
            combine<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//更新查找目标，下一轮搜索起点仍然是i，因为元素可以重复使用，这里容易出错</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>candidates<span class="token punctuation">,</span> target<span class="token operator">-</span>candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> res<span class="token punctuation">,</span> combine<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//状态重置</span>
            combine<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>combine<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><h2 id="0040-组合总和-II"><a href="#0040-组合总和-II" class="headerlink" title="0040. 组合总和 II"></a>0040. 组合总和 II</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/combination-sum-ii/">https://leetcode-cn.com/problems/combination-sum-ii/</a></p><p><strong>方法一</strong>：回溯+剪枝</p><p>解题思路：<strong>按顺序搜索</strong>，设置合理的变量，在搜索中判断<strong>是否会出现重复集结果</strong>。重点理解对<strong>输入数组排序的作用</strong>和<strong>大剪枝、小剪枝的意思</strong>。</p><p>与<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/combination-sum/">0039组合之和 Ι</a>之间唯一差别：<code>candidates</code>中的数字在每个组合中只能使用一次。相同点是：相同的数字列表的不同排列视为一个结果。</p><p>如何<strong>去掉重复结合（重点）</strong>，两种方案：</p><ul><li>使用哈希表天然去重功能，但是编码相对复杂；</li><li>使用<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/combination-sum/">0039组合之和 Ι</a>和<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/3sum/">0015三数之和</a>类似的思路：<strong>不重复就需要按顺序搜索</strong>，在搜索的过程中检测分支是否会出现重复结果。注意：这里的顺序不仅仅指的是数组<code>candidates</code>有序，还指按照一定的顺序搜索结果。</li><li><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0040-2.xkuwn7qr21s.png" alt="0040-2"></li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0040-1.3jutbb67yc40.png" alt="0040-1"></p><p>有0039题我们知道，<code>candidates</code>有序，是深度优先遍历过程中实现剪枝的前提。</p><p>将数组先排序的思路来源于这个问题：去掉一个数组中重复的元素。<strong>很容易想到的方案是</strong>：先对数组升序排序，重复的元素一定不是排好序以后相同的连续数组区域的第一个元素。也就是说，剪枝发生在：<strong>同一层数值相同的第2、3…个节点，因为数值相同的第1个节点已经搜索处了包含这个数值得全部结果</strong>，同一层的其他节点，候选数的个数更少，搜索处的结果一定不会比第一个节点更多，并且是第一个节点的子集。（很难理解，结合代码和具体例子，画图理解）。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> <span class="token function">combinationSum2</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> candidates<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//结果集</span>
        List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//拼接路径</span>
        List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//排序，是剪枝的前提</span>
        Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>candidates<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//调用回溯</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>candidates<span class="token punctuation">,</span> target<span class="token punctuation">,</span> res<span class="token punctuation">,</span> path<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * @param candidates 候选数组
     * @param begin      从候选数组的 begin 位置开始搜索
     * @param target     表示剩余目标数值，这个值一开始等于题目target
     * @param path       从根结点到叶子结点的路径
     * @param res
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> candidates<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> path<span class="token punctuation">,</span> <span class="token keyword">int</span> begin<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//递归结束，路径加入结果集合</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>begin<span class="token punctuation">;</span> i<span class="token operator">&lt;</span>candidates<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//大剪枝：减去 candidates[i] 小于 0，减去后面的 candidates[i + 1]、candidates[i + 2] 肯定也小于 0，因此用 break</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token operator">-</span>candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//小剪枝：同一层相同数值的结点，从第 2 个开始，候选数更少，结果一定发生重复，因此跳过，用 continue</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">></span>begin <span class="token operator">&amp;&amp;</span> candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span>candidates<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">// 调试语句 1</span>
            <span class="token comment" spellcheck="true">// System.out.println("递归之前 => " + path + "，剩余 = " + (target - candidates[i]));</span>
            path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">// 因为元素不可以重复使用，这里递归传递下去的是 i + 1 而不是 i</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>candidates<span class="token punctuation">,</span> target<span class="token operator">-</span>candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> res<span class="token punctuation">,</span> path<span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">// 调试语句 2</span>
            <span class="token comment" spellcheck="true">// System.out.println("递归之后 => " + path + "，剩余 = " + (target - candidates[i]));</span>
            path<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><h2 id="0046-全排列"><a href="#0046-全排列" class="headerlink" title="0046. 全排列"></a>0046. 全排列</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/permutations/">https://leetcode-cn.com/problems/permutations/</a></p><p><strong>方法一</strong>：回溯</p><p>大佬文章：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/permutations/solution/hui-su-suan-fa-python-dai-ma-java-dai-ma-by-liweiw/">回溯算法入门级详解 + 练习</a></p><p>从全排列问题开始<strong>理解回溯算法</strong></p><p>我们尝试在纸上写<code>3</code>个数字、<code>4</code>个数字、<code>5</code>个数字的全排列，相信不难找到这样的方法。以数组<code>[1,2,3]</code>的全排列为例。</p><ul><li>先写以<code>1</code>开头的全排列，<code>[1,2,3], [1,3,2]</code>，即<code>1</code>+<code>[2,3]</code>的全排列（注意：<strong>递归结构体现在这里</strong>）；</li><li>再写以<code>2</code>开头的全排列，<code>[2,1,3], [2,3,1]</code>，即<code>2</code>+<code>[1,3]</code>的全排列；</li><li>最后写以<code>3</code>开头的全排列，<code>[3,2,1], [3,1,2]</code>，即<code>3</code>+<code>[1,2]</code>的全排列。</li></ul><p>「总结搜索的方法」：按照顺序枚举每一个位可能出现的情况，已经选择的数字在当前要选择的数字中不能出现。按照这种策略搜索就能做到<strong>不重不漏</strong>。这样的思路，可以用一个树形结构表示。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0046-1.441dop72m1w0.png" alt="0046-1"></p><p>「说明」：</p><ul><li><strong>每一个节点表示了求解全排列问题的不同阶段</strong>，这些阶段通过变量的「不同的值」体现，这些变量的不同的值，称之为「状态」；</li><li>使用深度优先遍历有「回头」的过程，在「回头」以后，<strong>状态变量需要设置成为和先前一样</strong>，因此在回到上一层节点的过程中，需要撤销上一次的选择，这个操作称之位「状态重置」；</li><li>深度优先遍历，<strong>借助系统栈空间，保存所需要的状态遍历</strong>，在编码中只需要注意遍历到相应的节点的时候，状态遍历的值是正确的，<strong>具体做法是</strong>：往下走一层的时候，<code>path</code>变量在尾部追加，而往回走的时候，需要撤销上一次的选择，也是在尾部操作，因此<code>path</code>变量是一个栈；</li><li>深度优先遍历通过「回溯」操作，实现了全局使用一份状态遍历的效果。</li></ul><p>「<strong>设计状态变量</strong>」</p><ul><li>首先这棵树除了根节点和叶子结点以外，每一个节点做的事情其实是一样的，即：在已经选择了一些数的前提下，在剩下的还没有选择的数中，依次选择一个数，这显然是一个<strong>递归</strong>结构；</li><li>递归的终止条件是：一个排列中的数字已经选够了，因为我们需要一个变量来表示当前程序递归到第几层，我们把这个变量叫做<code>depth</code>，其实就是拼接路径<code>path</code>集合的大小。</li><li>布尔数组<code>isVisited</code>，初始化的时候都为<code>false</code>表示这些数都还没有被选择，当我们选定一个数的时候，就将这个数组的相应位置设置为<code>true</code>，这样在考虑下一个位置的时候，就能够以<code>O(1)</code>的时间复杂度判断这个数是否被选择过，这是一种「以空间换时间」的思想。或者采用<code>path.contains(nums[i])</code>判断是否访问过，在数组元素本身不重复时可用，但时间复杂度<code>O(n)</code>。</li></ul><p>这些变量称为「状态变量」，它们表示了在求解一个问题的时候所处的阶段。需要根据问题的场景设计合适的状态变量。</p><p>变量<code>path</code>所指向的列表<strong>在深度优先遍历的过程中只有一份</strong>，深度优先遍历完成以后，回到根节点，称为空列表。</p><p>在<code>Java</code>中，参数传递是<strong>值传递</strong>，对象类型变量在传参过程中，<strong>复制的是变量的地址</strong>。这些地址被添加到<code>res</code>变量，<strong>实际上指向的是同一块内存地址</strong>，因此我们直接往<code>res</code>添加<code>path</code>会看到<code>6</code>个空列表对象。解决办法很简单，在添加时做一次拷贝即可。</p><pre class="language-java"><code class="language-java"><span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//res.add(path);//值传递，添加6个复制地址，指向同一个内存，最后为空列表</span>
    res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//解决，拷贝一次即可</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p>到这，你就能写出该题的代码了。接下来我们<strong>深入理解下回溯过程</strong>。</p><p>从 <code>[1, 2, 3]</code> 到 <code>[1, 3, 2]</code>，深度优先遍历是这样做的，从 <code>[1, 2, 3]</code> 回到<code>[1, 2]</code>的时候，需要撤销刚刚已经选择的数<code>3</code>，因为在这一层只有一个数 <code>3</code> 我们已经尝试过了，因此程序回到上一层，需要撤销对<code>2</code> 的选择，好让后面的程序知道，选择 <code>3</code>了以后还能够选择<code>2</code>。</p><p>执行深度优先遍历，从较深层的结点返回到较浅层结点的时候，需要做「状态重置」，即「回到过去」、「恢复现场」。你可以通过打印递归前后变化观察。</p><p>在一些字符串的搜索问题中，<strong>有时不需要回溯</strong>的原因是这样的：字符串变量在拼接的过程中会产生新的对象。</p><p>为什么「不是广度优先遍历」</p><ul><li>首先是正确性，只有遍历状态空间，才能得到所有符合条件的解，这一点 <code>BFS</code>和 <code>DFS</code>其实都可以；</li><li><strong>在深度优先遍历的时候</strong>，<strong>不同状态之间的切换很容易</strong> ，可以再看一下上面有很多箭头的那张图，每两个状态之间的差别只有 <code>1</code> 处，因此回退非常方便，这样全局才能使用一份状态变量完成搜索；</li><li>如果使用广度优先遍历，从浅层转到深层，状态的变化就很大，此时我们不得不在每一个状态都新建变量去保存它，从性能来说是不划算的；</li><li>如果使用广度优先遍历就得使用队列，然后编写结点类。队列中需要存储每一步的状态信息，需要存储的数据很大，真正能用到的很少 ；</li><li>使用深度优先遍历，直接使用了系统栈，系统栈帮助我们保存了每一个结点的状态信息。我们不用编写结点类，不必手动编写栈完成深度优先遍历。</li></ul><p>「<strong>不回溯可不可以</strong>」</p><p>可以。搜索问题的状态空间一般很大，如果每一个状态都去创建新的变量，时间复杂度是 <code>O(n)</code>。在候选数比较多的时候，在非叶子结点上创建新的状态变量的性能消耗就很严重。</p><p>就本题而言，只需要叶子结点的那个状态，在叶子结点执行拷贝，时间复杂度是 <code>O(n)</code>。路径变量在深度优先遍历的时候，结点之间的转换只需要 <code>O(1)</code>。</p><p>最后，由于回溯算法的时间复杂度很高，因此在遍历的时候，如果能够提前知道这一条分支不能搜索到满意的结果，就可以提前结束，这一步操作称为 <strong>剪枝</strong>。</p><p><strong>剪枝</strong></p><ul><li>回溯算法会应用「剪枝」技巧达到以加快搜索速度。<strong>有些时候，需要做一些预处理工作（例如排序）才能达到剪枝的目的</strong>。预处理工作虽然也消耗时间，但能够剪枝节约的时间更多；</li><li>提示：剪枝是一种技巧，通常需要根据不同问题场景采用不同的剪枝策略，需要在做题的过程中不断总结。</li><li>由于回溯问题本身时间复杂度就很高，所以能用空间换时间就尽量使用空间。</li></ul><p><strong>总结</strong></p><p>做题的时候，建议 <strong>先画树形图</strong> ，<strong>画图能帮助我们想清楚递归结构，想清楚如何剪枝</strong>。拿题目中的示例，想一想人类是怎么做的，一般这样下来，这棵递归树都不难画出。</p><p>在画图的过程中思考清楚：</p><ul><li>分支如何产生；</li><li>题目需要的解在哪里？是在叶子结点、还是在非叶子结点、还是在从根结点到叶子结点的路径？</li><li>哪些搜索会产生不需要的解的？例如：产生重复是什么原因，如果在浅层就知道这个分支不能产生需要的结果，应该提前剪枝，剪枝的条件是什么，代码怎么写？</li></ul><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> <span class="token function">permute</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//结果集</span>
        List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//拼接路径</span>
        List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//是否访问过</span>
        <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> isVisited <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">boolean</span><span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//深度优先搜索</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> res<span class="token punctuation">,</span> path<span class="token punctuation">,</span> isVisited<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回结果</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> path<span class="token punctuation">,</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> isVisited<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//递归结束条件，拼接路径长度和数组长度相等</span>
            res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>isVisited<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//剪枝，已经访问过，继续下一个元素</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            isVisited<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">// System.out.println("递归前"+path);</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> res<span class="token punctuation">,</span> path<span class="token punctuation">,</span> isVisited<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//在得到第一个结果[1,2,3]之后，回退2次到[1]</span>
            <span class="token comment" spellcheck="true">//首先，下一次的dfs的return回退一次，回退之后，i=2，for循环执行完毕，当前dfs又回退一次，由此到[1]。按步骤Debug理解！！！</span>
            path<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            isVisited<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">// System.out.println("递归后"+path);</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n×n!)，回溯算法由于其遍历的特点，时间复杂度一般比较高，有些问题分析起来很复杂。一些回溯算法解决的问题，剪枝剪得好的话，复杂度会降的很低，因此分析最坏时间复杂度的意义也不是很大，但还是视情况而定。递归调用次数O(n!)，将当前答案复制到答案集合中O(n)，两者相乘O(n×n!)。</li><li>空间复杂度：O(n)，其中 n 为序列的长度。除答案数组以外，递归函数在递归过程中需要为每一层递归函数分配栈空间，所以这里需要额外的空间且该空间取决于递归的深度，这里可知递归调用深度为 O(n)。</li></ul><h2 id="0047-全排列-II"><a href="#0047-全排列-II" class="headerlink" title="0047. 全排列 II"></a>0047. 全排列 II</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/permutations-ii/">https://leetcode-cn.com/problems/permutations-ii/</a></p><p><strong>方法一</strong>：回溯+剪枝</p><p>这题与<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/permutations/">0046全排列</a>不同，增加了序列中的元素可重复这一条件，但要求：返回的结果又不能有重复元素。</p><p>思路：在遍历的过程中，一边遍历，一遍检测，<strong>在一定会产生重复结果集的地方剪枝</strong>。</p><p>我们可以在搜索之前对候选数组排序，一旦发现某个分支搜索下去可能搜索到重复的元素就停止搜索，这样结果集中不会包含重复列表。</p><p>画出树形结构如下：重点想象深度优先遍历在这棵树上执行的过程，哪些地方遍历下去一定会产生重复，这些地方的状态的特点是什么？<br>对比图中标注 ① 和 ② 的地方。相同点是：这一次搜索的起点和上一次搜索的起点一样。不同点是：</p><ul><li>标注 ① 的地方，<strong>搜索的数和上一次一样，但是上一个<code>1</code>刚刚被撤销</strong>，正是因为刚刚被撤销，下面的搜索中还会使用到，因此会产生重复，<strong>剪掉的就应该是这样的分支</strong>。</li><li>标注 ② 的地方，搜索的数和上一次一样，但是上一次的<code>1</code>还在使用中，<strong>不用剪枝</strong>。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0047-1.6fc771ocfu00.png" alt="0047-1"></p><p>代码方面，<strong>只需要加上一段剪枝代码</strong>：</p><pre class="language-java"><code class="language-java"><span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">></span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span>nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isVisited<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
</code></pre><p>这段代码就能检测到标注为 ① 的两处节点，跳过它们，剪枝。注意：这里<code>isVisited[i-1]</code>不加<code>！</code>，测试也能通过，可以想一下为什么。建议对比这几个实验：</p><ul><li>干脆不写<code>!isVisited[i-1]</code>，结果会怎样？</li><li>写<code>isVisited[i-1]</code>结果是什么？给出结论：<code>!isVisited[i-1]</code>剪枝更彻底。</li></ul><p><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/permutations-ii/solution/hui-su-suan-fa-python-dai-ma-java-dai-ma-by-liwe-2/">分析原因</a></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> <span class="token function">permuteUnique</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//结果集合</span>
        List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//拼接路径</span>
        List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//排序、剪枝的前提</span>
        Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//是否访问过</span>
        <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> isVisited <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">boolean</span><span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//调用回溯</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> res<span class="token punctuation">,</span> path<span class="token punctuation">,</span> isVisited<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回结果</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> path<span class="token punctuation">,</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> isVisited<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//递归结束条件，拼接路径长度和数组长度相等</span>
            res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//剪枝，已访问过，进入下一元素递归</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>isVisited<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">// 剪枝条件：i > 0 是为了保证 nums[i - 1] 有意义</span>
            <span class="token comment" spellcheck="true">// 写 !used[i - 1] 是因为 nums[i - 1] 在深度优先遍历的过程中刚刚被撤销选择</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">></span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span>nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isVisited<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            
            path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            isVisited<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">// System.out.println("递归前"+path);</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> res<span class="token punctuation">,</span> path<span class="token punctuation">,</span> isVisited<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//在得到第一个结果[1,1,2]之后，回退2次到[1]</span>
            <span class="token comment" spellcheck="true">//首先，下一次的dfs的return回退一次，回退之后，i=2，for循环执行完毕，当前dfs又回退一次，由此到[1]。按步骤Debug理解！！！</span>
            path<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            isVisited<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">// System.out.println("递归后"+path);</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n×n!)，递归调用次数O(n!)，将当前答案复制到答案集合中O(n)，两者相乘O(n×n!)。</li><li>空间复杂度：O(n)，其中 n 为序列的长度。除答案数组以外，递归函数在递归过程中需要为每一层递归函数分配栈空间，所以这里需要额外的空间且该空间取决于递归的深度，这里可知递归调用深度为 O(n)。</li></ul><h2 id="0048-旋转图像"><a href="#0048-旋转图像" class="headerlink" title="0048. 旋转图像"></a>0048. 旋转图像</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/rotate-image/">https://leetcode-cn.com/problems/rotate-image/</a></p><p><strong>方法一</strong>：原地旋转</p><p>题目中说了是顺时针旋转<code>90</code>度，通过旋转可以发现一个规律：只需要从外到内一圈一圈的旋转即可。</p><ul><li>因为每圈交换处理了两行，交换圈数为维度的一半，不断缩小旋转圈子；</li><li>内层循环完成一圈旋转，每次交换四个变量。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0048-1.29zkmiq5n44k.png" alt="0048-1"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> matrix<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len<span class="token operator">=</span>matrix<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">int</span> temp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//辅助旋转</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>len<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//交换圈数为维度一半</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span>i<span class="token punctuation">;</span> j<span class="token operator">&lt;</span>len<span class="token operator">-</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//j变化，交换一圈</span>
                temp<span class="token operator">=</span>matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//以第一次循环为例，保存左上角</span>
                matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//左上角=左下角</span>
                matrix<span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//左下角=右下角</span>
                matrix<span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//右下角=左上角</span>
                matrix<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>i<span class="token punctuation">]</span><span class="token operator">=</span>temp<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//右上角=左上角</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n<sup>2</sup>)。</li><li>空间复杂度：O(1)。</li></ul><p><strong>方法二</strong>：用翻转代替旋转</p><p>我们还可以另辟蹊径，用翻转操作代替旋转操作。</p><p>看一个示例，首先通过水平轴翻转，然后根据主对角线翻转得到结果：</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0048-2.3qxfx362jg20.png" alt="0048-2"></p><p>就得到了答案。为什么呢？对于水平翻转而言，我们只需要枚举矩阵上半部分的元素，和下半部分的元素进行交互，即：<br>$$<br>\operatorname{matrix}[\mathrm{row}][\mathrm{col}] \stackrel{\text { 水平轴再转 }}{\longrightarrow} \operatorname{matrix}[n-\text { row }-1][\mathrm{col}]<br>$$<br>对于主对角线翻转而言，我们只需要枚举对角线左侧的元素，和右侧的元素进行交换，即：<br>$$<br>\operatorname{matrix}[\text { row }][\mathrm{col}] \stackrel{\text { 主对角线翻转 }}{\longrightarrow} \operatorname{matrix}[\operatorname{col}][\text { row }]<br>$$<br>将它们联立即可得到：<br>$$<br>\begin{aligned}<br>\operatorname{matrix}[\mathrm{row}][\operatorname{col}] &amp; \stackrel{\text { 水平轴翻转 }}{\longrightarrow} \operatorname{matrix}[n-\text { row }-1][\mathrm{col}] \<br>&amp; \stackrel{\text { 主对角线翻转 }}{\longrightarrow} \operatorname{matrix}[\operatorname{col}][n-\text { row }-1]<br>\end{aligned}<br>$$<br><strong>和新建一个数组的关键等式等价</strong><br>$$<br>\operatorname{matrix}[\text { row }][\text { col }]=\operatorname{matrixnew}[\operatorname{col}][n-\text { row }-1]<br>$$<br><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> matrix<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len<span class="token operator">=</span>matrix<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">int</span> temp<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//水平翻转</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>len<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                temp <span class="token operator">=</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span>len<span class="token operator">-</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                matrix<span class="token punctuation">[</span>len<span class="token operator">-</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//对角线翻转</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span>i<span class="token punctuation">;</span> j<span class="token operator">&lt;</span>len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                temp <span class="token operator">=</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                matrix<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n<sup>2</sup>)。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0049-字母异位词分组"><a href="#0049-字母异位词分组" class="headerlink" title="0049. 字母异位词分组"></a>0049. 字母异位词分组</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/group-anagrams/">https://leetcode-cn.com/problems/group-anagrams/</a></p><p><strong>方法一</strong>：排序</p><p>由于互为字母异位词的两个字符串包含的字母相同，因此对两个字符串分别进行排序后得到的额字符串一定是相同的，故可以将排序之后的字符串作为哈希表的键，排序后相同的字符串集合作为哈希表的值。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//排序</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>String<span class="token operator">>></span> <span class="token function">groupAnagrams</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> strs<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//哈希键值对</span>
        Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>String<span class="token operator">>></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历字符串数组</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>String str <span class="token operator">:</span> strs<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//转为char数组并排序</span>
            <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chs <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>chs<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//根据排序后的字符串最为键，查找字母异位词集合，把当前遍历字符串放入对应集合</span>
            List<span class="token operator">&lt;</span>String<span class="token operator">></span> list <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>chs<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//再把修改后的键值对放入map集合中</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>chs<span class="token punctuation">)</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//获取所有字母异位词集合，用它新建一个集合返回</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(nklog k)，n是strs中字符串数量，k是strs中字符串的最大长度。遍历strs和排序的时间复杂度。</li><li>空间复杂度：O(nk)，需要哈希表存储全部字符串。</li></ul><p><strong>方法二</strong>：计数</p><p>由于互为字母异位词的两个字符串包含的字母相同，因此两个字符串中的相同字母出现的次数一定是相同的，<strong>故可以将每个字母出现的次数使用字符串表示，作为哈希表的键</strong>。</p><p>注意：<strong>字母出现次数要做一定变化表示，将出现次数大于0的字母和出现次数按顺序拼接成字符串，作为哈希表的键。</strong>直接使用字母出现次数拼接，当某个字母出现次数大于9时，直接拼接字符会影响其它字母的表示。</p><p>由于字符串子包含小写字母，因此对于每个字符串，可使用长度为26的数组记录每个字母出现的次数，需要注意的是，在使用数组作为哈希表的键时，不同语言的支持成都不同，因此不同语言的实现方式也不同。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//计数</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>String<span class="token operator">>></span> <span class="token function">groupAnagrams</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> strs<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//哈希键值对</span>
        Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>String<span class="token operator">>></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历字符串数组</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>String str <span class="token operator">:</span> strs<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//统计每个字符出现次数</span>
            <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> counts <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>str<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                counts<span class="token punctuation">[</span>str<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">-</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
             <span class="token comment" spellcheck="true">// 将每个出现次数大于 0 的字母和出现次数按顺序拼接成字符串，作为哈希表的键</span>
            StringBuffer sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">26</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>counts<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token string">'a'</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>counts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//根据统计字符串，放入当前遍历字符串到对应集合，最后放入映射表</span>
            List<span class="token operator">&lt;</span>String<span class="token operator">></span> list <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n(k+|∑|))，其中<code>n</code>是<code>strs</code>中的字符串的数量，<code>k</code>是<code>strs</code>中的字符串的的最大长度，<code>Σ</code>是字符集<code>26</code>。</li><li>空间复杂度：O(n(k+|∑|))，需要用哈希表存储全部字符串，而记录每个字符串中每个字母出现次数的数组需要的空间为 <code>O(∣Σ∣)</code>，在渐进意义下小于 <code>O(n(k+∣Σ∣))</code>，可以忽略不计。</li></ul><h2 id="0050-Pow-x-n"><a href="#0050-Pow-x-n" class="headerlink" title="0050. Pow(x, n)"></a>0050. Pow(x, n)</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/powx-n/description/">https://leetcode-cn.com/problems/powx-n/description/</a></p><p><strong>方法一</strong>：快速幂+递归</p><p>当指数 <code>n</code>为负数时，我们可以计算x<sup>-n</sup>，再取倒数得到结果。因此我们只需要考虑 <code>n</code>为自然数的情况。</p><p>「快速幂算法」的本质是分治算法。<strong>举个例子</strong>，如果我们要计算x<sup>64</sup>，我们可以按照：</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0050-1.69d93u4ec4w0.png" alt="0050-1"></p><p>的顺序，从<code>x</code>开始，每次直接把上一次的结果进行平方，计算<code>6</code>次就可以得到x<sup>64</sup>的值，而不需要对<code>x</code>乘<code>63</code>次<code>x</code>。</p><p>再举个例子，如果我们要计算x<sup>77</sup>，我们可以按照：</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0050-2.6wfw8b3zolo0.png" alt="0050-2"></p><p>的顺序，某些步骤直接将上一次结果进行平方，而又有些步骤把上次结果平方后，还要额外乘一个<code>x</code>。</p><p>直接从左到右进行推导看上去很困难，因为在每一步中，我们不知道在将上一次结果平方之后，还需不需要额外乘<code>x</code>，<strong>但如果我们从右往左看，分治的思想就十分明显了</strong>：</p><ul><li>当我们要计算x<sup>n</sup>时，我们可以先递归地计算出y=x<sup>⌊n/2⌋</sup>，<code>⌊n/2⌋</code>表示向下取整；</li><li>根据递归结算的结果，如果<code>n</code>为偶数，那么x<sup>n</sup>=y<sup>2</sup>，如果<code>n</code>为奇数，那么x<sup>n</sup>=y<sup>2</sup>×2；</li><li>递归的边界为<code>n=0</code>，任意数的<code>0</code>次方均为<code>1</code>。</li></ul><p>由于每次递归都使得指数减少一半，因此递归的层数为<code>O(log n)</code>，算法可以在很快的时间内得到结果。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">myPow</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> N <span class="token operator">=</span> n<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//防止负数-2^31转为正数计算是溢出</span>
        <span class="token keyword">return</span> N<span class="token operator">>=</span><span class="token number">0</span> <span class="token operator">?</span> <span class="token function">qucMul</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> N<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token operator">/</span><span class="token function">qucMul</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token operator">-</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> <span class="token function">qucMul</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">long</span> N<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>N<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//递归终止条件</span>
            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> y <span class="token operator">=</span> <span class="token function">qucMul</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> N<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> N<span class="token operator">%</span><span class="token number">2</span><span class="token operator">==</span><span class="token number">0</span> <span class="token operator">?</span> y<span class="token operator">*</span>y <span class="token operator">:</span> y<span class="token operator">*</span>y<span class="token operator">*</span>x<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//x^N为前一快速幂结果的平方，根据N的奇偶判断是否再乘以x</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(log n)，即为递归的层数。</li><li>空间复杂度：O(log n)，即为递归的层数。这是由于递归的函数调用会使用栈空间。</li></ul><p><strong>方法二</strong>：快速幂+位运算</p><p><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/powx-n/solution/50-powx-n-kuai-su-mi-qing-xi-tu-jie-by-jyd/">参考解题思路</a>：这里有数学推导</p><p>直观理解，举个例子，x<sup>10</sup>，10的二进制是1010，然后用2进制转10进制的方法把它展成2的幂次和。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0050-3.3eql67txu6s0.jpg" alt="0050-3"></p><p>因此我们的算法就是：</p><ul><li>边界条件当<code>x=0</code>时，直接返回<code>1</code>（询问边界定义是否为<code>1</code>）；</li><li>初始化<code>res=1</code>；</li><li>当<code>n&lt;0</code>时：把问题转化至<code>n≥0</code>的范围内，即执行<code>x=1/x</code>，<code>n=-n</code>；</li><li>循环计算，当<code>n=0</code>时跳出</li><li><ul><li>当<code>n&amp;1=1</code>时：将当前<code>x</code>乘入<code>res</code>（即<code>res *= x</code> ）；</li><li>执行x = x<sup>2</sup>，（即 <code>x *= x</code>）；</li><li>执行 <code>n</code> 右移一位（即<code>n &gt;&gt;= 1</code>）。</li></ul></li><li>返回<code>res</code>。</li></ul><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//快速幂+位运算</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">myPow</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//边界条件</span>
        <span class="token keyword">long</span> N<span class="token operator">=</span>n<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//防止转为正数运算溢出-2^31</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>N<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            x <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span>x<span class="token punctuation">;</span>
            N<span class="token operator">=</span><span class="token operator">-</span>N<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> res<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//x^10 = x^(1010)二进制，二进制转十进制，变成相乘</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>N<span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>N<span class="token operator">&amp;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//N二进制末尾位为1，结果乘以当前x</span>
                res <span class="token operator">*=</span> x<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            x <span class="token operator">*=</span> x<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//x平方</span>
            N <span class="token operator">>>=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//N左移一位</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(log n)，二分的时间复杂度为对数级别。</li><li>空间复杂度：O(1)，res，b等变量占用常数大小的额外空间。</li></ul><h2 id="055-跳跃游戏"><a href="#055-跳跃游戏" class="headerlink" title="055. 跳跃游戏"></a>055. 跳跃游戏</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/jump-game/">https://leetcode-cn.com/problems/jump-game/</a></p><p><strong>方法一</strong>：贪心</p><p>这道题是一道典型的<code>贪心</code>类型题目。思路就是用一个变量记录当前能够到达的最大索引，并逐个遍历数组中的元素去更新这个索引，遍历完成判断这个索引是否大于<code>数组长度-1</code>即可。</p><p>以题目中的示例一<code>[2,3,1,1,4]</code>为例</p><ul><li>我们一开始在位置<code>0</code>，可以跳跃的最大长度为<code>2</code>，因此最远可以到达的位置被更新为<code>2</code>；</li><li>我们遍历到位置<code>1</code>，由于<code>1≤2</code>，因此位置<code>1</code>可达。我们用1加上它可以跳跃的最大长度<code>3</code>，将最远可以到达的位置更新为<code>4</code>。由于<code>4</code>大于等于最后一个位置<code>4</code>，因此我们直接返回<code>True</code>。</li></ul><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">canJump</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> n<span class="token operator">=</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">int</span> rightMost<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//可以到达的最右端</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">&lt;=</span>rightMost<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前i小于等于可以到达最右端，更新righMost</span>
                rightMost <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>rightMost<span class="token punctuation">,</span> i<span class="token operator">+</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//贪心，当前i能到达最右端</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>rightMost <span class="token operator">>=</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//rightMost可以到达最右端，直接返回true</span>
                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，<code>n</code>为数组的大小，只需要访问<code>nums</code>数组一遍，共<code>n</code>个位置。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0056-合并区间"><a href="#0056-合并区间" class="headerlink" title="0056. 合并区间"></a>0056. 合并区间</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/merge-intervals/">https://leetcode-cn.com/problems/merge-intervals/</a></p><p><strong>方法一</strong>：排序</p><p>思路：</p><p>如果我们按照区间的左端点排序，那么在排完序的列表中，可以合并的区间一定是连续的。如下图所示，标记为蓝色、黄色和绿色的区间分别可以合并成一个大区间，它们在排完序的列表中是连续的。（正确性证明见<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/merge-intervals/solution/he-bing-qu-jian-by-leetcode-solution/">官方题解</a>）</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0056-1.2rderjp4uxg0.png" alt="0056-1"></p><p>算法</p><p>我们用数组<code>merged</code>存储最终的答案。</p><p>首先，我们将列表中的区间按照左端点升序排序。然后我们将第一个区间加入<code>merged</code>数组中，并按顺序依次考虑之后的每个区间：</p><ul><li>如果当前区间的左端点在数组<code>merged</code>中最后一个区间的右端点之后，那么它们不会重合，我们可以直接将这个区间加入数组<code>merged</code>的末尾。比如图中<code>(2,5),(10,11)</code>。</li><li>否则，它们重合，我们需要用当前区间的右端点更新数组<code>merged</code>，将其置为二者的较大值。</li></ul><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> intervals<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>intervals<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//按照区间首端点排序</span>
        <span class="token comment" spellcheck="true">// Arrays.sort(intervals, new Comparator&lt;int[]>()&amp;#123;//匿名内部类</span>
        <span class="token comment" spellcheck="true">//     public int compare(int[] interval1, int[] interval2)&amp;#123;</span>
        <span class="token comment" spellcheck="true">//         return interval1[0]-interval2[0];</span>
        <span class="token comment" spellcheck="true">//     &amp;#125;</span>
        <span class="token comment" spellcheck="true">// &amp;#125;);</span>
        Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>intervals<span class="token punctuation">,</span> <span class="token punctuation">(</span>val1<span class="token punctuation">,</span> val2<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span>val1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span>val2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//Lambda表达式，省略类型、return、&amp;#123;&amp;#125;</span>
        List<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span> merged <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>intervals<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> L<span class="token operator">=</span>intervals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> R<span class="token operator">=</span>intervals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>merged<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span> <span class="token operator">||</span> merged<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>merged<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> L<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//不重合</span>
                merged<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>L<span class="token punctuation">,</span> R<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//重合，取更新右端值，取R和旧区间右端点的最值</span>
                merged<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>merged<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>merged<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>merged<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> R<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> merged<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>merged<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//不知道ArrayList的toArray方法，用循环来做</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(nlog n)，其中n为区间的数量。除去排序的开销，我们只需要一次线性扫描，所以主要的时间开销是排序的O(nlogn)。</li><li>空间复杂度：O(log n)。存储答案之外，排序使用的额外空间。</li></ul><h2 id="0061-旋转链表"><a href="#0061-旋转链表" class="headerlink" title="0061. 旋转链表"></a>0061. 旋转链表</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/rotate-list/">https://leetcode-cn.com/problems/rotate-list/</a></p><p><strong>方法一</strong>：快慢指针</p><p>快慢指针，这种方式经常用于解决需要反向操作链表的问题。</p><p>需要记录链表长度<code>len</code>，求出实际旋转次数<code>k=k%len</code>。</p><p>主要思想是，让快指针先走<code>k</code>次，然后慢指针和快指针一起走，当快指针走完时，慢指针会刚好来到<code>k</code>的位置。此次慢指针的下一个节点就是新的头结点，慢指针当前的节点就是尾结点，最后把快指针指向的节点指向头结点。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//快慢指针</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> ListNode <span class="token function">rotateRight</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//边界处理</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>k<span class="token operator">==</span><span class="token number">0</span> <span class="token operator">||</span> head<span class="token operator">==</span>null <span class="token operator">||</span> head<span class="token punctuation">.</span>next <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token keyword">return</span> head<span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//记录链表长度</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        ListNode cur <span class="token operator">=</span> head<span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>cur<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            len<span class="token operator">++</span><span class="token punctuation">;</span>
            cur<span class="token operator">=</span>cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//等效旋转次数</span>
        k <span class="token operator">=</span> k<span class="token operator">%</span>len<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>k<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> head<span class="token punctuation">;</span>
        ListNode slow <span class="token operator">=</span> head<span class="token punctuation">;</span>
        ListNode fast <span class="token operator">=</span> head<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//快指针先走k次</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>k<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            fast <span class="token operator">=</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            k<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//快慢指针一起走，直到fast.next为空</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>fast<span class="token punctuation">.</span>next<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            fast <span class="token operator">=</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            slow <span class="token operator">=</span> slow<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//修改指向，返回新的头节点</span>
        ListNode newHead <span class="token operator">=</span> slow<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        slow<span class="token punctuation">.</span>next <span class="token operator">=</span> null<span class="token punctuation">;</span>
        fast<span class="token punctuation">.</span>next <span class="token operator">=</span> head<span class="token punctuation">;</span>
        <span class="token keyword">return</span> newHead<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，遍历链表两次。</li><li>空间复杂度：O(1)。</li></ul><p><strong>方法二</strong>：闭合成环</p><p>先遍历一次链表，得到链表长度和最后一个节点，闭合成环。有了链表长度就可以直接遍历到断开位置，然后修改指向断开环。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//闭合为环</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> ListNode <span class="token function">rotateRight</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//边界处理</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>k<span class="token operator">==</span><span class="token number">0</span> <span class="token operator">||</span> head<span class="token operator">==</span>null <span class="token operator">||</span> head<span class="token punctuation">.</span>next<span class="token operator">==</span>null<span class="token punctuation">)</span> <span class="token keyword">return</span> head<span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//记录链表长度和最后一个节点</span>
        <span class="token keyword">int</span> len<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        ListNode cur <span class="token operator">=</span> head<span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>next<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            len<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//闭合成环</span>
        cur<span class="token punctuation">.</span>next<span class="token operator">=</span>head<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//找到断开位置</span>
        k <span class="token operator">=</span> len<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>k<span class="token operator">%</span>len<span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            head<span class="token operator">=</span>head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//修改指向，返回新的头节点</span>
        ListNode newHead <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        head<span class="token punctuation">.</span>next <span class="token operator">=</span> null<span class="token punctuation">;</span>
        <span class="token keyword">return</span> newHead<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，最坏情况下遍历链表两次。</li><li>空间负载的：O(1)。</li></ul><h2 id="0062-不同路径"><a href="#0062-不同路径" class="headerlink" title="0062. 不同路径"></a>0062. 不同路径</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/unique-paths/">https://leetcode-cn.com/problems/unique-paths/</a></p><p><strong>方法一</strong>：动态规划</p><p>对于<code>(0,0)</code>这个点来说，它只能往右走或者往下走。那么反过来，哪个点可以到达<code>(2,2)</code>呢？</p><ul><li>上方点<code>(1,2)</code></li><li>左方点<code>(2,1)</code></li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0062.6hmikh7bevk0.png" alt="0062"></p><p>搞清楚这个关系，动态规划的转移方程就很容易写出来了：<br>$$<br>\operatorname{dp}[i][j]=d p[i-1][j]+d p[i][j-1]<br>$$<br>解决了核心逻辑，再把边界条件处理一下就可以了。因为我们是从上到下一行一行推导的，所以我们要处理下第一行和第一列，将它们都赋值为<code>1</code>即可。</p><p>「<strong>空间优化</strong>」</p><p>我们在二维数组推导的时候发现，<code>dp[i][j]</code>的值来自于<code>dp[i-1][j]</code>和<code>dp[i][j-1]</code>。也就是只需要上一行的值就可以了，上上一行并不需要，所以这里可以用滚动数组的方式优化一下空间。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0062-2.u1qozmbakvk.png" alt="0062-2"></p><p>以上图所述，对于第三行<code>10</code>这个值，需要上方的值<code>+</code>左方的值。而经过上一次计算之后，第四列的值是<code>4</code>。此时我们不需要再跟上一行做累加，只需要<code>4</code>+<code>6</code>即可。所以我们可以申请长度为<code>n</code>的一维数组，将原先的动态规划方程<br>$$<br>dp[i][j]=dp[i-1][j]+dp[i][j-1]<br>$$<br>改为<br>$$<br>dp[j]=dp[j]+dp[j-1]<br>$$<br><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//1.动态规划</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">uniquePaths</span><span class="token punctuation">(</span><span class="token keyword">int</span> m<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//第一行赋值1</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//第一列赋值1</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//两层for循环推导，对于(i,j)来说，只能由上方或者左方转移过来</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//2.动态规划+空间优化</span>
<span class="token comment" spellcheck="true">//动态规划+空间优化</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">uniquePaths</span><span class="token punctuation">(</span><span class="token keyword">int</span> m<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//一维动态规划数组</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//初始化为全1</span>
        Arrays<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>dp<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//等式右边dp[j]是上一次计算结果（即，i,j处上方的值），加上左边dp[j-1]即为当前结果</span>
                dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span>dp<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(mn)。</li><li>空间复杂度：O(mn)，存储状态所需空间。</li><li>空间优化后，空间复杂度：O(n)，存储上一行状态所需空间。</li></ul><p><strong>方法二</strong>：排列组合</p><p>从左上角到右下角的过程中，我们需要移动<code>m+n-2</code>次，其中有m-1次向下移动，n-1次向右移动。因此路径的总数就等于从m+n-2次移动中选择m-1次向下移动的方案数，即组合数：</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0062-3.45pcet4eu4m0.png" alt="0062-3"></p><p>因此我们直接计算出这个组合数即可。<code>(m+n-2)(m+n-3)...n / (m-1)!</code></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">uniquePaths</span><span class="token punctuation">(</span><span class="token keyword">int</span> m<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> ans <span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//返回值范围</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token operator">=</span>n<span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> y<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">,</span> y<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            ans <span class="token operator">=</span> ans<span class="token operator">*</span>x<span class="token operator">/</span>y<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>ans<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(m)。由于我们交换行列的值并不会对答案产生影响，因此我们总可以通过交换 m 和 n 使得 m≤n，这样空间复杂度降低至 O(min(m,n))。</li><li>空间复杂度：O(1)</li></ul><h2 id="0064-最小路径和"><a href="#0064-最小路径和" class="headerlink" title="0064 最小路径和"></a>0064 最小路径和</h2><p><strong>题目地址</strong>：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/minimum-path-sum/">https://leetcode-cn.com/problems/minimum-path-sum/</a></p><p><strong>方法一</strong>：动态规划</p><p>此题是典型的动态规划题目。</p><p>「状态定义」，设<code>dp</code>为大小<code>m*n</code>，其中<code>dp[i][j]</code>的值代表走到<code>(i,j)</code>的最小路径和。</p><p>「转移方程」，题目要求只能向下和向右走</p><ul><li>上边界：当<code>i&gt;0</code>时，<code>dp[0][i] = dp[0][i-1]+grid[0][i]</code>；</li><li>左边界：当<code>i&gt;0</code>时，<code>dp[i][0] = dp[i-1][0]+grid[i][0]</code>；</li><li>其他：到达<code>(i,j)</code>只能是上方和左方，选择两者较小值加上<code>grid[i][j]</code>，即<code>dp[i][j]=Math.min(dp[i-1][j],dp[i][j-1])+grid[i][j]</code>；</li></ul><p>「初始状态」，<code>dp</code>初始化即可，无需修改初始值。</p><p>「返回值」，返回<code>dp</code>矩阵右下角的值，即走到终点的最小路径和。</p><p>注意，此题我们无需简历dp矩阵，完全可以在原始<code>grid</code>矩阵上修改。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//动态规划</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">minPathSum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> grid<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>grid<span class="token operator">==</span>null <span class="token operator">||</span> grid<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span> <span class="token operator">||</span> grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> m<span class="token operator">=</span>grid<span class="token punctuation">.</span>length<span class="token punctuation">,</span> n<span class="token operator">=</span>grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">==</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> j<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//dp初始值</span>
                <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//首行，即上边界</span>
                <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>j<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> grid<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//首列，即左边界</span>
                <span class="token keyword">else</span> grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>grid<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//其他</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> grid<span class="token punctuation">[</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//dp右下角，即最小路径和</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(mn)，遍历整个<code>grid</code>矩阵的元素。</li><li>空间复杂度：O(1)，直接修改原矩阵，不使用额外空间。</li></ul><h2 id="0073-矩阵置零"><a href="#0073-矩阵置零" class="headerlink" title="0073. 矩阵置零"></a>0073. 矩阵置零</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/set-matrix-zeroes/">https://leetcode-cn.com/problems/set-matrix-zeroes/</a></p><p><strong>方法一</strong>：使用标记数组</p><p>本题难点：如果在输入矩阵上原地修改行列为<code>0</code>，会影响后续遍历判断。</p><p>直观想法是O(MN)算法，把原数组复制一份，根据<code>copy</code>出来的数组判断某个位置是否为<code>0</code>，然后在原始数组中修改。</p><p>上面方法是每次遇到<code>0</code>就修改对应的行列，优化方法是遍历一次矩阵，使用标记数组记录下每行、每列是否出现了<code>0</code>。最后通过遍历将行列置<code>0</code>。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//使用标记数组，空间复杂度O(m+n)</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setZeroes</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> matrix<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> m<span class="token operator">=</span>matrix<span class="token punctuation">.</span>length<span class="token punctuation">,</span> n<span class="token operator">=</span>matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//标记每行、每列是否有0出现</span>
        <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> row <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">boolean</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> col <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">boolean</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历得到标记数组</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    row<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>col<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  
        <span class="token comment" spellcheck="true">//遍历修改数组，有出现0的行列置0</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">||</span> col<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(mn)，其中m、n分别是矩阵的行列数。我们至多遍历该矩阵两次。</li><li>空间复杂度：O(m+n)，我们需要分别记录每一行或每一列是否有零出现。</li></ul><p><strong>方法二</strong>：使用两个标记变量</p><p>我们可以用矩阵第一行和第一列代替方法一中的两个标记数组，以达到O(1)的额外空间。但这样会导致原数组的第一行和第一列被修改，无法记录它们是否原本包含<code>0</code>，因此我们需要额外使用两个标记变量分别记录第一行和第一列是否原本包含<code>0</code>。</p><p>分三步</p><p>1.使用两个变量<code>r0</code>和<code>c0</code>，记录「首行和首列」是否该被置零。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0073-1.5n6wn8wog3c0.png" alt="0073-1"></p><p>2.「非首行首列位置」</p><ul><li>将置零信息存储到原矩阵的「首行首列」</li><li>根据置零信息，置零「非首行首列」的位置</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0073-2.6ixduj1movc0.png" alt="0073-2"></p><p>3.使用<code>r0</code>和<code>c0</code>，置零「首行首列」</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0073-3.6edqjsg6fq80.png" alt="0073-3"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//使用两个标记变量，空间复杂度O(1)</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setZeroes</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> matrix<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> m<span class="token operator">=</span>matrix<span class="token punctuation">.</span>length<span class="token punctuation">,</span> n<span class="token operator">=</span>matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//标记首行、首列是否有0出现</span>
        <span class="token keyword">boolean</span> row0 <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> col0 <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//首列有0</span>
                col0 <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//首行有0</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                row0 <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//遍历非首行首列，置零信息存储到首行首列</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//i行有0</span>
                    matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//j列有0</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  
        <span class="token comment" spellcheck="true">//根据置零信息，遍历修改非首行首列</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span> <span class="token operator">||</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  

        <span class="token comment" spellcheck="true">//首行首列修改</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>row0<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>col0<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(mn)。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0075-颜色分类"><a href="#0075-颜色分类" class="headerlink" title="0075. 颜色分类"></a>0075. 颜色分类</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/sort-colors/">https://leetcode-cn.com/problems/sort-colors/</a></p><p><strong>方法一</strong>：双指针</p><p>我们可以考虑对数组进行两次遍历。在第一次遍历中，我们将数组中所有的<code>0</code>交换到数组的头部。在第二次遍历中，我们将数组中所有的<code>1</code>交换到头部的<code>0</code>之后。</p><p>如何一次遍历完成呢？</p><p>额外使用一个指针，即使用两个指针分别用来交换<code>0</code>和<code>2</code>。<code>p0</code>初始值为<code>0</code>，<code>p2</code>初始值为<code>n-1</code>。在遍历过程中，我们需要找出所有的<code>0</code>交换至数组的头部，并且找出所有的<code>2</code>交换至数组的尾部。</p><p>由于此时其中一个指针<code>p2</code>是<strong>从右向左</strong>移动的，因此当我们在<strong>从左向右遍历整个数组时</strong>，如果遍历到的位置超过了<code>p2</code>，那么就可以直接停止遍历了。</p><p>具体地，我们用指针我们从左向右遍历整个数组，设当前遍历到的位置为<code>i</code>，对应的元素为<code>nums[i]</code>。</p><ul><li>如果找到了<code>2</code>，将其与<code>nums[p2]</code>进行交换，并将<code>p2</code>前移一个位置。（交换后<code>nums[i]</code>可能为<code>0,1,2</code>，需要接着交换直至不为<code>2</code>）</li><li>如果找到了<code>0</code>，那么将其与<code>nums[p0]</code>进行交换，并将<code>p0</code>后移一个位置。（先判断<code>2</code>，再判断<code>0</code>，交换后<code>nums[i]</code>为<code>1</code>，无需接着交换）</li></ul><p>这样做是正确的吗？可以发现，对于第二种情况，当我们将<code>nums[i]</code> 与<code>nums[p2]</code>进行交换之后，新的<code>nums[i]</code>可能仍然是 <code>2</code>，也可能是<code>0</code>。然而此时我们已经结束了交换，开始遍历下一个元素<code>nums[i+1]</code>，不会再考虑 <code>nums[i]</code>了，这样我们就会得到错误的答案。</p><p>因此，当我们找到<code>2</code> 时，我们需要不断地将其与<code>nums[p2]</code>进行交换，直到新的<code>nums[i]</code>不为<code>2</code>。此时，如果 <code>nums[i]</code> 为 <code>0</code>，那么对应着第一种情况；如果 <code>nums[i]</code> 为 <code>1</code>，那么就不需要进行任何后续的操作。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//双指针，一次遍历</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sortColors</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> n<span class="token operator">=</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//双指针，p0指向0的右边界，p2指向2的左边界</span>
        <span class="token keyword">int</span> p0<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> p2<span class="token operator">=</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> temp<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//单次遍历，结束条件为i&lt;=p2</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span>p2<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//首先判断2，交换直到nums[i]不为2，nums[i]可能为0或1</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;=</span>p2 <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                temp<span class="token operator">=</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>nums<span class="token punctuation">[</span>p2<span class="token punctuation">]</span><span class="token punctuation">;</span>
                nums<span class="token punctuation">[</span>p2<span class="token punctuation">]</span><span class="token operator">=</span>temp<span class="token punctuation">;</span>
                p2<span class="token operator">--</span><span class="token punctuation">;</span>    
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//然后判断0，为0交换，不为0即是1，不用交换。</span>
            <span class="token comment" spellcheck="true">//注意：判断2和0的顺序不能变</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                temp<span class="token operator">=</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>nums<span class="token punctuation">[</span>p0<span class="token punctuation">]</span><span class="token punctuation">;</span>
                nums<span class="token punctuation">[</span>p0<span class="token punctuation">]</span><span class="token operator">=</span>temp<span class="token punctuation">;</span>
                p0<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，其中<code>n</code>是数组<code>nums</code>的长度。</li><li>空间复杂度：O(1)。</li></ul><p><strong>方法二</strong>：刷漆</p><p>用<code>zero</code>、<code>one</code>分别表示<code>0</code>、<code>1</code>的右边界。遍历数组时，记录下待处理的值<code>nums[i]</code>：</p><ul><li>首先填入<code>2</code>，<code>nums[i]=2</code>；</li><li>如果<code>temp&lt;2</code>，<code>1</code>的右边界<code>one</code>要向右挪一格。即填入<code>1</code>；</li><li>如果<code>temp==0</code>，<code>0</code>的右边界<code>zero</code>要向右挪一格。即填入<code>0</code>。</li></ul><p>这种填入顺序保证了不会出错。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//刷漆</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sortColors</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> n<span class="token operator">=</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//zero、one分别表示0、1的右边界</span>
        <span class="token keyword">int</span> zero<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> one<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> temp<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//记录待处理的值</span>
            temp<span class="token operator">=</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//不管怎样，先赋值为2</span>
            nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//&lt;2的话，1的右边界one要向右挪一格</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>temp<span class="token operator">&lt;</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                nums<span class="token punctuation">[</span>one<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
                one<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//==0的话，0的右边界要向右挪一格</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>temp<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                nums<span class="token punctuation">[</span>zero<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
                zero<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，其中<code>n</code>是数组<code>nums</code>的长度。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0078-子集"><a href="#0078-子集" class="headerlink" title="0078. 子集"></a>0078. 子集</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/subsets/">https://leetcode-cn.com/problems/subsets/</a></p><p><strong>方法一</strong>：回溯</p><ol><li><code>DFS</code>和回溯算法的区别</li></ol><p><code>DFS</code>是一个劲的往某一个方向搜索，而回溯算法建立在<code>DFS</code>基础之上，但不同的是在搜索过程中，达到结束条件后，恢复状态，回溯到上一层，再次搜索。因此回溯算法与<code>DFS</code>的<strong>区别就在于有无状态重置</strong>。</p><ol start="2"><li>何时使用回溯算法</li></ol><p><strong>当问题需要“回头”，以此查找出所有的解的时候，使用回溯算法</strong>。即满足结束条件或者发现不是正确路径的时候（走不通），需要撤销选择，回到上一个状态，继续尝试，直到找出所有解为止。</p><ol start="3"><li><strong>回溯算法如何写</strong>（从上而下，※代表难点，根据题目而变化）</li></ol><ul><li>①画出递归树，找到状态变量(回溯函数的参数)，这一步非常重要※</li><li>②根据题意，确立结束条件</li><li>③找准选择列表(与函数参数相关),与第一步紧密关联※</li><li>④判断是否需要剪枝</li><li>⑤作出选择，递归调用，进入下一层</li><li>⑥撤销选择</li></ul><ol start="4"><li>回溯问题的类型</li></ol><p>第一种：子集、组合。第二种：全排列。第三种：搜索。</p><p><strong>注意</strong>：子集、组合与排列是不同性质的概念。子集、组合是<strong>无关顺序的</strong>，而排列是和元素<strong>顺序有关的</strong>，如<code>[1,2]</code> 和<code>[2,1]</code> 是同一个组合(子集)，但<code>[1,2]</code>和<code>[2,1]</code> 是两种不一样的排列！！！因此被分为两类问题。</p><p>对于本题，解题步骤如下。</p><p>①递归树</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0078-1.3wubkiodyhk0.png" alt="0078-1"></p><p>观察上图可得，<strong>选择列表里的数，都是选择路径(红色框)后面的数</strong>，比如<code>[1]</code>这条路径，他后面的选择列表只有<code>2、3</code>，<code>[2]</code>这条路径后面只有<code>3</code>这个选择，那么这个时候，就应该使用一个参数<code>begin</code>，来<strong>标识当前的选择列表的起始位置</strong>。也就是标识每一层的状态，因此被形象的称为”<strong>状态变量</strong>“。</p><p>②找出结束条件</p><p><strong>此题非常特殊，所有路径都应该加入结果集，所以不存在结束条件</strong>。或者说当<code>begin</code>参数超越数组边界的时候，程序就自己跳过下一层递归了，因此不需要手写结束条件，直接加入结果集。</p><p>③找出选择列表</p><p>在①中已经提过，子集问题的选择列表，是上一条路径之后的数。</p><p>④判断是否需要剪枝</p><p>从递归树中看到，路径没有重复的，也没有不符合条件的，所以不需要剪枝。</p><p>⑤做出选择(即for循环里面的)</p><p>⑥撤销选择</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//回溯</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> <span class="token function">subsets</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//结果集</span>
        List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//路径</span>
        List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//调用回溯函数</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> path<span class="token punctuation">,</span> nums<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回结果</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> path<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> begin<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//特殊，所有路径都应该加入结果集，无边界条件</span>
        res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>begin<span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//做出选择</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> path<span class="token punctuation">,</span> nums<span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//递归进入下一层，注意i+1，标识下一个选择列表的开始位置，最重要的一步</span>
            path<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//撤销选择</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n*2<sup>n</sup>)，一共2<sup>n</sup>个状态，每种状态需要O(n)的时间来构造子集。</li><li>空间复杂度：O(n)。递归栈空间的代价是O(n)。</li></ul><h2 id="0079-单词搜索"><a href="#0079-单词搜索" class="headerlink" title="0079. 单词搜索"></a>0079. 单词搜索</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/word-search/">https://leetcode-cn.com/problems/word-search/</a></p><p><strong>方法一</strong>：深度优先搜索</p><p>设函数<code>check(i,j,k)</code>判断以网络的<code>(i,j)</code>位置出发，能否搜索到单词<code>word[k..]</code>，其中<code>word[k..]</code>表示字符串<code>word</code>从第<code>k</code>个字符开始的后缀子串。如果能搜索到，则返回<code>true</code>，反之返回<code>false</code>。函数<code>check(i,j,k)</code>的执行步骤如下：</p><ul><li>如果<code>board[i][j]≠s[k]</code>，当前字符不匹配，直接返回<code>false</code>。</li><li>如果当前已经访问到字符串的末尾，且对应字符仍然匹配，此时直接返回<code>true</code>；</li><li>否则，遍历当前位置的所有相邻位置。如果从某个相邻出发，能够搜索到子串<code>word[k+1..]</code>，则返回<code>true</code>，否则返回<code>false</code>。</li></ul><p>这样，我们对每一个位置<code>(i,j)</code>都调用<code>check(i,j,0)</code>进行检查：只要有一处返回<code>true</code>，就说明网络中能够找到相应的单词，否则说明找不到。</p><p>为了防止重复遍历相同的位置，需要额外维护一个与<code>board</code>等大<code>visited</code>数组，用于表示每个位置是否被访问过。每次遍历相邻位置时，需要跳过已经被访问的位置。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">exist</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> board<span class="token punctuation">,</span> String word<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> h<span class="token operator">=</span>board<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">int</span> w<span class="token operator">=</span>board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//每个位置是否访问过</span>
        <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> isVisited <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">boolean</span><span class="token punctuation">[</span>h<span class="token punctuation">]</span><span class="token punctuation">[</span>w<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历网格每一个位置，检测是否能从该位置出发找到word。</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>h<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>w<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token function">check</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> isVisited<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> word<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//找到直接返回true</span>
                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历到最后没有找到，返回false</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> board<span class="token punctuation">,</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> isVisited<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">,</span> String word<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//终止条件</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">!=</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//i,j处字符与当前字符不匹配</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>k<span class="token operator">==</span>word<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//i,j处字符与当前字符匹配，且当前字符为word的最后一个字符</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        
        <span class="token comment" spellcheck="true">//设置i,j处已访问</span>
        isVisited<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//i,j处字符与当前字符匹配，但不是word的最后一个字符</span>
        <span class="token comment" spellcheck="true">//判断四个相邻位置是否有匹配word下一个字符的</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> directions <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//i,j处的相邻位置，右、左、下、上</span>
        <span class="token keyword">boolean</span> result <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dir <span class="token operator">:</span> directions<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> newi <span class="token operator">=</span> i<span class="token operator">+</span>dir<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//新坐标</span>
            <span class="token keyword">int</span> newj <span class="token operator">=</span> j<span class="token operator">+</span>dir<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>newi<span class="token operator">>=</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> newi <span class="token operator">&lt;</span> board<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> newj<span class="token operator">>=</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> newj<span class="token operator">&lt;</span>board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//限定边界</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>isVisited<span class="token punctuation">[</span>newi<span class="token punctuation">]</span><span class="token punctuation">[</span>newj<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token function">check</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> isVisited<span class="token punctuation">,</span> newi<span class="token punctuation">,</span> newj<span class="token punctuation">,</span> word<span class="token punctuation">,</span> k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                        result<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//i,j处四个方向深度搜索完毕，设置i,j未访问，进入下一个检测起始位置</span>
        isVisited<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：一个非常宽松的上界为 O(MN⋅3 <sup>L</sup> )，其中 <code>M,N</code>为网格的长度与宽度，<code>L</code>为字符串 <code>word</code>的长度。</li><li>空间复杂度：O(MN)。我们额外开辟了O(MN)的<code>visited</code>数组，同时栈的深度最大为O(min(L,MN))。</li></ul><h2 id="0080-删除排序数组中的重复项-II"><a href="#0080-删除排序数组中的重复项-II" class="headerlink" title="0080. 删除排序数组中的重复项 II"></a>0080. 删除排序数组中的重复项 II</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array-ii/">https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array-ii/</a></p><p><strong>方法一</strong>：双指针</p><p>因为给定数组是有序的，所以相同元素必然连续。我们可以使用双指针解决本题，遍历数组检查每一个元素是否应该被保留，如果应该被保留，就将其移动到指定位置。具体地，</p><ul><li>设置快慢两个指针：<code>fast</code>和<code>slow</code>，初始值均为<code>2</code>，<code>slow</code>指针表示处理出的数组长度，<code>fast</code>指针表示已经检查过的数组的长度，即<code>nums[fast]</code>表示待检查的第一个元素，<code>nums[slow-1]</code>为上一个应该被保留的元素所移动到的指定位置；</li><li>本题要求相同元素最多出现两次，所以我们需要检查上上个应该被保留的元素<code>nums[slow-2]</code>是否和当前待检查元素<code>nums[fast]</code>相同。当且仅当<code>nums[slow-2]==nums[fast]</code>时，当前待检查元素不应该被保留（因为此时必然有<code>nums[slow-2]==nums[slow-1]==nums[fast]</code>）。</li><li>最后，<code>slow</code>即为处理好的数组长度。</li><li>特别地，数组的前两个数必然可以被保留，因此对于长度不超过<code>2</code>的数组，我们无需进行任何处理，<strong>对于长度超过<code>2</code>的数组，我们直接将双指针的初始值设为2即可</strong>。</li></ul><p><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/">删除有序数组中的重复项</a>，这道题目被修改为<code>每个元素只能出现一次</code>。我们只需要修改快慢指针初始值为<code>1</code>，判断<code>nums[slow-1]</code>和<code>nums[fast]</code>是否相等确定是否保留。</p><p><code>一般规律</code>：如果要求每个元素最多出现<code>K</code>次，只需要修改快慢指针初始值为<code>K</code>，判断<code>nums[slow-K]</code>和<code>nums[fast]</code>是否相等确定是否保留。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//双指针</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">removeDuplicates</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len<span class="token operator">=</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//特殊判断，如果nums长度小于2，直接输出长度n即可</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>len<span class="token operator">&lt;=</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> len<span class="token punctuation">;</span>

        <span class="token keyword">int</span> slow<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> fast<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>fast<span class="token operator">&lt;</span>len<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//题目要求最多两个数相同，如果满足不等条件，fast处应该放入结果</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>slow<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">!=</span>nums<span class="token punctuation">[</span>fast<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//更新slow</span>
                nums<span class="token punctuation">[</span>slow<span class="token punctuation">]</span><span class="token operator">=</span>nums<span class="token punctuation">[</span>fast<span class="token punctuation">]</span><span class="token punctuation">;</span>
                slow<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//不管判断结果如何，fast均前移</span>
            fast<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回结果长度，即slow</span>
        <span class="token keyword">return</span> slow<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，遍历数组一次。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0086-分隔链表"><a href="#0086-分隔链表" class="headerlink" title="0086. 分隔链表"></a>0086. 分隔链表</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/partition-list/">https://leetcode-cn.com/problems/partition-list/</a></p><p><strong>方法一</strong>：双哑节点</p><p>直观来说我们只需<strong>维护两个链表</strong><code>small</code> 和<code>large</code> 即可，<code>small</code> 链表按顺序存储所有小于<code>x</code> 的节点，<code>large</code> 链表按顺序存储所有大于等于 <code>x</code> 的节点。遍历完原链表后，我们只要将 <code>small</code> 链表尾节点指向<code>large</code> 链表的头节点即能完成对链表的分隔。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0086-1.50hgifl355s0.gif" alt="0086-1">为了实现上述思路，我们设<code>smallHead</code> 和<code>largeHead</code> 分别为两个链表的哑节点，即它们的<code>next</code> 指针指向链表的头节点，<strong>这样做的目的是为了更方便地处理头节点为空的边界条件</strong>。起初，设 <code>small</code> 和 <code>large</code> 节点指向各自的哑节点。随后，从前往后遍历链表，判断当前链表的节点值是否小于 <code>x</code>，如果小于就将 <code>small</code> 的<code>next</code> 指针指向该节点，否则将<code>large</code> 的<code>next</code> 指针指向该节点。</p><p><strong>遍历结束后</strong>，<strong>我们将<code>large</code> 的 <code>next</code> 指针置空</strong>，这是因为当前节点复用的是原链表的节点，而其 <code>next</code> 指针可能指向一个小于 <code>x</code> 的节点，我们需要切断这个引用。</p><p>同时将<code>small</code> 的 <code>next</code> 指针指向 <code>largeHead.next</code> ，即真正意义上的<code>large</code> 链表的头节点。最后返回 <code>smallHead</code> 的 <code>next</code> 指针即为我们要求的答案。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"> <span class="token comment" spellcheck="true">//双哑节点</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> ListNode <span class="token function">partition</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//设置两个哑节点，两个指针指向两个哑节点</span>
        ListNode smallHead <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ListNode largeHead <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ListNode small <span class="token operator">=</span> smallHead<span class="token punctuation">;</span>
        ListNode large <span class="token operator">=</span> largeHead<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历链表</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>head<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>val<span class="token operator">&lt;</span>x<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前值小于特定值x，放入small链表中</span>
                small<span class="token punctuation">.</span>next<span class="token operator">=</span> head<span class="token punctuation">;</span>
                small <span class="token operator">=</span> small<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前值大于等于特定值x，放入large链表中</span>
                large<span class="token punctuation">.</span>next <span class="token operator">=</span> head<span class="token punctuation">;</span>
                large <span class="token operator">=</span> large<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            head <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//合并两个链表，为防止成环，大链表末尾指向空</span>
        large<span class="token punctuation">.</span>next<span class="token operator">=</span>null<span class="token punctuation">;</span>
        small<span class="token punctuation">.</span>next<span class="token operator">=</span>largeHead<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token keyword">return</span> smallHead<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，遍历链表一次。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0090-子集-II"><a href="#0090-子集-II" class="headerlink" title="0090. 子集 II"></a>0090. 子集 II</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/subsets-ii/">https://leetcode-cn.com/problems/subsets-ii/</a></p><p><strong>方法一</strong>：回溯法</p><p>该题是<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/subsets/">子集</a>的变形，区别在于元素可重复，需要<strong>剪枝</strong>（<strong>排序是剪枝的前提！</strong>）</p><p>自然想到用回溯法求「所有可能的结果」。<strong>回溯法</strong>是一种思想，而<strong>递归</strong>是一种编程方法，回溯法可以用递归实现。</p><p><strong>回溯法的整体思路</strong>是：搜索每一条路，每次回溯是对具体的一条路径而言的。对当前搜索路径下的的未探索区域进行搜索，则可能有两种情况：</p><ul><li>当前未搜索区域满足结束条件，则保存当前路径并退出当前搜索；</li><li>当前未搜索区域需要继续搜索，则遍历当前所有可能的选择：如果该选择符合要求，则把当前选择加入当前的搜索路径中，并继续搜索新的未探索区域。</li></ul><p>上面说的未搜索区域是指搜索某条路径时的未搜索区域，并不是全局的未搜索区域。</p><p><strong>回溯法搜所有可行解的模板</strong>一般是这样的：</p><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span>未探索区域<span class="token punctuation">,</span> res<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>path满足条件<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> # 深度拷贝
        <span class="token keyword">return</span><span class="token punctuation">;</span>        # 不用继续搜索，<span class="token keyword">return</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>遍历未探索区域<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>符合剪枝要求<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            剪枝<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>当前选择<span class="token punctuation">)</span><span class="token punctuation">;</span> # 加入当前选择
        <span class="token function">dfs</span><span class="token punctuation">(</span>新的未探索区域<span class="token punctuation">,</span> res<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span> # 深度优先
        path<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> # 撤销当前选择
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p>对于本题，重复元素显然需要剪枝。要提前排序处理。递归树如图所示，剪枝条件是新的选择和刚被撤销的选择相等，即<code>i&gt;begin &amp;&amp; nums[i-1]==nums[i]</code>。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0090-1.1zgz8lbgii68.png" alt="0090-1"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//回溯</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> <span class="token function">subsetsWithDup</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//结果集</span>
        List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//拼接路径</span>
        List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//排序！剪枝的前提！！！</span>
        Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//调用回溯函数</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> res<span class="token punctuation">,</span> path<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回结果</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> path<span class="token punctuation">,</span> <span class="token keyword">int</span> begin<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//特殊，无结束条件，选择路径都是子集结果</span>
        res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>begin<span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">></span>begin <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//重复元素剪枝</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//选择</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> res<span class="token punctuation">,</span> path<span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//探索新的位置区域</span>
            path<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//撤销选择</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n<code>*</code>2<sup>n</sup>)，<code>n</code>是数组<code>nums</code>的长度。排序时间复杂度为O(nlogn)，最坏情况下 <code>nums</code> 中无重复元素，需要枚举其所有 2<sup>n</sup>个子集，每个子集加入答案时需要拷贝一份，耗时 O(n)，共O(n<code>*</code>2<sup>n</sup>)。</li><li>空间复杂度：O(n)，递归栈空间O(n)，path空间O(n)。</li></ul><h2 id="0091-解码方法"><a href="#0091-解码方法" class="headerlink" title="0091. 解码方法"></a>0091. 解码方法</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/decode-ways/">https://leetcode-cn.com/problems/decode-ways/</a></p><p><strong>方法一</strong>：动态规划</p><p><strong>这其实是一道字符串类的动态规划题，不难发现对于字符串<code>s</code>的某个位置<code>i</code>而言，我们只关心「位置<code>i</code>自己能否形成<code>item</code>」和「位置<code>i</code>能够与上一个位置<code>i-1</code>能否形成<code>item</code>」，而不关心<code>i-1</code>之前的位置。</strong></p><p>用<code>dp[i]</code>记录以<code>i</code>结尾的译码方法总数，分情况讨论（建立最优子结构）</p><ul><li>若<code>s[i]=&#39;0&#39;</code>，</li><li><ul><li>那么若<code>s[i-1]=&#39;1&#39; or &#39;2&#39;</code>，<code>s[i-1]+s[i]</code>唯一被译码，不增加情况，<code>dp[i]=dp[i-2]</code>。否则<code>return 0</code>（如字符串中存在<code>30</code>，无法译码）。</li></ul></li><li>否则<code>s[i]</code>在范围<code>[1,9]</code>内，</li><li><ul><li>若<code>s[i-1]=&#39;1&#39;</code>，则<code>s[i-1]</code>与<code>s[i]</code>分开译码，为<code>dp[i-1]</code>，合并译码，为<code>dp[i-2]</code>。则<code>dp[i]=dp[i-1]+dp[i-2]</code>。</li><li>若<code>s[i-1]=&#39;2&#39;</code>且<code>s[i]</code>在<code>[1,6]</code>范围内，则<code>s[i-1]</code>与<code>s[i]</code>分开译码，为<code>dp[i-1]</code>，合并译码，为<code>dp[i-2]</code>。则<code>dp[i]=dp[i-1]+dp[i-2]</code>。</li><li>其余情况<code>dp[i]=dp[i-1]</code>。</li></ul></li></ul><p><strong>细节</strong>：由于字符串存在前导<code>0</code>，所以要特判字符串首个字符为<code>0</code>的情况，遍历从第二个字符开始。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//动态规划</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">numDecodings</span><span class="token punctuation">(</span>String s<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//边界条件</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> len <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> pre<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> cur<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//dp[-1]=dp[0]=1</span>
        <span class="token keyword">int</span> temp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//从第二个字符开始遍历</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            temp <span class="token operator">=</span> cur<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">'0'</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//s[i-1]和s[i]被唯一译码，不增加情况</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">'1'</span> <span class="token operator">||</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">'2'</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    cur <span class="token operator">=</span> pre<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//更新dp[i]：dp[i]=dp[i-2]</span>
                <span class="token comment" spellcheck="true">//无法解码s[i-1]和s[i]，如"30"</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//s[i-1]和s[i]可以分开译码，也可以合并译码</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">'1'</span> <span class="token operator">||</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">'2'</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">>=</span><span class="token string">'1'</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token string">'6'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                cur <span class="token operator">=</span> cur<span class="token operator">+</span>pre<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//更新dp[i]：dp[i]=dp[i-1]+dp[i-2]</span>
            <span class="token comment" spellcheck="true">//其余情况</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                cur <span class="token operator">=</span> cur<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//更新dp[i]：dp[i]=dp[i-1]</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

            pre <span class="token operator">=</span> temp<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//更新dp[i-1]：dp[i-1]=dp[i-2]</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> cur<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，遍历字符串一次，共<code>n</code>个状态需要被转移。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0092-反转链表-II"><a href="#0092-反转链表-II" class="headerlink" title="0092. 反转链表 II"></a>0092. 反转链表 II</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/reverse-linked-list-ii/">https://leetcode-cn.com/problems/reverse-linked-list-ii/</a></p><p><strong>方法一</strong>：双指针-头插法</p><p>1、我们定义两个指针，分别称为<code>guard</code>和<code>point</code>。给链表添加一个傀儡头节点<code>dummyHead</code>。</p><p>我们首先根据方法的参数<code>m</code>确定<code>guard</code>和<code>point</code>的位置。将<code>gurad</code>移动到第一个要反转的节点的前面，将<code>point</code>移动到第一个要反转的节点的位置上。我们以<code>m=2,n=4</code>为例图解。</p><p>2、将<code>point</code>后面的元素删除，然后添加到<code>gurad</code>的后面，即头插法。</p><p>3、根据<code>m</code>和<code>n</code>重复步骤（2）；</p><p>4、返回<code>dummyHead.next</code>。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0092-1.5v7b31d6bio0.png" alt="0092-1"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//双指针+头插法</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> ListNode <span class="token function">reverseBetween</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">,</span> <span class="token keyword">int</span> m<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//定义一个傀儡头节点，方便处理</span>
        ListNode dummyHead <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dummyHead<span class="token punctuation">.</span>next <span class="token operator">=</span> head<span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//初始化指针</span>
        ListNode guard <span class="token operator">=</span> dummyHead<span class="token punctuation">;</span>
        ListNode point <span class="token operator">=</span> dummyHead<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//将指针移动到相应的位置，point指向第一个反转节点，guard指向</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            guard <span class="token operator">=</span> guard<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            point <span class="token operator">=</span> point<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//头插法插入节点</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>n<span class="token operator">-</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//删除节点</span>
            ListNode removed <span class="token operator">=</span> point<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            point<span class="token punctuation">.</span>next <span class="token operator">=</span> point<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//头插</span>
            removed<span class="token punctuation">.</span>next <span class="token operator">=</span> guard<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            guard<span class="token punctuation">.</span>next <span class="token operator">=</span> removed<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回新链表头节点</span>
        <span class="token keyword">return</span> dummyHead<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，最多遍历链表一次。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0094-二叉树的中序遍历"><a href="#0094-二叉树的中序遍历" class="headerlink" title="0094. 二叉树的中序遍历"></a>0094. 二叉树的中序遍历</h2><p><strong>0144前序遍历题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-preorder-traversal/">https://leetcode-cn.com/problems/binary-tree-preorder-traversal/</a></p><p><strong>0094中序遍历题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-inorder-traversal/">https://leetcode-cn.com/problems/binary-tree-inorder-traversal/</a></p><p><strong>0145后序遍历题目地址</strong>：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-postorder-traversal/">https://leetcode-cn.com/problems/binary-tree-postorder-traversal/</a></p><p><strong>0102层次遍历题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-level-order-traversal/">https://leetcode-cn.com/problems/binary-tree-level-order-traversal/</a></p><p><strong>方法一</strong>：递归实现</p><p>递归遍历太简单了。</p><ul><li>前序遍历：打印-左-右；</li><li>中序遍历：左-打印-右；</li><li>后序遍历：左-右-打印；</li></ul><p>题目要求中序遍历，递归实现很简单。</p><ul><li>终止条件：当前节点为空时</li><li>函数内：digital的调用左节点，打印当前节点，再递归调用右节点。</li></ul><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//递归-前中后序遍历</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> <span class="token function">inorderTraversal</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">inorder</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">inorder</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> res<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">==</span>null<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//左-打印-右，调整这里的顺序实现前中后序遍历</span>
        <span class="token function">inorder</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">inorder</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，访问每个节点一次。</li><li>空间复杂度：O(h)，<code>h</code>是树的高度。</li></ul><p><strong>方法二</strong>：迭代实</p><p>这题的真正难点在于如何用非递归的方式实现。</p><p>递归实现时，是函数自己调用自己，一层层的嵌套下去，<code>OS/JVM</code>会自动帮我们用<strong>栈</strong>来保存每个调用的函数，现在我们需要自己模拟这样的调用过程。</p><p>递归的调用过程是不断往左边走，当左边走不下去了，就打印节点，并转向右边，然后右边继续这个过程。我们在迭代时，就可以用栈来模拟上面的调用过程。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0094-1.1bhjq7i0sh1c.gif" alt="0094-1"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//迭代-中序遍历</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> <span class="token function">inorderTraversal</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Deque<span class="token operator">&lt;</span>TreeNode<span class="token operator">></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>root<span class="token operator">!=</span>null <span class="token operator">||</span> <span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前节点不为空</span>
                stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//压入当前节点，向左遍历</span>
                root <span class="token operator">=</span> root<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                root <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//左子树为空，弹出父节点，记录父节点值，向右遍历</span>
                res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
                root <span class="token operator">=</span> root<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//迭代-前序遍历</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> <span class="token function">preorderTraversal</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Deque<span class="token operator">&lt;</span>TreeNode<span class="token operator">></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>root<span class="token operator">!=</span>null <span class="token operator">||</span> <span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前节点不为空</span>
                res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//首先记录父节点值，父节点入栈，然后向左遍历</span>
                stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
                root <span class="token operator">=</span> root<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                root <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//左子树为空，弹出父节点，向右遍历</span>
                root <span class="token operator">=</span> root<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//迭代-后序遍历</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> <span class="token function">postorderTraversal</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        LinkedList<span class="token operator">&lt;</span>Integer<span class="token operator">></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Deque<span class="token operator">&lt;</span>TreeNode<span class="token operator">></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>root<span class="token operator">!=</span>null <span class="token operator">||</span> <span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前节点不为空</span>
                res<span class="token punctuation">.</span><span class="token function">addFirst</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//头插法！先记录根节点值，根节点入栈，向右遍历</span>
                stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
                root <span class="token operator">=</span> root<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                root <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//右子树为空，弹出根节点，向左遍历</span>
                root <span class="token operator">=</span> root<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，访问每个节点一次。</li><li>空间复杂度：O(h)，<code>h</code>是树的高度。</li></ul><h2 id="0095-不同的二叉搜索树-II"><a href="#0095-不同的二叉搜索树-II" class="headerlink" title="0095. 不同的二叉搜索树 II"></a>0095. 不同的二叉搜索树 II</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/unique-binary-search-trees-ii/">https://leetcode-cn.com/problems/unique-binary-search-trees-ii/</a></p><p><strong>方法一</strong>：回溯</p><p><strong>二叉搜索树关键的性质</strong>是根节点的值大于左子树所有节点的值，小于右子树所有节点的值，且左子树和右子树也同样为二叉搜索树。因此在生成所有可行的二叉搜索树的时候，假设当前序列长度为 <code>n</code>，如果我们枚举根节点的值为 <code>i</code>，那么根据二叉搜索树的性质我们可以知道左子树的节点值的集合为 <code>[1…i−1]</code>，右子树的节点值的集合为 <code>[i+1…n]</code>。而左子树和右子树的生成相较于原问题是一个序列长度缩小的<strong>子问题</strong>，因此我们可以想到用<strong>回溯</strong>的方法来解决这道题目。</p><p>我们定义 <code>generateAllTrees(start, end)</code>函数表示当前值的集合为 <code>[start,end]</code>，返回序列<code>[start,end]</code>生成的所有可行的二叉搜索树。按照上文的思路，我们考虑枚举 <code>[start,end]</code> 中的值 <code>i</code> 为当前二叉搜索树的根，那么序列划分为了 <code>[start,i−1]</code>和 <code>[i+1,end]</code> 两部分。我们<strong>递归调用这两部分</strong>，即 <code>generateAllTrees(start, i - 1)</code> 和 <code>generateAllTrees(i + 1, end)</code>，获得所有可行的左子树和可行的右子树，那么最后一步我们只要从可行左子树集合中选一棵，再从可行右子树集合中选一棵拼接到根节点上，并将生成的二叉搜索树放入答案数组即可。</p><p><strong>递归的入口</strong>即为 <code>generateAllTrees(1, n)</code>，<strong>出口</strong>为当 <code>start&gt;end</code> 的时候，当前二叉搜索树为空，返回<code>null</code>即可。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>TreeNode<span class="token operator">></span> <span class="token function">generateTrees</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//n==0，返回空集合</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span>TreeNode<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token function">generateAllTrees</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>TreeNode<span class="token operator">></span> <span class="token function">generateAllTrees</span><span class="token punctuation">(</span><span class="token keyword">int</span> start<span class="token punctuation">,</span> <span class="token keyword">int</span> end<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回所有二叉搜索树结果</span>
        List<span class="token operator">&lt;</span>TreeNode<span class="token operator">></span> allTrees <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//边界条件，返回空二叉树</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>start<span class="token operator">></span>end<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            allTrees<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> allTrees<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//枚举所有根节点</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>start<span class="token punctuation">;</span> i<span class="token operator">&lt;=</span>end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//i为根节点，获得所有可行的左子树集合</span>
            List<span class="token operator">&lt;</span>TreeNode<span class="token operator">></span> leftTrees <span class="token operator">=</span> <span class="token function">generateAllTrees</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//i为根节点，获得所有可行的右子树集合</span>
            List<span class="token operator">&lt;</span>TreeNode<span class="token operator">></span> rightTrees <span class="token operator">=</span> <span class="token function">generateAllTrees</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment" spellcheck="true">//取出一个左子树和右子树，以i为根节点构成一个二叉搜索树</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span>TreeNode left <span class="token operator">:</span> leftTrees<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>TreeNode right <span class="token operator">:</span> rightTrees<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    TreeNode curTree <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeNode</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    curTree<span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
                    curTree<span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
                    allTrees<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>curTree<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> allTrees<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>过于复杂，不分析。</li></ul><h2 id="0096-不同的二叉搜索树"><a href="#0096-不同的二叉搜索树" class="headerlink" title="0096. 不同的二叉搜索树"></a>0096. 不同的二叉搜索树</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/unique-binary-search-trees">https://leetcode-cn.com/problems/unique-binary-search-trees</a></p><p><strong>方法一</strong>：动态规划</p><p><strong>思路</strong></p><ul><li>如果整数<code>[1,n]</code>中的<code>k</code>作为根节点值，则<code>[1,k-1]</code>会去构建左子树，<code>[k+1,n]</code>会去构建右子树；</li><li>左子树出来的形态有<code>a</code>种，右子树出来的形态有<code>b</code>种，则整个树的形态有<code>a*b</code>中；</li><li><ul><li>以<code>k</code>为根节点的<code>BST</code>种类数=左子树<code>BST</code>种类数*右子树<code>BST</code>种类数</li></ul></li><li>问题变成：不同的<code>k</code>之下，等号右边的乘积，进行累加。</li></ul><p><strong>定义<code>DP</code>子问题</strong></p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0096-1.6zs7uyfm0vc0.png" alt="0096-1"></p><ul><li>用<code>[2,3]</code>构建，和用<code>[1,2]</code>构建，出来的种类数是一样的，因为参与构建的个数一样；</li><li>再比如<code>[2,3,4]</code>和<code>[1,2,3]</code>都是连着的三个数，构建出的<code>BST</code>的种类数相同，属于重复的子问题；</li><li>定义<code>dp[i]</code>：用连着的<code>i</code>个数，所构建出的<code>BST</code>种类数。</li></ul><p><strong>状态转移方程</strong></p><ul><li><p>用<code>i</code>个根节点构建<code>BST</code>时，除去根节点，剩余<code>i-1</code>个节点构建左、右子树，左子树分配<code>0</code>个，右子树分配<code>i-1</code>个…依次类推。<img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0096-2.6phei59udfo0.png" alt="0096-2"></p></li><li><p>左子树用掉<code>j</code>个，则右子树用掉<code>i-j-1</code>个，能构建出<code>dp[j]*dp[i-j-1]</code>种不同的<code>BST</code>。<br>$$<br>d p[i]=\sum d p[j] * d p[i-j-1], 0&lt;=j&lt;=i-1<br>$$</p></li></ul><p><strong>基础条件</strong></p><ul><li>当<code>n=0</code>时，没有数字，只能形成一种<code>BST</code>：空树。</li><li>当<code>n=1</code>时，只有一个数字，只能形成一种<code>BST</code>：单个节点。</li></ul><p>其实，<code>dp[i]</code>是<strong>卡塔兰数</strong>，定义如下，可以直接用数学方法求：<br>$$<br>C_{0}=1, \quad C_{n+1}=\frac{2(2 n+1)}{n+2} C_{n}<br>$$<br><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//动态规划</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">numTrees</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//保存计算结果</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//初始条件</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//从2推算到n</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//用i个数构建BST时，左子树个数j变化范围为[0,i-1]，对应的右子树个数为i-1-j，累加所有情况</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;=</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">*</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回结果</span>
        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n<sup>2</sup>)，<code>n</code>代表<code>BST</code>节点个数。</li><li>空间复杂度：O(n)，需要O(n)的空间存储<code>0-n</code>个节点可以构建<code>BST</code>数。</li></ul><h2 id="0098-验证二叉搜索树"><a href="#0098-验证二叉搜索树" class="headerlink" title="0098. 验证二叉搜索树"></a>0098. 验证二叉搜索树</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-solution-leetcode-pp.gitbook.io/leetcode-solution/medium/98.validate-binary-search-tree">https://leetcode-solution-leetcode-pp.gitbook.io/leetcode-solution/medium/98.validate-binary-search-tree</a></p><p><strong>方法一</strong>：递归</p><p>根据题目<strong>二叉搜索树</strong>的性质，我们设计一个递归函数<code>helper(root, lower, upper)</code>来递归判断，函数表示考虑以<code>root</code>为根的子树，判断子树中所有节点的值是否都在<code>(l,r)</code>的范围内（注意是开区间）。如果<code>root</code>节点的值<code>val</code>不在<code>(l,r)</code>范围内说明不满足条件直接返回，负责我们要继续递归调用检测它的左右子树是否满足，如果都满足说明这是一颗二叉搜索树。</p><p>递归调用左子树，改变上界，<code>helper(root.left, lower, root.val)</code>。递归调用右子树，改变下界，<code>helper(root.right, root.val, upper)</code></p><p>函数递归的入口为<code>helper(root, -inf, +inf)</code>，<code>inf</code>表示一个无穷大的值。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//递归</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isValidBST</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//调用递归</span>
        <span class="token keyword">return</span> <span class="token function">helper</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> Long<span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">,</span> Long<span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">helper</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">,</span> <span class="token keyword">long</span> lower<span class="token punctuation">,</span> <span class="token keyword">long</span> upper<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//边界条件，返回true</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">==</span>null<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//判断条件，返回false。不能用返回true的条件，两个true会出问题</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val<span class="token operator">>=</span>upper <span class="token operator">||</span> root<span class="token punctuation">.</span>val<span class="token operator">&lt;=</span>lower<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">helper</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span> lower<span class="token punctuation">,</span> root<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">helper</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span> root<span class="token punctuation">.</span>val<span class="token punctuation">,</span> upper<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，<code>n</code>为二叉树的节点个数。</li><li>空间复杂度：O(h)，<code>h</code>为二叉树的高度。</li></ul><p><strong>方法二</strong>：中序遍历</p><p>二叉搜索树中序遍历是升序的，这启示我们在中序遍历时实时检查当前节点的值是否大于前一个中序遍历到的节点的值即可。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//中序遍历迭代</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isValidBST</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//存储中序遍历前一个值</span>
        <span class="token keyword">long</span> pre <span class="token operator">=</span> Long<span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//辅助遍历栈</span>
        Deque<span class="token operator">&lt;</span>TreeNode<span class="token operator">></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>root <span class="token operator">!=</span> null <span class="token operator">||</span> <span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//向左遍历</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
                root <span class="token operator">=</span> root<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//判断条件</span>
                root <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token comment" spellcheck="true">// 如果中序遍历得到的节点的值小于等于前一个 pre，说明不是二叉搜索树</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span>val <span class="token operator">&lt;=</span> pre<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
                pre <span class="token operator">=</span> root<span class="token punctuation">.</span>val<span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//向右遍历</span>
                root <span class="token operator">=</span> root<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//中序遍历递归</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//存储中序遍历前一个值</span>
    <span class="token keyword">long</span> pre <span class="token operator">=</span> Long<span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isValidBST</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//调用递归</span>
        <span class="token keyword">return</span> <span class="token function">inorder</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">inorder</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//边界条件</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">==</span>null<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//向左递归</span>
        <span class="token keyword">boolean</span> left <span class="token operator">=</span> <span class="token function">inorder</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//判断条件</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>pre<span class="token operator">>=</span>root<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        pre <span class="token operator">=</span> root<span class="token punctuation">.</span>val<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//向右递归</span>
        <span class="token keyword">boolean</span> right <span class="token operator">=</span> <span class="token function">inorder</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> left <span class="token operator">&amp;&amp;</span> right<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，其中<code>n</code>为二叉树的节点数。</li><li>空间复杂度：O(h)，<code>h</code>为二叉树的高度，栈最多存储<code>h</code>个节点。</li></ul><h2 id="0102-二叉树的层序遍历"><a href="#0102-二叉树的层序遍历" class="headerlink" title="0102. 二叉树的层序遍历"></a>0102. 二叉树的层序遍历</h2><p><strong>0144前序遍历题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-preorder-traversal/">https://leetcode-cn.com/problems/binary-tree-preorder-traversal/</a></p><p><strong>0094中序遍历题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-inorder-traversal/">https://leetcode-cn.com/problems/binary-tree-inorder-traversal/</a></p><p><strong>0145后序遍历题目地址</strong>：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-postorder-traversal/">https://leetcode-cn.com/problems/binary-tree-postorder-traversal/</a></p><p><strong>0102层序遍历题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-level-order-traversal/">https://leetcode-cn.com/problems/binary-tree-level-order-traversal/</a></p><p>解题总结在<code>0094</code>中序遍历！！！</p><p><strong>方法一</strong>：深度优先遍历</p><p><code>DFS</code>与<code>BFS</code></p><p><code>DFS</code>遍历使用<strong>递归</strong>：</p><pre class="language-java"><code class="language-java"><span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    
    <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><code>BFS</code>遍历使用<strong>队列</strong>数据结构：</p><pre class="language-java"><code class="language-java"><span class="token keyword">void</span> <span class="token function">bfs</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    Queue<span class="token operator">&lt;</span>TreeNode<span class="token operator">></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">!=</span>null<span class="token punctuation">)</span> queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>queue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        TreeNode node <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token operator">!=</span>null<span class="token punctuation">)</span> queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token operator">!=</span>null<span class="token punctuation">)</span> queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p>只是比较两段代码的话，最直观的感受就是：<code>DFS</code> 遍历的代码比 <code>BFS</code> 简洁太多了！这是因为递归的方式隐含地使用了<strong>系统的栈</strong>，我们不需要自己维护一个数据结构。如果只是简单地将二叉树遍历一遍，那么 <code>DFS</code> 显然是更方便的选择。</p><p>虽然 <code>DFS</code> 与 <code>BFS</code> 都是将二叉树的所有结点遍历了一遍，但它们遍历结点的顺序不同。这个遍历顺序就是<code>BFS</code>能用来解决「层序遍历」、「最短路径」问题的根本原因。</p><p>「层序遍历」</p><p>乍一看，我们可以直接用<code>BFS</code>得出层序遍历结果。然而，层序遍历要求的输出结果和 <code>BFS</code> 是不同的。<strong>层序遍历要求我们区分每一层，也就是返回一个二维数组</strong>。而 <code>BFS</code> 的遍历结果是一个一维数组，无法区分每一层。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0102-1.7h6n9my3jfs0.png" alt="0102-1"></p><p><strong>怎么区分出队列中的节点来自哪一层呢</strong>？只需要在每一层遍历开始前，先记录队列中的节点数量<code>n</code>（也就是这一层的节点数量），然后一次遍历完这一层的<code>n</code>个节点。如图所示</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0102-2.1km0uzy8wv4w.gif" alt="0102-2"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//迭代-层序遍历</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> <span class="token function">levelOrder</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//结果集合</span>
        List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//辅助遍历队列</span>
        Queue<span class="token operator">&lt;</span>TreeNode<span class="token operator">></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">!=</span>null<span class="token punctuation">)</span> queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>queue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//当前队列大小为该层元素个数，一次性遍历该层</span>
            List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> level <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> currentLevelSize <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>currentLevelSize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                TreeNode node <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                level<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token operator">!=</span>null<span class="token punctuation">)</span> queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token operator">!=</span>null<span class="token punctuation">)</span> queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//该层元素加入结果集</span>
            res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>level<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，每个节点出入队各一次，渐进时间复杂度为O(n)。</li><li>空间复杂度：O(n)，队列中元素个数不超过<code>n</code>，渐进空间复杂度为O(n)。</li></ul><h2 id="0103-二叉树的锯齿形层次遍历"><a href="#0103-二叉树的锯齿形层次遍历" class="headerlink" title="0103. 二叉树的锯齿形层次遍历"></a>0103. 二叉树的锯齿形层次遍历</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-zigzag-level-order-traversal/">https://leetcode-cn.com/problems/binary-tree-zigzag-level-order-traversal/</a></p><p><strong>方法一</strong>：广度优先遍历</p><p>此题是<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-level-order-traversal/">0102二叉树层序遍历</a>的变种，最后输出的要求有所变化，我们按照<strong>层数的奇偶</strong>（<strong>使用一个布尔变量</strong>）来决定每一层的输出顺序，<strong>只需要改变加入结果集合的顺序即可</strong>！</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0103-1.32gojhrci4o0.png" alt="0103-1"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//BFS</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> <span class="token function">zigzagLevelOrder</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//结果集合</span>
        List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//队列</span>
        Deque<span class="token operator">&lt;</span>TreeNode<span class="token operator">></span> deque <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//二叉树的奇偶层，根据奇偶决定结果添加顺序</span>
        <span class="token keyword">boolean</span> isOrderLeft <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//首先加入根节点</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">!=</span>null<span class="token punctuation">)</span> deque<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>deque<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            LinkedList<span class="token operator">&lt;</span>Integer<span class="token operator">></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> curSize <span class="token operator">=</span> deque<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//遍历当前层</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>curSize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                TreeNode node <span class="token operator">=</span> deque<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    <span class="token comment" spellcheck="true">//奇数层，从左往右添加</span>
                    list<span class="token punctuation">.</span><span class="token function">offerLast</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    <span class="token comment" spellcheck="true">//偶数层，从右往左添加</span>
                    list<span class="token punctuation">.</span><span class="token function">offerFirst</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token operator">!=</span>null<span class="token punctuation">)</span> deque<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token operator">!=</span>null<span class="token punctuation">)</span> deque<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//奇偶切换</span>
            flag <span class="token operator">=</span> <span class="token operator">!</span>flag<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，n为二叉树的节点数，每个节点会且仅会遍历一次。</li><li>空间复杂度：O(n)，我们需要维护存储节点的队列和存储节点值的双端队列。</li></ul><h2 id="105-从前序与中序遍历序列构造二叉树"><a href="#105-从前序与中序遍历序列构造二叉树" class="headerlink" title="105 从前序与中序遍历序列构造二叉树"></a>105 从前序与中序遍历序列构造二叉树</h2><p><strong>题目地址</strong>：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/">https://leetcode-cn.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/</a></p><p><strong>方法一</strong>：递归</p><p>对于任意一颗树而言，前序遍历形式总是<code>[根节点,[左子树前序遍历结果],[右子树前序遍历结果]]</code>，中序遍历的形式总是<code>[[左子树中序遍历结果],根节点,[右子树中序遍历结果]]</code>。</p><p>只要我们在中序遍历中<strong>定位</strong>到根节点，那么就可以知道左右子树的节点数目。同一子树前序和中序遍历长度相同，因此我们就可以得到左右子树的前序和中序遍历结果，递归的进行构造即可。</p><p>例如输入前序遍历序列<code>&#123;1,2,4,7,3,5,6,8&#125;</code>和中序遍历序列<code>&#123;4,7,2,1,5,3,8,6&#125;</code></p><ul><li>首先根节点是<code>&#123;1&#125;</code>；</li><li>左子树是：前序<code>&#123;2,4,7&#125;</code>,中序<code>&#123;4,7,2&#125;</code>；</li><li>右子树是：前序<code>&#123;3,5,6,8&#125;</code>,中序<code>&#123;5,3,8,6&#125;</code>；</li><li>递归构造左右子树。</li></ul><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> TreeNode <span class="token function">buildTree</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> preorder<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> inorder<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//调用递归</span>
        TreeNode root <span class="token operator">=</span> <span class="token function">dfs</span><span class="token punctuation">(</span>preorder<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> preorder<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> inorder<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> inorder<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> root<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> TreeNode <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> preorder<span class="token punctuation">,</span> <span class="token keyword">int</span> preStart<span class="token punctuation">,</span> <span class="token keyword">int</span> preEnd<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> inorder<span class="token punctuation">,</span> <span class="token keyword">int</span> inStart<span class="token punctuation">,</span> <span class="token keyword">int</span> inEnd<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>preStart<span class="token operator">></span>preEnd <span class="token operator">||</span> inStart<span class="token operator">></span>inEnd<span class="token punctuation">)</span> <span class="token keyword">return</span> null<span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//当前前序和中序遍历结果的根节点</span>
        TreeNode root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeNode</span><span class="token punctuation">(</span>preorder<span class="token punctuation">[</span>preStart<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//定位中序遍历中根节点的位置</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>inStart<span class="token punctuation">;</span> i<span class="token operator">&lt;=</span>inEnd<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>preorder<span class="token punctuation">[</span>preStart<span class="token punctuation">]</span><span class="token operator">==</span>inorder<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//递归调用生成左右子树</span>
                root<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">dfs</span><span class="token punctuation">(</span>preorder<span class="token punctuation">,</span> preStart<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> preStart<span class="token operator">+</span>i<span class="token operator">-</span>inStart<span class="token punctuation">,</span> inorder<span class="token punctuation">,</span> inStart<span class="token punctuation">,</span> i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                root<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">dfs</span><span class="token punctuation">(</span>preorder<span class="token punctuation">,</span> preStart<span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span>i<span class="token operator">-</span>inStart<span class="token punctuation">,</span> preEnd<span class="token punctuation">,</span> inorder<span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> inEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//跳出循环</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> root<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，其中<code>n</code>是树中的节点个数。</li><li>空间复杂度：O(height)，递归栈空间，二叉树的高度。</li></ul><h2 id="0113-路径总和-II"><a href="#0113-路径总和-II" class="headerlink" title="0113. 路径总和 II"></a>0113. 路径总和 II</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/path-sum-ii/">https://leetcode-cn.com/problems/path-sum-ii/</a></p><p><strong>方法一</strong>：回溯</p><p>注意本题的要求是，找到所有满足从根节点到某个叶子结点经过的路径上的节点之和等于目标和的路径。核心思想是对树进行一次遍历，在遍历的时候记录从根节点到当前节点的路径和，以防止重复计算。</p><p>我们可以采用深度优先搜索的方式，枚举每一条从根节点到叶子结点的路径。当我们遍历到叶子节点，且此时路径和恰为目标和时，我们就找到了一条满足条件的路径。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 深度优先遍历</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//结果集</span>
    List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//拼接路径</span>
    List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> <span class="token function">pathSum</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">,</span> <span class="token keyword">int</span> targetSum<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//调用递归</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> targetSum<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回结果</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">,</span> <span class="token keyword">int</span> sum<span class="token punctuation">,</span> <span class="token keyword">int</span> targetSum<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//边界条件</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//选择节点</span>
        sum <span class="token operator">+=</span> root<span class="token punctuation">.</span>val<span class="token punctuation">;</span>
        path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//叶子结点且路径总和等于给定目标，不用加return</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token operator">==</span>null <span class="token operator">&amp;&amp;</span> root<span class="token punctuation">.</span>right<span class="token operator">==</span>null <span class="token operator">&amp;&amp;</span> targetSum<span class="token operator">==</span>sum<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//向左深度搜索</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span> sum<span class="token punctuation">,</span> targetSum<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//向右深度搜索</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span> sum<span class="token punctuation">,</span> targetSum<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//撤销选择</span>
        path<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n<sup>2</sup>)，其中n是树的节点数。</li><li>空间复杂度：O(n)，空间复杂度主要取决于栈空间的开销，栈中元素的个数不会超过树的节点数。</li></ul><h2 id="0114-二叉树展开为链表"><a href="#0114-二叉树展开为链表" class="headerlink" title="0114 二叉树展开为链表"></a>0114 二叉树展开为链表</h2><p><strong>题目地址</strong>：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/flatten-binary-tree-to-linked-list/">https://leetcode-cn.com/problems/flatten-binary-tree-to-linked-list/</a></p><p><strong>方法一</strong>：</p><p><strong>直观想法</strong>是对二叉树进行前序遍历，将各个节点访问顺序放入集合中，然后遍历集合修改指向。</p><p>根据观察，本题可以用<code>DFS</code>方式来解决，如图是如何将二叉树展开为链表，其实分三步：</p><ul><li>首先将根节点的左子树变成链表；</li><li>然后将根节点的右子树变成链表；</li><li>最后将变成链表的左子树放到根节点右边，将变成链表的右子树放到变成链表的左子树的最右边。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0114-1.329aov0rrwo0.png" alt="0114-1"></p><p>这就是一个递归过程，递归重要的点是：不用管函数内部细节如何处理，我们只看函数作用以及输入输出。对于<code>flatten</code>函数来说，将一个二叉树展开成链表，输入根节点，无输出。</p><p>时间复杂度<code>O(1)</code>的方法，寻找前驱节点，如图，比较难理解。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0114-2.74jjnb2gps40.png" alt="0114-2"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//dfs</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">flatten</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//终止条件</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">==</span>null<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//将根节点的左子树变成链表</span>
        <span class="token function">flatten</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//将根节点的右子树变成链表</span>
        <span class="token function">flatten</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//根节点的右子树暂存到temp</span>
        TreeNode temp <span class="token operator">=</span> root<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//根节点的右指针指向左子树</span>
        root<span class="token punctuation">.</span>right <span class="token operator">=</span> root<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//根节点左子树清空</span>
        root<span class="token punctuation">.</span>left <span class="token operator">=</span> null<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//找到树最右边节点</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token operator">!=</span>null<span class="token punctuation">)</span> root <span class="token operator">=</span> root<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//把右边链表添加到最右边节点的右端</span>
        root<span class="token punctuation">.</span>right <span class="token operator">=</span> temp<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//寻找前驱节点，时间复杂度O(n)，空间复杂度O(1)</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">flatten</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        TreeNode cur <span class="token operator">=</span> root<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>cur <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>left <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//根节点的下一个节点</span>
                TreeNode next <span class="token operator">=</span> cur<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//根节点右子树的前一个节点</span>
                TreeNode pre <span class="token operator">=</span> next<span class="token punctuation">;</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span>pre<span class="token punctuation">.</span>right <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    pre <span class="token operator">=</span> pre<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//修改指向</span>
                pre<span class="token punctuation">.</span>right <span class="token operator">=</span> cur<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
                cur<span class="token punctuation">.</span>left <span class="token operator">=</span> null<span class="token punctuation">;</span>
                cur<span class="token punctuation">.</span>right <span class="token operator">=</span> next<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//更新cur</span>
            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)。</li><li>空间复杂度：O(height)，递归栈深度。</li></ul><h2 id="0128-最长连续序列"><a href="#0128-最长连续序列" class="headerlink" title="0128 最长连续序列"></a>0128 最长连续序列</h2><p><strong>题目地址</strong>：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/longest-consecutive-sequence/">https://leetcode-cn.com/problems/longest-consecutive-sequence/</a></p><p><strong>方法一</strong>：哈希表</p><p>这道题可能首先会想到排序来做，但会超过空间复杂度。排序后遍历数组：</p><ul><li>如果当前值和上一个值相同，跳过本次循环；</li><li>如果当前值是上一个值<code>+1</code>，连续变量<code>count++</code>；</li><li>如果不满足上面两个条件，更新最长连续序列长度，连续变量<code>count</code>置为<code>1</code>。</li></ul><p>不超时间复杂度的做法是用「哈希表」，首先把<code>nums</code>元素放入哈希<code>Set</code>集合中<strong>去除重复元素</strong>，然后遍历集合<strong>看哪些元素能够当做连续序列的左边界</strong></p><ul><li>如果<code>x</code>为左边界，那么<code>x-1</code>不能做集合中，因为如果<code>x-1</code>在集合中，最长连续序列应该至少以<code>x-1</code>为左边界；</li><li>也即，<code>x</code>为左边界，那么<code>x-1</code>不能在集合中。</li></ul><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//排序，会超时间复杂度</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">longestConsecutive</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token operator">==</span>null <span class="token operator">||</span> nums<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//特例</span>

        Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> maxLen<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> count<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span>nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//遇到重复值，跳出本次循环</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span>nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//遇到连续值，连续变量count++</span>
                count<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//不连续值，更新maxLen和重置count</span>
                maxLen <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxLen<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
                count<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxLen<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//跳出循环之后，还有最后一个连续长度未计算</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//哈希集合</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">longestConsecutive</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token operator">==</span>null <span class="token operator">||</span> nums<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//特例</span>

        Set<span class="token operator">&lt;</span>Integer<span class="token operator">></span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//数组元素加入集合去重</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> num <span class="token operator">:</span> nums<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> maxLen<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//遍历集合，寻找可以充当左边界元素统计最长连续序列的长度</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">:</span> set<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>set<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//集合中不存在x-1，x才能充当最长连续序列的左边界</span>
                <span class="token keyword">int</span> count<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token keyword">while</span><span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>x<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//不断在集合中找x+1是否存在</span>
                    count<span class="token operator">++</span><span class="token punctuation">;</span>
                    x<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
                maxLen <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxLen<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//更新最长连续序列长度</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> maxLen<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，<code>n</code>为数组长度。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0129-求根到叶子节点数字之和"><a href="#0129-求根到叶子节点数字之和" class="headerlink" title="0129. 求根到叶子节点数字之和"></a>0129. 求根到叶子节点数字之和</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/sum-root-to-leaf-numbers/">https://leetcode-cn.com/problems/sum-root-to-leaf-numbers/</a></p><p><strong>方法一</strong>：深度优先搜索</p><p>根据题意，每个节点都对应一个数字，等于父节点对应数字乘以<code>10</code>再加上该节点的值。</p><p>深度优先搜索时很直观的做法。从根节点开始，遍历每个节点：</p><ul><li>如果遇到叶子节点，则将叶子结点对应的数字加到数字之和。</li><li>如果当前节点不是叶子节点，则计算其子节点对应的数字，然后对子节点递归遍历。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0129-1.1o3yjdbrshuo.png" alt="0129-1"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//深度优先遍历</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sumNumbers</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//调用递归</span>
        <span class="token keyword">return</span> <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">dfs</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">,</span> <span class="token keyword">int</span> preSum<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//边界条件</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">==</span>null<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//当前节点对应数字</span>
        <span class="token keyword">int</span> sum <span class="token operator">=</span> preSum<span class="token operator">*</span><span class="token number">10</span> <span class="token operator">+</span> root<span class="token punctuation">.</span>val<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//当前节点是叶子节点，返回sum</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token operator">==</span>null <span class="token operator">&amp;&amp;</span> root<span class="token punctuation">.</span>right<span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//当前节点非叶子结点，深度优先计算其左右子节点对应数字之和</span>
            <span class="token keyword">return</span> <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span> sum<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，其中n为二叉树的节点个数。对每个节点访问一次。</li><li>空间复杂度：O(h)，取决于递归调用栈空间，递归栈的深度等于二叉树的高度。</li></ul><p><strong>方法二</strong>：广度优先搜索</p><p>使用广度优先搜索，<strong>需要维护两个队列，分别存储节点和节点对应的数字</strong>。</p><p>初始时，将根节点和根节点对应的值放入两个队列。每次从两个队列分别取出一个节点和一个数字，进行如下操作：</p><ul><li>如果当前节点是叶子节点，则将该节点对应的数字加到数字之和；</li><li>如果当前节点不是叶子节点，则获得当前节点的非空子节点，并根据当前节点对应的数字和子节点的值计算子节点对应的数字，然后将子节点和子节点对应的数字分别加入两个队列。</li></ul><p>搜索结束后，即可得到所有叶子结点对应的数字之和。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//广度优先遍历</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sumNumbers</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//结果</span>
        <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//广度优先遍历辅助节点队列</span>
        Deque<span class="token operator">&lt;</span>TreeNode<span class="token operator">></span> nodeList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//广度优先遍历辅助数队列，记录根节点到当前节点的数值</span>
        Deque<span class="token operator">&lt;</span>Integer<span class="token operator">></span> numList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token comment" spellcheck="true">//如果根节点不为空，先将根节点和root.val加入队列</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            nodeList<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
            numList<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>nodeList<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//取出一个节点队列和数队列元素</span>
            TreeNode node <span class="token operator">=</span> nodeList<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> num <span class="token operator">=</span> numList<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//如果取出节点是叶子节点，将对应数值加到最终结果</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token operator">==</span>null <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>right<span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                sum <span class="token operator">+=</span> num<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//否则，如果左节点不为空，节点和运算后的数入队列</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    nodeList<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    numList<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>num<span class="token operator">*</span><span class="token number">10</span><span class="token operator">+</span>node<span class="token punctuation">.</span>left<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//如果左节点不为空，节点和运算后的数入队列</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    nodeList<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    numList<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>num<span class="token operator">*</span><span class="token number">10</span><span class="token operator">+</span>node<span class="token punctuation">.</span>right<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回结果</span>
        <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，访问每个节点一次。</li><li>空间复杂度：O(n)，取决于队列，每个队列中的元素个数不会超过n。</li></ul><h2 id="0130-被围绕的区域"><a href="#0130-被围绕的区域" class="headerlink" title="0130. 被围绕的区域"></a>0130. 被围绕的区域</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/surrounded-regions/">https://leetcode-cn.com/problems/surrounded-regions/</a></p><p><strong>写在前面</strong>：</p><p>本题给定的矩阵中有<strong>三种元素</strong>：</p><ul><li>字母<code>X</code>;</li><li>被字母<code>X</code>包围的字母<code>O</code>；</li><li>没有被字母<code>X</code>包围的字母<code>O</code>；</li></ul><p>题目要求将所有被字母 <code>X</code> 包围的字母 <code>O</code>都变为字母 <code>X</code> ，但很难判断哪些 <code>O</code> 是被包围的，哪些 <code>O</code> 不是被包围的。</p><p>注意题目解释到：**任何边界上的<code>O</code>都不会被填充为 <code>X</code>**。我们可以想到，所有的不被包围的 <code>O</code> 都直接或间接与边界上的 <code>O</code> 相连。我们可以利用这个性质判断 <code>O</code> 是否在边界上，具体地说：</p><ul><li>对于每一个边界上的<code>O</code>，我们以它为起点，标记所有与它直接或间接相连的字母<code>O</code>；</li><li>最后我们遍历这个矩阵，对于每一个字母：</li><li><ul><li>如果该字母被标记过，则字母为为没有被字母<code>X</code> 包围的字母 <code>O</code>，我们将其还原为字母 <code>O</code>；</li><li>如果该字母没有被标记过，则该字母为被字母 <code>X</code> 包围的字母 <code>O</code>，我们将其修改为字母 <code>X</code>。</li></ul></li></ul><p><strong>方法一</strong>：深度优先搜索</p><p>我们可以使用深度优先搜索实现标记操作。用字母<code>A</code>标记（修改）直接或间接被字母<code>X</code>包围字母<code>O</code>。最后将遍历将<code>O</code>修改为<code>X</code>，<code>A</code>修改为<code>O</code>。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//深度优先搜索</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> board<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> m<span class="token operator">=</span>board<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">int</span> n<span class="token operator">=</span>board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//边界条件，满足时'O'不可能被包围，直接返回</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>m<span class="token operator">&lt;=</span><span class="token number">2</span> <span class="token operator">||</span> n<span class="token operator">&lt;=</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//深度优先搜索，标记所有与边界上'O'直接或间接相连的'O'</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//第一列</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//最后一列</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> i<span class="token punctuation">,</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//第一行，去首尾</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//最后一行，去首尾</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//修改标记和被包围的‘O'，注意顺序</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'O'</span><span class="token punctuation">)</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">'X'</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'A'</span><span class="token punctuation">)</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">'O'</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> board<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//边界条件：下标范围和当前字符不为'O'</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">||</span> x<span class="token operator">>=</span>board<span class="token punctuation">.</span>length <span class="token operator">||</span> y<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">||</span> y<span class="token operator">>=</span>board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">||</span> board<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'O'</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//当前字符为'O'，与边界直接或间接相连接。标记为'A'</span>
        board<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">'A'</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//按上、下、左、右顺序搜索与边界直接或间接相连的'O'</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> x<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(m*n)，深度优先搜索过程中，每个点至多只会标记一次。</li><li>空间复杂度：O(m*n)，主要是深度优先搜索的栈开销。</li></ul><p><strong>方法二</strong>：广度优先遍历</p><p>我们也可以使用广度优先搜索实现标记操作。用字母<code>A</code>标记（修改）直接或间接被字母<code>X</code>包围字母<code>O</code>。最后将遍历将<code>O</code>修改为<code>X</code>，<code>A</code>修改为<code>O</code>。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//广度优先搜索</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> board<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> m<span class="token operator">=</span>board<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">int</span> n<span class="token operator">=</span>board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//边界条件，满足时'O'不可能被包围，直接返回</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>m<span class="token operator">&lt;=</span><span class="token number">2</span> <span class="token operator">||</span> n<span class="token operator">&lt;=</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//广度优先搜索坐标范围</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dx<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dy<span class="token operator">=</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//辅助搜索队列，存储边界'O'或直接/间接与边界'O'相连的'O'</span>
        Queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//首先将边界上的'O'存储到队列</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'O'</span><span class="token punctuation">)</span> queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'O'</span><span class="token punctuation">)</span> queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>i<span class="token punctuation">,</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'O'</span><span class="token punctuation">)</span> queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token number">0</span><span class="token punctuation">,</span> j<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>board<span class="token punctuation">[</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'O'</span><span class="token punctuation">)</span> queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//广度优先搜索直接/间接与边界'O'相连的'O'，标记为'A'</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>queue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> pos <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> x<span class="token operator">=</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token operator">=</span>pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            board<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'A'</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//搜索所有相连位置</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">int</span> newX<span class="token operator">=</span>x<span class="token operator">+</span>dx<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> newY<span class="token operator">=</span>y<span class="token operator">+</span>dy<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>newX<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">||</span> newX<span class="token operator">>=</span>m <span class="token operator">||</span> newY<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">||</span> newY<span class="token operator">>=</span>n <span class="token operator">||</span> board<span class="token punctuation">[</span>newX<span class="token punctuation">]</span><span class="token punctuation">[</span>newY<span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'O'</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
                queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>newX<span class="token punctuation">,</span> newY<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//修改标记和被包围的‘O'，注意顺序</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'O'</span><span class="token punctuation">)</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">'X'</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'A'</span><span class="token punctuation">)</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">'O'</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(m*n)，广度优先搜索过程中，每个点至多只会被标记一次。</li><li>空间复杂度：O(m*n)，主要为广度优先搜索的队列的开销。</li></ul><h2 id="0131-分割回文串"><a href="#0131-分割回文串" class="headerlink" title="0131. 分割回文串"></a>0131. 分割回文串</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/palindrome-partitioning/">https://leetcode-cn.com/problems/palindrome-partitioning/</a></p><p><strong>方法一</strong>：回溯算法</p><p>首先画出树形结构，<strong>本题的递归树模型是一棵多叉树</strong>：</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0131-1.6mdjpxu08kc0.png" alt="0131-1"></p><p>解释：</p><ul><li>每个<strong>节点表示</strong>剩余没有扫描到的字符串，<strong>产生分支</strong>是截取了剩余字符串的前缀；</li><li>产生前缀字符串的时候，<strong>判断前缀字符串是否是回文</strong>；</li><li><ul><li>如果前缀字符串是回文，则可以产生分支和节点；</li><li>如果前缀字符串不是回文，则不产生分支和节点，这是一步<strong>剪枝操作</strong>。</li></ul></li><li>在叶子结点是空字符串的时候结算，此时<strong>从根节点到叶子结点的路径，就是结果集里的一个结果，使用深度优先遍历，记录下所有可能的结果。</strong></li><li>使用一个路径变量<code>path</code>搜索，<code>path</code>全局使用一个（注意结算是，要生成一个拷贝），因此在递归指向方法结束以后需要回溯，即将递归之前添加进来的元素拿出去；</li></ul><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>String<span class="token operator">>></span> <span class="token function">partition</span><span class="token punctuation">(</span>String s<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//结果集</span>
        List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>String<span class="token operator">>></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//拼接路径</span>
        List<span class="token operator">&lt;</span>String<span class="token operator">></span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//边界条件</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>len<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> res<span class="token punctuation">;</span>

        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> charArray <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//调用递归</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>charArray<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">,</span> path<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
    * @param charArray
    * @param bgein 起始字符的索引
    * @param len 字符串s的长度，可以设置为全局变量
    * @param path 记录从根节点到叶子结点的路径
    * @param res 记录所有的结果
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> charArray<span class="token punctuation">,</span> <span class="token keyword">int</span> begin<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>String<span class="token operator">></span> path<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>String<span class="token operator">>></span> res<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//边界条件，path中包含字符串所有字符</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>begin <span class="token operator">==</span> len<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>begin<span class="token punctuation">;</span> i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//因为截取字符串是消耗性能的，因此，采用传子串下标的方式判断一个子串是否是回文子串</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">checkPalindrome</span><span class="token punctuation">(</span>charArray<span class="token punctuation">,</span> begin<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>

            path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>charArray<span class="token punctuation">,</span> begin<span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token operator">-</span>begin<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//String(char[] value, int offset, int count)</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>charArray<span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> len<span class="token punctuation">,</span> path<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
            path<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> 
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
    * 这一步时间复杂度是O(n)，优化解法是，先采用动态规划，把回文子串的结果记录在一个表格里
    * @param charArray
    * @param left  子串的左边界，可以取到
    * @param right 子串的右边界，可以取到
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">checkPalindrome</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> charArray<span class="token punctuation">,</span> <span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>left<span class="token operator">&lt;</span>right<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>charArray<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token operator">!=</span>charArray<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            left<span class="token operator">++</span><span class="token punctuation">;</span>
            right<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n*2<sup>n</sup>)，每个位置可拆分也可不拆分，尝试是否可以拆分的时间复杂度是O(2<sup>n</sup>)，判断每个子串是否是回文子串时间复杂度是O(n)。</li><li>空间复杂度：O(n*2<sup>n</sup>)，递归栈空间复杂度O(n)，保存答案需要空间n*2<sup>n</sup>，保守估计，实际不会这么多。</li></ul><h2 id="0139-单词拆分"><a href="#0139-单词拆分" class="headerlink" title="0139. 单词拆分"></a>0139. 单词拆分</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/word-break/">https://leetcode-cn.com/problems/word-break/</a></p><p><strong>方法一</strong>：动态规划</p><p>字符串<code>s</code>能否分解为单词表的单词，即前<code>s.length</code>个字符的字符串能否分解为单词表单词。</p><p>将大问题分解为规模小一点的子问题，规模不同就是长度缩短，问题分解为：</p><ul><li><p>前<code>i</code>个字符的子串，能否分解成单词</p></li><li><p>剩余子串，是否为单个单词</p></li><li><p><code>dp[i]</code>：长度为<code>i</code>的<code>s[0:i-1]</code>子串是否能拆分成单词。题目要我们求:<code>dp[s.length]</code></p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0139-1.7i98sim9p000.png" alt="0139-1"></p><p>「状态转移方程」</p><p>我们用指针<code>j</code>去划分<code>s[0:i]</code>子串，如下图。<code>s[0:i]</code>子串的<code>dp[i+1]</code>是否为真（即是否可以拆分成单词），取决于两点：</p><ul><li>它的前缀子串<code>s[0:j-1]</code>的<code>dp[j]</code>，是否为真。</li><li>剩余子串<code>s[j:i]</code>是否是个单词。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0139-2.102yb8iigk3k.png" alt="0139-2"></p><p>「<code>base case</code>」</p><ul><li><code>dp[0]=true</code>。长度为<code>0</code>的<code>s[0:-1]</code>能拆分成单词表单词。看似荒谬，但这是为了让边界情况也能满足状态转移方程。</li><li>当<code>j=0</code>时(上图黄色部分为空串，<code>j</code>划分的前缀串为空串)，<code>s[0:i]</code>子串的<code>dp[i+1]</code>取决于<code>dp[0]</code>和剩余子串<code>s[0:i]</code>是否是单个单词。</li><li>只有让<code>dp[0]</code>为真，<code>dp[i+1]</code>才会只取决于<code>s[0:i]</code>是否为单个单词，满足了状态转移方程。</li></ul><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//动态规划</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">wordBreak</span><span class="token punctuation">(</span>String s<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>String<span class="token operator">></span> wordDict<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//以HashSet从新实现wordDict，我们不知道传入的wordDict具体如何实现的，字典应该是无重复元素</span>
        Set<span class="token operator">&lt;</span>String<span class="token operator">></span> wordDictSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span>wordDict<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//动态规划布尔数组</span>
        <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">boolean</span><span class="token punctuation">[</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//dp初始条件</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历求dp[1]到dp[s.length]</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//动态规划状态转移条件</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> wordDictList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回结果</span>
        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n<sup>2</sup>)，我们一共有 O(n) 个状态需要计算，每次计算需要枚举O(n) 个分割点，哈希表判断一个字符串是否出现在给定的字符串列表需要O(1) 的时间，因此总时间复杂度为 O(n<sup>2</sup>)。</li><li>空间复杂度：O(n)，动态规划dp数组和哈希集合均需要O(n)的空间复杂度。</li></ul><h2 id="0142-环形链表Ⅱ"><a href="#0142-环形链表Ⅱ" class="headerlink" title="0142 环形链表Ⅱ"></a>0142 环形链表Ⅱ</h2><p><strong>题目地址</strong>：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/linked-list-cycle-ii/">https://leetcode-cn.com/problems/linked-list-cycle-ii/</a></p><p><strong>方法一</strong>：哈希表</p><p>一个直观的思路是，我们遍历链表中的每个节点，并记录在<code>Set</code>集合中，一旦遇到之前遍历过的节点，就判断有环，返回此时的节点。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//哈希表</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> ListNode <span class="token function">detectCycle</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        Set<span class="token operator">&lt;</span>ListNode<span class="token operator">></span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>head<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>set<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//未出现，加入集合</span>
                set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//出现重复，有环，直接返回节点</span>
                <span class="token keyword">return</span> head<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            head <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> null<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)。</li><li>空间复杂度：O(n)。</li></ul><p><strong>方法二</strong>：快慢指针</p><p>如图，假设链表环前有<code>a</code>个节点，环内有<code>b</code>个节点。本题核心思路：<strong>走<code>a+nb</code>步一定处于环入口位置</strong>。</p><ul><li>利用快慢指针<code>fast</code>和<code>slow</code>，<code>fast</code>一次走两步，<code>slow</code>一次走一步；</li><li>当两个指针第一次相遇时，假设<code>slow</code>走了<code>s</code>步，下面计算<code>fast</code>走过的步数<code>f</code></li><li><ul><li><code>fast</code>比<code>slow</code>多走了<code>n</code>个环：<code>f=s+nb</code>；</li><li><code>fast</code>比<code>slow</code>多走一倍的步数：<code>f=2s</code>，联立上式可得<code>s=nb</code>；</li><li>综上，<code>f=2nb</code>，<code>s=nb</code>；也就是两个指针第一次相遇时，都走过了环的倍数，那么在走<code>a</code>步可以到达环的入口（<strong>可以假设<code>n=1</code>时辅助理解</strong>）。</li></ul></li><li>让<code>fast</code>从头再走，<code>slow</code>留在原地，<code>fast</code>和<code>slow</code>均一次走一步，当两个指针相遇时，<code>fast</code>走了<code>a</code>步，<code>slow</code>走了<code>a+nb</code>步。</li><li>此时<code>slow</code>就在环的入口处，返回<code>slow</code>。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0142-1.4ryn7saj1rm0.png" alt="0142-1"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//快慢指针</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> ListNode <span class="token function">detectCycle</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        ListNode slow<span class="token operator">=</span>head<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//设置快慢指针的初始指向</span>
        ListNode fast<span class="token operator">=</span>head<span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//快慢指针同时移动，直到链表末尾或指针相遇（链表有环）</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>fast<span class="token operator">==</span>null <span class="token operator">||</span> fast<span class="token punctuation">.</span>next<span class="token operator">==</span>null<span class="token punctuation">)</span> <span class="token keyword">return</span> null<span class="token punctuation">;</span>
            slow<span class="token operator">=</span>slow<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            fast<span class="token operator">=</span>fast<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>fast<span class="token operator">==</span>slow<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//有环，f=2nb，s=nb，则a+nb指向环入点</span>
        fast<span class="token operator">=</span>head<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//快指针指向头部</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>fast<span class="token operator">!=</span>slow<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//快慢指针同时移动直到快慢指针相遇（slow指向环入点）</span>
            fast<span class="token operator">=</span>fast<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            slow<span class="token operator">=</span>slow<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> slow<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0144-二叉树的前序遍历"><a href="#0144-二叉树的前序遍历" class="headerlink" title="0144. 二叉树的前序遍历"></a>0144. 二叉树的前序遍历</h2><p><strong>0144前序遍历题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-preorder-traversal/">https://leetcode-cn.com/problems/binary-tree-preorder-traversal/</a></p><p><strong>0094中序遍历题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-inorder-traversal/">https://leetcode-cn.com/problems/binary-tree-inorder-traversal/</a></p><p><strong>0145后序遍历题目地址</strong>：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-postorder-traversal/">https://leetcode-cn.com/problems/binary-tree-postorder-traversal/</a></p><p><strong>0102层序遍历题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-level-order-traversal/">https://leetcode-cn.com/problems/binary-tree-level-order-traversal/</a></p><p>解题总结在<code>0094</code>中序遍历！！！</p><h2 id="0145-二叉树的后序遍历"><a href="#0145-二叉树的后序遍历" class="headerlink" title="0145. 二叉树的后序遍历"></a>0145. 二叉树的后序遍历</h2><p><strong>0144前序遍历题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-preorder-traversal/">https://leetcode-cn.com/problems/binary-tree-preorder-traversal/</a></p><p><strong>0094中序遍历题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-inorder-traversal/">https://leetcode-cn.com/problems/binary-tree-inorder-traversal/</a></p><p><strong>0145后序遍历题目地址</strong>：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-postorder-traversal/">https://leetcode-cn.com/problems/binary-tree-postorder-traversal/</a></p><p><strong>0102层序遍历题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-level-order-traversal/">https://leetcode-cn.com/problems/binary-tree-level-order-traversal/</a></p><p>解题总结在<code>0094</code>中序遍历！！！</p><h2 id="0146-LRU缓存机制"><a href="#0146-LRU缓存机制" class="headerlink" title="0146 LRU缓存机制"></a>0146 LRU缓存机制</h2><p><strong>题目地址</strong>：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/lru-cache/">https://leetcode-cn.com/problems/lru-cache/</a></p><p><strong>方法一</strong>：哈希表+双向链表</p><p><code>LRU</code>是一种十分常见的页面置换算法。大白话解释：当不得不淘汰某些数据时(通常是容量已满)，选择最久未使用的数据进行淘汰。</p><p>题目让我们实现一个容量固定的<code>LRUCache</code>。<strong>如果插入数据时，发现容器已满，则先按照LRU规则淘汰一个数据，再将新数据插入，其中「插入」和「查询」都算一次使用</strong>。</p><p><strong>键值对存储方面</strong>，我们可以使用「<strong>哈希表</strong>」来确保插入和查询的时间复杂度为O(1)。</p><p>另外我们还需要额外维护一个「使用顺序」序列。我们期望当「新数据被插入」或「发生键值对查询」时，能够将当前键值对放到序列头部，这样当出发<code>LRU</code>淘汰时，只需要从序列尾部进行数据删除即可。</p><p><strong>期望在O(1)的时间复杂度内调整某个节点在序列中的位置，很自然想到「双向链表」</strong>。</p><p><strong>具体地</strong>，我们使用哈希表存储「键值对」，键值对的键作为哈希表的<code>Key</code>，而哈希表的<code>Value</code>则使用自己封装的<code>Node</code>类，<code>Node</code>同时作为双向链表的节点。数据结构如图所示。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0146-1.6yelbxf2p400.png" alt="0146-1"></p><p>插入——检查当前键值对是否已经存在于哈希表：</p><ul><li>如果存在，则更新键值对，并将当前键值对所对应的<code>Node</code>节点调整到链表头部(<code>refresh</code>操作)</li><li>如果不存在，则检查哈希表是否已经达到容量</li><li><ul><li>没达到容量，插入哈希表，并将当前键值对所对应的<code>Node</code>节点调整到链表头部(<code>refresh</code>操作)</li><li>已达到容量，先从链表尾部找到待删除元素进行删除(<code>delete</code>操作)，然后再插入哈希表，并将当前键值对所对应的<code>Node</code>节点调整到链表头部(<code>refresh</code>操作)</li></ul></li></ul><p>查询——如果没在哈希表中找到该<code>Key</code>，直接返回<code>-1</code>；如果存在该<code>Key</code>，则将对应的值返回，并将当前剪枝对所对应的<code>Node</code>节点调整到链表头部。</p><p>「细节」为了减少双向链表左右节点的判空操作，我们预先建立两个哨兵节点<code>head</code>和<code>tail</code>。</p><p>双向链表删除节点的示意图</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0146-2.37fotd0ehl20.png" alt="0146-2"></p><p>双向链表插入节点的示意图</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0146-3.2bf9lja1vedc.png" alt="0146-3"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">LRUCache</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//双向链表节点定义</span>
        <span class="token keyword">int</span> k<span class="token punctuation">,</span>v<span class="token punctuation">;</span>
        Node left<span class="token punctuation">,</span>right<span class="token punctuation">;</span>
        <span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> _k<span class="token punctuation">,</span> <span class="token keyword">int</span> _v<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            k <span class="token operator">=</span> _k<span class="token punctuation">;</span>
            v <span class="token operator">=</span> _v<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    
    <span class="token keyword">int</span> size<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//缓存大小</span>
    Node head<span class="token punctuation">,</span>tail<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//双向链表头尾节点</span>
    Map<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> Node<span class="token operator">></span> map<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//哈希表，存储键和Node节点</span>
    <span class="token keyword">public</span> <span class="token function">LRUCache</span><span class="token punctuation">(</span><span class="token keyword">int</span> capacity<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//LRUCache缓存类初始化</span>
        size <span class="token operator">=</span> capacity<span class="token punctuation">;</span>
        map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        head <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tail <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        head<span class="token punctuation">.</span>right <span class="token operator">=</span> tail<span class="token punctuation">;</span>
        tail<span class="token punctuation">.</span>left <span class="token operator">=</span> head<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> key<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//map集合中包含key，取出Node，刷新node使用，返回node的值</span>
            Node node <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">refresh</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> node<span class="token punctuation">.</span>v<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//map集合中不包含key，返回-1</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">int</span> key<span class="token punctuation">,</span> <span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        Node node <span class="token operator">=</span> null<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//集合中包含key，取出node，更新node的值</span>
            node <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            node<span class="token punctuation">.</span>v <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span>size<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//缓存已经满了</span>
                Node del <span class="token operator">=</span> tail<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
                map<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>del<span class="token punctuation">.</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">delete</span><span class="token punctuation">(</span>del<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            node <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token function">refresh</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    
    <span class="token comment" spellcheck="true">//refresh分为两步：</span>
    <span class="token comment" spellcheck="true">//1.先将当前节点从双向链表中删除（如果该节点本身存在于双向链表的话）</span>
    <span class="token comment" spellcheck="true">//2.然后将当前节点添加到双向链表的头部</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">refresh</span><span class="token punctuation">(</span>Node node<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token function">delete</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
        node<span class="token punctuation">.</span>right <span class="token operator">=</span> head<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
        node<span class="token punctuation">.</span>left <span class="token operator">=</span> head<span class="token punctuation">;</span>
        head<span class="token punctuation">.</span>right<span class="token punctuation">.</span>left <span class="token operator">=</span> node<span class="token punctuation">;</span>
        head<span class="token punctuation">.</span>right <span class="token operator">=</span> node<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//delete操作：将当前节点从双向链表中删除</span>
    <span class="token comment" spellcheck="true">//由于我们预先建立了head和tail两位哨兵，因此如果node.left不为空，</span>
    <span class="token comment" spellcheck="true">//则代表了node本身存在于双向链表（不是新节点）</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span>Node node<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            Node leftNode <span class="token operator">=</span> node<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
            leftNode<span class="token punctuation">.</span>right <span class="token operator">=</span> node<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
            node<span class="token punctuation">.</span>right<span class="token punctuation">.</span>left <span class="token operator">=</span> leftNode<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(1)，各种操作时间复杂度为O(1)。</li><li>空间复杂度：O(n)。</li></ul><h2 id="0147-对链表进行插入排序"><a href="#0147-对链表进行插入排序" class="headerlink" title="0147. 对链表进行插入排序"></a>0147. 对链表进行插入排序</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/insertion-sort-list/">https://leetcode-cn.com/problems/insertion-sort-list/</a></p><p><strong>方法一</strong>：傀儡头节点</p><p>这道题属于链表题目中的修改指针，首先我们看返回值，如果返回值不是原本链表头的话，我们可以使用<strong>傀儡头节点</strong>。</p><p>我们<strong>维护两个链表</strong>，不断的从原始链表取出元素放入傀儡头节点链表的指定位置。所以我们的算法应该有<strong>两层循环</strong>，外层控制当前需要插入的元素，内层选择插入位置。每次都从傀儡头节点出发，找到插入位置即可（实际记录插入位置的前一个位置，方便插入）。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0147-1.1hx1bt1zresg.png" alt="0147-1"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//傀儡头节点</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> ListNode <span class="token function">insertionSortList</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//傀儡头节点</span>
        ListNode dummyHead <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历原始链表辅助指针</span>
        ListNode cur <span class="token operator">=</span> head<span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>cur<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//记录原始链表遍历节点的下一个节点，防止链表断裂</span>
            ListNode next <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//循环找到当前节点再傀儡头节点链表中的插入位置</span>
            ListNode pos <span class="token operator">=</span> dummyHead<span class="token punctuation">;</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>pos<span class="token punctuation">.</span>next<span class="token operator">!=</span>null <span class="token operator">&amp;&amp;</span> pos<span class="token punctuation">.</span>next<span class="token punctuation">.</span>val<span class="token operator">&lt;</span>cur<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                pos <span class="token operator">=</span> pos<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//修改指向，把当前节点插入到傀儡头节点链表中</span>
            cur<span class="token punctuation">.</span>next <span class="token operator">=</span> pos<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            pos<span class="token punctuation">.</span>next <span class="token operator">=</span> cur<span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//更新当前节点</span>
            cur <span class="token operator">=</span> next<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回结果</span>
        <span class="token keyword">return</span> dummyHead<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n<sup>2</sup>)，n是链表长度。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0148-排序链表"><a href="#0148-排序链表" class="headerlink" title="0148 排序链表"></a>0148 排序链表</h2><p><strong>题目地址</strong>：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/sort-list/">https://leetcode-cn.com/problems/sort-list/</a></p><p><strong>方法一</strong>：归并排序</p><p>这道题直观的想法是新建一个链表，把旧链表的元素逐个插入到新链表指定位置，但这样会超时间复杂度。题目要求时间复杂度为<code>O(nlogn)</code>，很自然会想到二分法，进而想到用归并排序。</p><p>「归并排序」基于分治算法，<strong>两种实现</strong></p><ul><li>自顶向下的归并排序，调用栈空间<code>O(logn)</code>；</li><li>自底向上的归并排序，通过迭代实现；</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0148-1.4c2ynwjo84o0.png" alt="0148-1"></p><p>后者过于复杂，这里采用满足题目时间复杂度的自顶向下方法。利用归并的思想，递归地将当前链表分成两段，然后<code>merge</code>。</p><ul><li><strong>分段的方法是使用快慢指针</strong>，<code>fast</code>每次走两步，<code>slow</code>一次走一步。因为<code>fast</code>遍历节点数是<code>slow</code>的两倍，所有<code>fast</code>遍历到末尾时，<code>slow</code>处于中间位置，这样就将当前链表分成了两段；</li><li><code>merge</code>时，创建一个虚拟头节点<code>dummyHead</code>，穿针引线不断指向两链表中的较小节点，直到其中一个链表为空，继续处理剩余元素，最后返回<code>dummyHead.next</code>。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0148-2.50q4g54rvks0.png" alt="0148-2"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//归并排序</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> ListNode <span class="token function">sortList</span><span class="token punctuation">(</span>ListNode head<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>head<span class="token operator">==</span>null <span class="token operator">||</span> head<span class="token punctuation">.</span>next<span class="token operator">==</span>null<span class="token punctuation">)</span> <span class="token keyword">return</span> head<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//特例</span>

        ListNode slow <span class="token operator">=</span> head<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//快慢指针找到链表中点</span>
        ListNode fast <span class="token operator">=</span> head<span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>fast<span class="token operator">!=</span>null <span class="token operator">&amp;&amp;</span> fast<span class="token punctuation">.</span>next<span class="token operator">!=</span>null <span class="token operator">&amp;&amp;</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//判断条件画图理解</span>
            slow <span class="token operator">=</span> slow<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            fast <span class="token operator">=</span> fast<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        ListNode right <span class="token operator">=</span> <span class="token function">sortList</span><span class="token punctuation">(</span>slow<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//递归右半链表排序</span>
        slow<span class="token punctuation">.</span>next<span class="token operator">=</span>null<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//切断左右链表</span>
        ListNode left <span class="token operator">=</span> <span class="token function">sortList</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//递归左半链表排序</span>
        <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//合并左右有序链表</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> ListNode <span class="token function">merge</span><span class="token punctuation">(</span>ListNode left<span class="token punctuation">,</span> ListNode right<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        ListNode dummyHead <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListNode</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//建立头节点，穿针引线合并有序链表</span>
        ListNode cur <span class="token operator">=</span> dummyHead<span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>left<span class="token operator">!=</span>null <span class="token operator">&amp;&amp;</span> right<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>left<span class="token punctuation">.</span>val<span class="token operator">&lt;</span>right<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                cur<span class="token punctuation">.</span>next <span class="token operator">=</span> left<span class="token punctuation">;</span>
                cur <span class="token operator">=</span> left<span class="token punctuation">;</span>
                left <span class="token operator">=</span> left<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                cur<span class="token punctuation">.</span>next <span class="token operator">=</span> right<span class="token punctuation">;</span>
                cur <span class="token operator">=</span> right<span class="token punctuation">;</span>
                right <span class="token operator">=</span> right<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        cur<span class="token punctuation">.</span>next <span class="token operator">=</span> left<span class="token operator">==</span>null <span class="token operator">?</span> right <span class="token operator">:</span> left<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//处理剩余未合并链表</span>
        <span class="token keyword">return</span> dummyHead<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(nlogn)，其中<code>n</code>是链表长度。</li><li>空间复杂度：O(logn)，主要取决于递归调用的栈空间。</li></ul><h2 id="0150-逆波兰表达式求值"><a href="#0150-逆波兰表达式求值" class="headerlink" title="0150. 逆波兰表达式求值"></a>0150. 逆波兰表达式求值</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/evaluate-reverse-polish-notation/">https://leetcode-cn.com/problems/evaluate-reverse-polish-notation/</a></p><p><strong>方法一</strong>：栈</p><p>逆波兰表达式由波兰的逻辑学家卢卡维兹提出。<strong>逆波兰表达式的特点是</strong>：没有括号，运算符总是放在和它相关的操作数之后，因此<strong>也称后缀表达式</strong>。</p><p>逆波兰表达式严格遵循「从左到右」的运算。使用一个栈存储操作数，从左到右遍历逆波兰表达式，进行如下操作：</p><ul><li>如果遇到操作数，直接入栈</li><li>如果遇到运算符，则将两个操作数出栈，先出栈的是右操作数，后出栈的是左操作数，使用运算符对两个操作数进行运算，最后将运算得到的新操作数入栈。</li></ul><p>整个逆波兰表达式<strong>遍历完毕之后，栈内只有一个元素</strong>，该元素即为逆波兰表达式的值。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">evalRPN</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> tokens<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//辅助操作数栈</span>
        Deque<span class="token operator">&lt;</span>Integer<span class="token operator">></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//从左往右遍历逆波兰表达式，运算入栈</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>tokens<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//自定义函数判断当前字符串是否为数字字符串</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isNumber</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//是，直接入栈</span>
                stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//否，弹栈运算，结果入栈</span>
                <span class="token keyword">int</span> rightNumber <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">int</span> leftNumber <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">switch</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    <span class="token keyword">case</span> <span class="token string">"+"</span><span class="token operator">:</span>
                        stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>leftNumber <span class="token operator">+</span> rightNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token keyword">case</span> <span class="token string">"-"</span><span class="token operator">:</span>
                        stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>leftNumber <span class="token operator">-</span> rightNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token keyword">case</span> <span class="token string">"*"</span><span class="token operator">:</span>
                        stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>leftNumber <span class="token operator">*</span> rightNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token keyword">case</span> <span class="token string">"/"</span><span class="token operator">:</span>
                        stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>leftNumber <span class="token operator">/</span> rightNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token keyword">default</span><span class="token operator">:</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回最后栈中结果</span>
        <span class="token keyword">return</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">isNumber</span><span class="token punctuation">(</span>String s<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"+"</span><span class="token punctuation">)</span> <span class="token operator">||</span> s<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span> <span class="token operator">||</span> s<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span> <span class="token operator">||</span> s<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，其中n是数组tokens的长度，需要遍历数组一次，计算逆波兰表达式的值。</li><li>空间复杂度：O(n)，使用栈存储计算过程中的数，栈内元素不会超过n。</li></ul><h2 id="0152-乘积最大子数组"><a href="#0152-乘积最大子数组" class="headerlink" title="0152. 乘积最大子数组"></a>0152. 乘积最大子数组</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/maximum-product-subarray/">https://leetcode-cn.com/problems/maximum-product-subarray/</a></p><p><strong>方法一</strong>：动态规划</p><p>遍历数组时计算最大值，不断更新。</p><ul><li>令<code>imax</code>为<strong>当前最大值</strong>，则当前最大值为<code>imax=Math.max(imax*nums[i], nums[i])</code></li><li><strong>由于存在负数</strong>，那么会导致最大的变最小的，最小的变最大的。因此还需要维护<strong>当前最小值</strong><code>imin</code>，<code>imin=Math.min(imin*nums[i], nums[i])</code></li><li>当负数出现时，先将<code>imax</code>和<code>imin</code>交换，再计算当前最大值和当前最小值，最大值为<code>Math.max(max, imax)</code>。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0152-1.6pidy9a8nzk0.png" alt="0152-1"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxProduct</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//初始条件，最大值，当前最大值和当前最小值</span>
        <span class="token keyword">int</span> max <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> imax <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> imin <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历数组，更新最大值</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//当遇到负数，当前最大值和当前最小值会交换</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">int</span> temp <span class="token operator">=</span> imax<span class="token punctuation">;</span>
                imax <span class="token operator">=</span> imin<span class="token punctuation">;</span>
                imin <span class="token operator">=</span> temp<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//更新当前最大值和当前最小值</span>
            imax <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>imax<span class="token operator">*</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            imin <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>imin<span class="token operator">*</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//更新最大值</span>
            max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>max<span class="token punctuation">,</span> imax<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> max<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0153-寻找旋转排序数组中的最小值"><a href="#0153-寻找旋转排序数组中的最小值" class="headerlink" title="0153 寻找旋转排序数组中的最小值"></a>0153 寻找旋转排序数组中的最小值</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/">https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/</a></p><p><strong>方法一</strong>：二分查找</p><p>用二分查找，需要始终将目标值（<strong>这里是最小值</strong>）套住，并不断收缩左边界或右边界。</p><p>一个不包含重复元素的升序数组在经过旋转之后，可以得到下面可视化的折线图。横轴表示索引，纵轴表示数组元素的值。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0153-1.6pxugxcpkp80.png" alt="0153-1"></p><p>我们考虑<strong>数组中的最后一个元素</strong> <code>x</code>：在最小值右侧的元素（不包括最后一个元素本身），它们的值一定都严格小于<code>x</code>；而在最小值左侧的元素，它们的值一定都严格大于 <code>x</code>。因此，我们可以根据这一条性质，通过二分查找的方法找出最小值。</p><p>在二分查找每一步中，左边界 <code>left</code>，右边界<code>right</code>，区间中点<code>mid</code>，最小值就在该区间内。我们将中点元素<code>nums[mid]</code>与右边界元素<code>nums[right]</code>比较，可能会有两种情况：</p><ul><li>第一种情况<code>nums[mid]&lt;nums[high]</code>，如下图所示，说明<code>nums[mid]</code>是最小值右侧的元素，右边界左移<code>right=mid</code>；</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0153-2.4gn788dxc8i0.png" alt="0153-2"></p><ul><li>第二种情况<code>nums[mid]&gt;nums[high]</code>，如下图所示，说明<code>nums[mid]</code>是最小值左侧的元素，左边界右移<code>left=mid+1</code>;</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0153-3.7kl4voqcwu40.png" alt="0153-3"></p><p>由于数组不包含重复元素，并且只要当前区间长度不为<code>1</code>，<code>mid</code>就不会与<code>high</code>重合，而如果当前区间长度为<code>1</code>，说明我们可以结束二分查找了。因此不会存在<code>nums[mid]=nums[high]</code>的情况。</p><p><strong>变种</strong>：找最大值，先找最小值，索引减一为最大值位置。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findMin</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//左右边界和中点</span>
        <span class="token keyword">int</span> left<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> right<span class="token operator">=</span>nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//二分查找</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>left<span class="token operator">&lt;</span>right<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            mid <span class="token operator">=</span> <span class="token punctuation">(</span>left<span class="token operator">+</span>right<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//利用最后一个元素x，最小值右侧元素（不包含x）都比x小，最小值左侧元素都比x大</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token operator">&lt;</span>nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                right <span class="token operator">=</span> mid<span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                left <span class="token operator">=</span> mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//退出循环left=right</span>
        <span class="token keyword">return</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(long)，二分查找，每次会忽略一般区间。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0198-打家劫舍"><a href="#0198-打家劫舍" class="headerlink" title="0198 打家劫舍"></a>0198 打家劫舍</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/house-robber/">https://leetcode-cn.com/problems/house-robber/</a></p><p><strong>方法一</strong>：动态规划</p><p>这道题是不错的动态规划入门题目。<strong>动态规划题目的四个基本步骤</strong>：</p><ul><li>定义子问题</li><li>写出子问题的递推关系</li><li>确定<code>DP</code>数组的计算顺序</li><li>空间优化（可选）</li></ul><p>针对改题目，一步一步讲解。</p><p>步骤一：<strong>定义子问题</strong></p><p><strong>什么是子问题</strong>？子问题是和原问题相似，但规模较小的问题。例如这道小偷问题，原问题是“从全部房子中能偷到的最大金额”，将问题的规模缩小，子问题就是“从<code>k</code>个房子中能偷到的最大金额”，用<code>f(k)</code>表示。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0198-1.4i8pc3f6lmk0.png" alt="0198-1"></p><p>可以看到，子问题是参数化的，我们定义的子问题中有参数 <code>k</code>。假设一共有 <code>n</code> 个房子的话，就一共有 <code>n</code> 个子问题。动态规划实际上就是通过求这一堆子问题的解，来求出原问题的解。这要求子问题需要具备两个性质：</p><ul><li>原问题能由子问题表示。</li><li>一个子问题的解要能通过其他子问题的解求出。</li></ul><p>小偷问题由于比较简单，定义子问题实际上是很直观的。一些比较难的动态规划题目可能需要一些定义子问题的技巧。</p><p>步骤二：<strong>写出子问题的递归关系</strong></p><p>这一步是求解动态规划问题的关键一步。然而，这一步也是最无法再代码中体现出来的一步。最好把这一步的思路注释在代码中。</p><p>我们来分析一下这道小偷问题的递推关系：</p><p>假设一共有<code>n</code>个房子，每个房子的金额分别为H<sub>0</sub>，H<sub>1</sub>，…，H<sub>n-1</sub>，子问题<code>f(k)</code>表示从前<code>k</code>个房子（即H<sub>0</sub>，H<sub>1</sub>，…，H<sub>k-1</sub>）中能偷到的最大金额。那么，偷低<code>k</code>间房子有两种偷法：</p><ul><li>不偷第<code>k</code>间房，问题变为前<code>k-1</code>个房子中偷到的最大的金额，也就是子问题<code>f(k-1)</code></li><li>偷第k间房，那么第<code>k-1</code>个房子的H<sub>k-2</sub>显然不能偷，其他房子不受影响。问题变为在<code>k-2</code>个房子中偷盗的最大金额，加上第<code>k</code>间房偷到的金额。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0198-2.2y9qid8zcg20.png" alt="0198-2"></p><p>两种情况，取最大值：<br>$$<br>f(k)=\max \left{f(k-1), H_{k-1}+f(k-2)\right}<br>$$<br>写递归关系的时候，要注意<code>k=0</code>和<code>k=1</code>的基本情况：</p><ul><li>当<code>k=0</code>时，没有房子，所以<code>f(0)=0</code>；</li><li>当<code>k=1</code>时，只有一个贩子，偷这个房子即可，所以<code>f(1)=H0</code></li></ul><p>这样才能构成完整的递归关系，后面写代码也不容易在边界条件上出错。</p><p>步骤三：<strong>确定DP数组的计算顺序</strong></p><p>在确定了子问题的递推关系之后，下一步就是依次计算出这些子问题了。在很多教程中都会写，动态规划有两种计算顺序，一种是自顶向下的、使用备忘录的递归方法，一种是自底向上的、使用 <code>dp</code> 数组的循环方法。不过<strong>在普通的动态规划题目中，<code>99%</code>的情况我们都不需要用到备忘录方法</strong>，所以我们最好坚持用自底向上的 <code>dp</code> 数组。</p><p>对于小偷问题，我们分析子问题的依赖关系，发现每个<code>f(k)</code>依赖<code>f(k-1)</code>和<code>f(k-2)</code>。也就是说，<code>dp[k]</code>依赖<code>dp[k-1]</code>和<code>dp[k-2]</code>，如下图所示。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0198-3.1xwgkujnq7gg.png" alt="0198-3"></p><p>那么，既然 <code>DP</code>数组中的<strong>依赖关系都是向右指的</strong>，<code>DP</code>数组的计算顺序就是从左向右。这样我们可以保证，计算一个子问题的时候，它所依赖的那些子问题已经计算出来了。</p><p>确定了 <code>DP</code> 数组的计算顺序之后，我们就可以写出题解代码了。</p><p>步骤四：<strong>空间优化</strong></p><p>空间优化是动态规划问题的进阶内容。</p><p>空间优化的基本原理是，很多时候，我们并不需要始终持有全部的<code>DP</code>数组，对于小偷问题，我们发现，最后一步计算<code>f(n)</code>的时候，实际上只用到了<code>f(n−1)</code> 和<code>f(n−2)</code> 的结果。<code>n−3</code>之前的子问题，实际上早就已经用不到了。那么，<strong>我们可以只用两个变量保存两个子问题的结果，就可以依次计算出所有的子问题</strong>。下面的动图比较了空间优化前和优化后的对比关系：</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0198-4.2k9azo5fpwi0.gif" alt="0198-4"></p><p>这样一来，空间复杂度也从<code>O(n)</code>降到了<code>O(1)</code>。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//动态规划+数组</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rob</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//数组为null或长度为0</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums <span class="token operator">==</span> null <span class="token operator">||</span> nums<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//数组长度为1</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//动态规划数组初始化</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//决定是否强第i个房屋</span>
            <span class="token comment" spellcheck="true">//不抢，最高金额为dp[i-1]</span>
            <span class="token comment" spellcheck="true">//抢，则前一个房屋不能抢，最高金额为dp[i-2]+nums[i]</span>
            <span class="token comment" spellcheck="true">//第i个房间可以抢到的最大值为两种情况的最值</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回动态规划数组的最后一个元素</span>
        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//动态规划+空间优化</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rob</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//数组为null或长度为0</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token operator">==</span>null <span class="token operator">||</span> nums<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//数组长度为1</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>len<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//两个动态规划辅助变量</span>
        <span class="token keyword">int</span> second <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> first <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//保存first的值</span>
            <span class="token keyword">int</span> temp<span class="token operator">=</span> first<span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//第i个房屋抢不抢的情况的最值, 更新两个辅助变量</span>
            first <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>second<span class="token operator">+</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> first<span class="token punctuation">)</span><span class="token punctuation">;</span>
            second <span class="token operator">=</span> temp<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回最值</span>
        <span class="token keyword">return</span> first<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，遍历房间一次。</li><li>空间复杂度：优化前O(n)，优化后O(1)。</li></ul><h2 id="0199-二叉树的右视图"><a href="#0199-二叉树的右视图" class="headerlink" title="0199. 二叉树的右视图"></a>0199. 二叉树的右视图</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-right-side-view/">https://leetcode-cn.com/problems/binary-tree-right-side-view/</a></p><p><strong>方法一</strong>：广度优先搜索</p><p>利用<code>BFS</code>进行层次遍历，记录下每层的最后一个元素。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"> <span class="token comment" spellcheck="true">//BFS:广度优先搜索</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> <span class="token function">rightSideView</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//结果集合</span>
        List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//辅助层次遍历队列</span>
        Queue<span class="token operator">&lt;</span>TreeNode<span class="token operator">></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//加入头结点</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">!=</span>null<span class="token punctuation">)</span> queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//层次遍历</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>queue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> curSize <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>curSize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                TreeNode node <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//记录该层最后一个节点值</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">==</span>curSize<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token operator">!=</span>null<span class="token punctuation">)</span> queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token operator">!=</span>null<span class="token punctuation">)</span> queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回结果集合</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，访问每个节点一次。</li><li>空间复杂度：O(n)，队列使用空间。</li></ul><p><strong>方法二</strong>：深度优先遍历</p><p>我们按照<strong>「根-&gt;右-&gt;左」</strong>的顺序访问，就可以保证每层都是最先访问最右边的节点。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//DFS:深度优先搜索</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> <span class="token function">rightSideView</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//结果集合</span>
        List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//调用递归</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回结果集合</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">,</span> <span class="token keyword">int</span> depth<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> res<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//边界条件</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">==</span>null<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//先访问当前节点，再递归地访问 右子树 和 左子树。</span>
        <span class="token comment" spellcheck="true">//如果当前节点所在深度还没有出现在res里，说明在该深度下当前节点是第一个被访问的节点，</span>
        <span class="token comment" spellcheck="true">//因此将当前节点加入res中。</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>depth<span class="token operator">==</span>res<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        depth<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span> depth<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span> depth<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，每个节点都访问了1次。</li><li>空间复杂度：O(n)，递归栈空间，树的高度。</li></ul><h2 id="0200-岛屿数量"><a href="#0200-岛屿数量" class="headerlink" title="0200. 岛屿数量"></a>0200. 岛屿数量</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/number-of-islands/">https://leetcode-cn.com/problems/number-of-islands/</a></p><p><strong>方法一</strong>：深度优先搜索</p><p>如图，我们其实要求的是红色区域的个数，换句话说就是求连续区域的个数。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0200-1.43q94vy0dtm0.png" alt="0200-1"></p><p>符合直觉的做法是用DFS来解：</p><ul><li>我们需要建立一个<code>isVisited</code>数组用来记录某个位置是否被访问过；</li><li>对于为<code>1</code>且未被访问过的位置，将<code>isVisited</code>置为<code>true</code>，然后我们递归进入其上下左右位置上为<code>1</code>的位置，将<code>isVisited</code>置为<code>true</code>；</li><li>找完相邻区域后，我么将结果<code>res</code>自增<code>1</code>，然后继续寻找下一个为<code>1</code>且未被访问过的位置，直到遍历完二维网格。</li></ul><p>但是这道题目只是让我们求连通区域的个数，因此<strong>我们其实不需要额外的空间存储<code>isVisited</code>信息</strong>。注意到上面的过程，我们对数字<code>0</code>不会进行操作，也就是对我们“没用”，<strong>因此对于已经访问过的元素，我们可以将其置为<code>0</code>即可</strong>。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//深度优先搜索</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">numIslands</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> grid<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//特殊情况</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>grid<span class="token operator">==</span>null <span class="token operator">||</span> grid<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> m <span class="token operator">=</span> grid<span class="token punctuation">.</span>length<span class="token punctuation">,</span> n <span class="token operator">=</span> grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历二维网格，求连通区域个数</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    <span class="token comment" spellcheck="true">//求当前1的所有连通位置</span>
                    <span class="token function">dfs</span><span class="token punctuation">(</span>grid<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment" spellcheck="true">//结果+1</span>
                    res<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> grid<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//边界条件</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">||</span> i<span class="token operator">>=</span>grid<span class="token punctuation">.</span>length <span class="token operator">||</span> j<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">||</span> j<span class="token operator">>=</span>grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">||</span> grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'1'</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//与当前连接的1置为0</span>
        grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'0'</span><span class="token punctuation">;</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>grid<span class="token punctuation">,</span> i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//上</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>grid<span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//下</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>grid<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//左</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>grid<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//右</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(mn)，其中<code>m</code>和<code>n</code>分别为行数和列数。</li><li>空间复杂度：O(mn)，在最坏情况下，整个网格均为陆地，深度优先搜索的深度达到<code>mn</code>。</li></ul><h2 id="0201-数字范围按位与"><a href="#0201-数字范围按位与" class="headerlink" title="0201. 数字范围按位与"></a>0201. 数字范围按位与</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/bitwise-and-of-numbers-range/">https://leetcode-cn.com/problems/bitwise-and-of-numbers-range/</a></p><p><strong>方法一</strong>：位运算</p><p>最直观做法是迭代范围内的每个数字，依次进行按位与运算，得到最终结果。但是这种方案在范围较大的测试用例中会因超过时间限制而无法通过。因此需要另寻他路。</p><p>回到本题，首先我们可以对范围内的每个数字用二进制的字符串表示，例如 <code>9=00001001</code><sub><code>(2)</code></sub>，然后我们将每个二进制字符串的位置对齐。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0201-1.6trhyssa7680.png" alt="0201-1"></p><p>在上图的例子中，我们可以发现，对所有数字执行按位与运算的结果是所有对应二进制字符串的公共前缀再用零补上后面的剩余位。</p><p>进一步来说，所有这些二进制字符串的公共前缀也即指定范围的起始和结束数字 <code>m</code> 和 <code>n</code>的公共前缀（即在上面的示例中分别为 <code>9</code> 和 <code>12</code>）。</p><p>因此，最终我们的问题重新表述为：<strong>给定两个整数，我们要找到它们对应的二进制字符串的公共前缀</strong>。</p><p>我们的想法将两个数字不断向右移动，直到数字相等，即数字的二进制字符串的公共前缀。然后通过公共前缀向左移动，将零添加到公共前缀的右边以获得最终结果。算法由两个步骤组成：</p><ul><li>右移，将两个数字压缩为它们的公共前缀，在迭代过程中，我们计算执行的右移操作次数；</li><li>将公共前缀左移相同的操作次数得到结果。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0201-2.46ecrm1uudy0.png" alt="0201-2"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//位运算</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rangeBitwiseAnd</span><span class="token punctuation">(</span><span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//记录求公共前缀的右移次数</span>
        <span class="token keyword">int</span> shift <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//不断右移，得到两个数的公共前缀</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>left<span class="token operator">!=</span>right<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            left <span class="token operator">>>=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            right <span class="token operator">>>=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            shift<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//公共前缀左移shift次补零，得到最终结果</span>
        <span class="token keyword">return</span> left <span class="token operator">&lt;&lt;</span> shift<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(1)，取决于<code>m</code>和<code>n</code>的二进制位数，有限。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0207-课程表"><a href="#0207-课程表" class="headerlink" title="0207 课程表"></a>0207 课程表</h2><p><strong>题目地址</strong>：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/course-schedule/">https://leetcode-cn.com/problems/course-schedule/</a></p><p>「本题可约化为」：课程安排图是否是<strong>有向无环图（DAG）</strong>。即课程规定了前置条件，但不能构成任何环路，否则课程前置条件不成立。思路是通过<strong>拓扑排序</strong>判断此课程安排图是否是<strong>有向无环图（DAG）</strong>。</p><p>通过课程的前置条件列表<code>prerequisites</code>可以得到课程安排图的<strong>邻接表</strong><code>adjacency</code>，一降低时间复杂度，以下两种方法都会用到邻接表。</p><p><strong>方法一</strong>：广度优先搜索（容易理解些）</p><p>算法流程</p><ul><li>统计课程安排图中每个节点的入度，生成<strong>入度表</strong><code>indegrees</code>；</li><li>借助一个队列<code>queue</code>，将所有入度为<code>0</code>的节点入队；</li><li>当<code>queue</code>非空时，依次将队首节点出队，在课程安排图中“删除”此节点<code>pre</code>；</li><li><ul><li>并不是真正从邻接表中删除此节点<code>pre</code>，而是将此节点对应的所有邻接节点<code>cur</code>的入度减<code>1</code>，即<code>indegrees[cur] -= 1</code></li><li>当入度减<code>1</code>后邻接节点<code>cur</code>的入度为<code>0</code>，说明<code>cur</code>所有的前驱节点已经被“删除”，此时将<code>cur</code>入队</li></ul></li><li>在每次<code>pre</code>出队时，执行<code>numCourses--</code>；</li><li><ul><li>若整个课程安排图是有向无环图（即可以安排），则所有节点一定都入队并出队过，即完成拓扑排序。换个角度说，若课程安排图中存在环，一定有节点的入度始终不为<code>0</code></li><li>因此，拓扑排序出队次数等于课程个数，返回<code>numCourses==0</code>判断课程是否可以成功安排</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0207-1.6vpb5w9dpo00.png" alt="0207-1"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">canFinish</span><span class="token punctuation">(</span><span class="token keyword">int</span> numCourses<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> prerequisites<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> indegrees <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>numCourses<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//入度表</span>
        List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> adjacency <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//邻接矩阵</span>
        Queue<span class="token operator">&lt;</span>Integer<span class="token operator">></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//入度为零的队列</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>numCourses<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//初始化邻接矩阵</span>
            adjacency<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      

        <span class="token comment" spellcheck="true">//根据课程安排获得入度表和邻接矩阵,cp[1]-->cp[0]</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cp <span class="token operator">:</span> prerequisites<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            indegrees<span class="token punctuation">[</span>cp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//入度++</span>
            adjacency<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//邻接表更新</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//入度为0的节点入队列</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>numCourses<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>indegrees<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> queue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//BFS广度优先，拓扑排序TopSort，时间复杂度和空间复杂度为O(n+m)，节点+边</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>queue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> pre <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//出队一个入度为0的节点</span>
            numCourses<span class="token operator">--</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//课程数量减1</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> cur <span class="token operator">:</span> adjacency<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>pre<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//出队节点指向的节点入度均减1</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">--</span>indegrees<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> queue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//如果某节点入度减到0，入队</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> numCourses<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n+m)，遍历一个图需要访问所有节点和所有临边，<code>n</code>和<code>m</code>分别为节点数量和临边数量。</li><li>空间复杂度：O(n+m)，为建立邻接表所需额外空间，<code>adjacency</code>长度为<code>n</code>，并存储<code>m</code>条临边的数据。</li></ul><p><strong>方法二</strong>：深度优先搜索（不易理解）</p><p>原理是通过<code>DFS</code>判断图中是否有环，算法流程详见<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/course-schedule/solution/course-schedule-tuo-bu-pai-xu-bfsdfsliang-chong-fa/">https://leetcode-cn.com/problems/course-schedule/solution/course-schedule-tuo-bu-pai-xu-bfsdfsliang-chong-fa/</a></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//深度优先搜索</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">canFinish</span><span class="token punctuation">(</span><span class="token keyword">int</span> numCourses<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> prerequisites<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//标志列表，0未被访问，-1被其他起点的DFS访问，1被当前起点DFS访问</span>
        <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> flags <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">boolean</span><span class="token punctuation">[</span>numCourses<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//邻接表建立</span>
        List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> adjacency <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>numCourses<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            adjacency<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cp <span class="token operator">:</span> prerequisites<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            adjacency<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//DFS，对所有节点为起点深度优先遍历</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>numCourses<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">dfs</span><span class="token punctuation">(</span>adjacency<span class="token punctuation">,</span> flags<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">dfs</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> adjacency<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> flags<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//本轮DFS第二次访问节点i，有环</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前节点已被其他DFS访问，直接返回True</span>

        flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前访问节点i对应flag置1</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>Integer j <span class="token operator">:</span> adjacency<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//节点i所有邻接节点</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">dfs</span><span class="token punctuation">(</span>adjacency<span class="token punctuation">,</span> flags<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//发现环直接返回false</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前节点所有邻接节点已被遍历，没有环，当前节点置为-1，并且返回true</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n+m)，遍历一个图需要访问所有节点和所有临边，<code>n</code> 和 <code>m</code>分别为节点数量和临边数量；</li><li>空间复杂度：O(n+m)，为建立邻接表所需额外空间，<code>adjacency</code>长度为<code>n</code>，并存储<code>m</code>条临边的数据。</li></ul><h2 id="0208-实现-Trie-前缀树"><a href="#0208-实现-Trie-前缀树" class="headerlink" title="0208. 实现 Trie (前缀树)"></a>0208. 实现 Trie (前缀树)</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/implement-trie-prefix-tree/">https://leetcode-cn.com/problems/implement-trie-prefix-tree/</a></p><p><strong>方法一</strong>：字典树</p><p><code>Trie</code>，又称前缀树或字典树，是<code>一颗有根树</code>，其每个节点<strong>包含以下字段</strong>：</p><ul><li>指向子节点的指针数组<code>children</code>。对于本题而言，数组长度为26，即小写英文字母的数量。此时<code>children[0]</code>对应小写字母<code>a</code>，<code>children[1]</code>对应小写字母<code>b</code>，…，<code>children[25]</code>对应小写字母<code>z</code>。</li><li>布尔字段isEnd，表示该节点是否为字符串的结尾。</li></ul><p>前缀树的<strong>优点</strong>：利用字符串的公共前缀来节约存储空间，缩小查词范围，从而达到高效检索的目的。</p><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0208-1.14vk6fln0nmk.png" alt="0208-1"></p><p>前缀树操作实现：</p><ul><li><strong>插入</strong>：每遍历字符串中的一个字母，<strong>若该字母没有出现过</strong>，则就在对应的空位置往下生成一个<code>Trie</code>；<strong>若该字母出现过</strong>，则直接遍历下一个字母，直到字符串遍历结束（<strong>注意：结束时要标记为<code>isEnd=true</code>，表示这个单词已经结束了</strong>）。</li><li><strong>查找</strong>：遍历要查找的字符串<code>word</code>，<strong>若还未遍历到<code>end</code><strong>，在某个字符处出现了<code>null</code>，则直接返回<code>false</code>，当前这个位置没有该字符，无法查找到这个单词。</strong>否则，一直遍历到查找字符串<code>word</code>的末尾</strong>，若当前这个位置<code>isEnd==true</code>，表示在前缀树中找到了该单词<code>word</code>，如当前这个位置<code>isEnd==false</code>，表示没有这个单词。</li><li><strong>前缀匹配</strong>：遍历需要前缀匹配的字符串<code>prefix</code>，**只要在某字母的位置出现了<code>null</code>，则直接返回<code>false</code>**（因为该位置没有该字符，无法找到这个前缀）；否则，直到<code>prefix</code>全部遍历完成后都没有返回<code>false</code>的话，则表示当前字典树中有该前缀字符串，返回<code>true</code>即可。</li></ul><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Trie</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//两个字段</span>
    Trie<span class="token punctuation">[</span><span class="token punctuation">]</span> children<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//26个字母</span>
    <span class="token keyword">boolean</span> isEnd<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//是否是字符串结尾</span>

    <span class="token comment" spellcheck="true">//初始化</span>
    <span class="token keyword">public</span> <span class="token function">Trie</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        children <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Trie</span><span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        isEnd <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    
    <span class="token comment" spellcheck="true">//插入单词字符串</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span>String word<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//当前节点</span>
        Trie node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历单词字符串，生成孩子节点</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>word<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//字母索引</span>
            <span class="token keyword">int</span> index <span class="token operator">=</span> word<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">-</span><span class="token string">'a'</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//当前索引没有出现该字母，加入孩子节点</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>children<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                node<span class="token punctuation">.</span>children<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Trie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//更新当前节点</span>
            node <span class="token operator">=</span> node<span class="token punctuation">.</span>children<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//字符串结尾，isEnd字段置为true</span>
        node<span class="token punctuation">.</span>isEnd <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    
    <span class="token comment" spellcheck="true">//查找单词字符串</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">search</span><span class="token punctuation">(</span>String word<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//当前节点</span>
        Trie node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历单词字符串</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>word<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//字母索引</span>
            <span class="token keyword">int</span> index <span class="token operator">=</span> word<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">-</span><span class="token string">'a'</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//当前索引没有出现该字母，直接返回false</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>children<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//更新当前节点</span>
            node <span class="token operator">=</span> node<span class="token punctuation">.</span>children<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历到结尾，返回当前节点的isEnd，如果是单词结尾，返回true，否则返回false</span>
        <span class="token keyword">return</span> node<span class="token punctuation">.</span>isEnd<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    
    <span class="token comment" spellcheck="true">//前缀匹配</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">startsWith</span><span class="token punctuation">(</span>String prefix<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//当前节点</span>
        Trie node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历前缀</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>prefix<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//字母索引</span>
            <span class="token keyword">int</span> index <span class="token operator">=</span> prefix<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">-</span><span class="token string">'a'</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//当前索引没有出现该字母，直接返回false</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>children<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//更新当前节点</span>
            node <span class="token operator">=</span> node<span class="token punctuation">.</span>children<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历到前缀结尾，直接返回true</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(|S|)，<code>|S|</code>时每次插入或查询字符串的长度。</li><li>空间复杂度：O(|T|·∑)，<code>|T|</code>为所有插入字符串的长度之和，<code>∑</code>为字符集大小，本题<code>26</code>。</li></ul><h2 id="0209-长度最小的子数组"><a href="#0209-长度最小的子数组" class="headerlink" title="0209. 长度最小的子数组"></a>0209. 长度最小的子数组</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/minimum-size-subarray-sum/">https://leetcode-cn.com/problems/minimum-size-subarray-sum/</a></p><p><strong>方法一</strong>：滑动窗口</p><p>定义两个指针<code>left</code>和<code>right</code>分别表示子数组（滑动窗口窗口）的开始位置和结束位置，维护遍历<code>sum</code>存储子数组中的元素和（即从<code>nums[left]</code>到<code>nums[right]</code>的元素和）。</p><p>初始状态下，<code>left</code>和<code>right</code>都指向下标<code>0</code>，<code>sum</code>的值为<code>0</code>。</p><ul><li>移动右指针，扩大窗口，直到子数组达到目标值<code>target</code>；</li><li>移动左指针，缩小窗口，直到子数组不满足目标值；</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0209-1.1z1m9k35u08w.gif" alt="0209-1"></p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//滑动窗口</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">minSubArrayLen</span><span class="token punctuation">(</span><span class="token keyword">int</span> target<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//长度最小的子数组，初始化为整数最大值</span>
        <span class="token keyword">int</span> min <span class="token operator">=</span> Integer<span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//初始化滑动窗口指针和窗口内元素和sum</span>
        <span class="token keyword">int</span> left<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> right<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> sum<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//滑动右指针，直到sum>=target</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>right<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            sum <span class="token operator">+=</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//滑动左指针，直到sum&lt;target</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>sum<span class="token operator">>=</span>target<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//更新窗口元素和大于目标值的窗口最小值</span>
                min <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>min<span class="token punctuation">,</span> right<span class="token operator">-</span>left<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                sum <span class="token operator">-=</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">;</span>
                left<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            right<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回满足条件的最小子数组长度，注意min没有更新时返回0</span>
        <span class="token keyword">return</span> min<span class="token operator">==</span>Integer<span class="token punctuation">.</span>MAX_VALUE <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> min<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，<code>n</code>是数组长度，指针<code>left</code>和<code>right</code>最多各移动<code>n</code>次。</li><li>空间复杂度：O(1)。</li></ul><h2 id="0211-添加与搜索单词-数据结构设计"><a href="#0211-添加与搜索单词-数据结构设计" class="headerlink" title="0211. 添加与搜索单词 - 数据结构设计"></a>0211. 添加与搜索单词 - 数据结构设计</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/design-add-and-search-words-data-structure/">https://leetcode-cn.com/problems/design-add-and-search-words-data-structure/</a></p><p><strong>方法一</strong>：前缀树</p><p>当调用<code>addWord()</code>方法时：</p><ul><li>遍历字符串单词<code>word</code>，<strong>若当前遍历的字符在前缀树的<code>children[26]</code>中对应位置为空</strong>，此时需要在该位置定义一个<code>Trie()</code>表示这个位置已经有了字符；</li><li>在将<code>word</code>全部遍历完时退出循环，**将该字符串最后一个位置上的字符的<code>isEnd</code>设置为<code>true</code>**表示该字符串在这里结束了。</li></ul><p>当调用<code>search()</code>方法时：</p><ul><li><strong>若当前遍历的字符不是<code>&#39;.&#39;</code>并且该位置上也没有<code>Trie</code>节点</strong>，则说明该单词不在树中，直接返回<code>false</code>；</li><li><strong>若当前遍历的字符是<code>&#39;.&#39;</code>，需要继续遍历<code>node.children[26]</code>中所有不为空的节点进行深度搜索</strong>，如果存在下一个字母，则从下一个字母开始再继续做检查，该过程深入几层后，可能存在不满足的情况，此时需要回溯，所以最好采用递归。</li></ul><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//前缀树类</span>
<span class="token keyword">class</span> <span class="token class-name">Trie</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//字段变量</span>
    Trie<span class="token punctuation">[</span><span class="token punctuation">]</span> children<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//孩子节点</span>
    <span class="token keyword">boolean</span> isEnd<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//是否是单词结尾</span>

    <span class="token comment" spellcheck="true">//初始化</span>
    <span class="token keyword">public</span> <span class="token function">Trie</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> 
        children <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Trie</span><span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//最多孩子节点等于小写字母数</span>
        isEnd <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//词典类</span>
<span class="token keyword">class</span> <span class="token class-name">WordDictionary</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//前缀树根节点</span>
    Trie root<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//初始化</span>
    <span class="token keyword">public</span> <span class="token function">WordDictionary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Trie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    
    <span class="token comment" spellcheck="true">//将 word 添加到数据结构中，之后可以对它进行匹配</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addWord</span><span class="token punctuation">(</span>String word<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> 
        <span class="token comment" spellcheck="true">//前缀树根节点</span>
        Trie node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历将word加入前缀树</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>word<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> index <span class="token operator">=</span> word<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">-</span><span class="token string">'a'</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//当前位置没有该字符，添加前缀树节点</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>children<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                node<span class="token punctuation">.</span>children<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Trie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//更新前缀树节点</span>
            node <span class="token operator">=</span> node<span class="token punctuation">.</span>children<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//word结尾，将末尾前缀树节点标记true</span>
        node<span class="token punctuation">.</span>isEnd <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    
    <span class="token comment" spellcheck="true">//搜索word</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">search</span><span class="token punctuation">(</span>String word<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//调用递归</span>
        <span class="token keyword">return</span> <span class="token function">searchWord</span><span class="token punctuation">(</span>word<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">searchWord</span><span class="token punctuation">(</span>String word<span class="token punctuation">,</span> Trie root<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//当前根节点</span>
        Trie node <span class="token operator">=</span> root<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历当前匹配字符串word</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>word<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">char</span> c <span class="token operator">=</span> word<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//当前字符不为'.'且当前字符位置节点为空，无法匹配字符，返回false</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">!=</span> <span class="token string">'.'</span> <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>children<span class="token punctuation">[</span>c <span class="token operator">-</span> <span class="token string">'a'</span><span class="token punctuation">]</span> <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//如果当前字符是 '.'，则对该节点所有不为空的节点进行深度搜索</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token string">'.'</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> 
                <span class="token comment" spellcheck="true">//遍历当前节点的所有子节点 node.children[26]</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span><span class="token number">26</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> 
                    <span class="token comment" spellcheck="true">// 如果存在下一个字母，则从下一个字母开始再继续做检查</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>children<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                        <span class="token comment" spellcheck="true">//深度搜索</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">searchWord</span><span class="token punctuation">(</span>word<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> node<span class="token punctuation">.</span>children<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
                    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//下一个字母都不匹配，返回false</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//更新前缀树节点，下一个检查字母</span>
            node <span class="token operator">=</span> node<span class="token punctuation">.</span>children<span class="token punctuation">[</span>c <span class="token operator">-</span> <span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回最后一个匹配字符的isEnd</span>
        <span class="token keyword">return</span> node<span class="token punctuation">.</span>isEnd<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>不分析。</li></ul><h2 id="0215-数组中的第-K-个最大元素"><a href="#0215-数组中的第-K-个最大元素" class="headerlink" title="0215. 数组中的第 K 个最大元素"></a>0215. 数组中的第 K 个最大元素</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/kth-largest-element-in-an-array/">https://leetcode-cn.com/problems/kth-largest-element-in-an-array/</a></p><p><strong>方法一</strong>：快速排序</p><p>注意事项：很重要，放前面说</p><ul><li><strong>快速排序虽然快，但如果实现得不好，在遇到特殊测试用例的时候，时间复杂度会变得很高</strong>。</li></ul><p>我们在学习“快速排序”的时候，接触的第一个操作就是<code>partition</code>（切分），操作后结果如下：</p><ul><li>对某个索引<code>j</code>，<code>nums[j]</code>已经排定，即经过<code>partition</code>（切分）操作以后会放置在它“最终放置的地方”；</li><li><code>nums[left]</code>到<code>nums[j-1]</code>中所有元素都不大于<code>nums[j]</code>；</li><li><code>nums[j+1]</code>到<code>nums[right]</code>中的所有元素都不小于<code>nums[j]</code>；</li></ul><p><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/LeetCode-medium/0215-1.34itpcdbsye0.png" alt="0215-1"></p><p><code>partition</code>（切分）操作总能排定一个元素，还能够知道它最终所在的位置，这样每经过一次<code>partition</code>（切分）操作就能缩小搜索范围，这样的思想叫做“<strong>减而治之</strong>”（“分而治之”的特例）。</p><p>切分过程可以不借助额外数组空间，仅通过交换数组元素实现。</p><p>注意本题必须随机初始化<code>pivot</code>，否则测试用例中的极端测试用例会导致时间复杂度是O(n<sub>2</sub>)。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//快速排序，随机pivot</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//字段变量</span>
    Random random <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findKthLargest</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> right <span class="token operator">=</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//第k大元素所在位置</span>
        <span class="token keyword">int</span> target <span class="token operator">=</span> len <span class="token operator">-</span> k<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//切分操作位置</span>
            <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token function">partition</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//切分操作位置比目标位置小，目标在切分位置右边，右移left</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> target<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                left <span class="token operator">=</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//切分操作位置比目标位置大，目标在切分位置左边，左移right</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">></span> target<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                right <span class="token operator">=</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//切分操作位置等于目标位置，返回该位置元素</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> nums<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// 在区间 [left, right] 这个区间执行 partition（切分）操作</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">partition</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//在区间随机选择一个元素作为标定点</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>right <span class="token operator">></span> left<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//left可能等于right</span>
            <span class="token keyword">int</span> randomIndex <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>right <span class="token operator">-</span> left<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> left<span class="token punctuation">,</span> randomIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//先保存pivot元素位置不变，将区间内小于pivot的元素逐渐加到pivot位置之后</span>
        <span class="token keyword">int</span> pivot <span class="token operator">=</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> j <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> right<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> pivot<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                j<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> j<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//循环之后，left位置时pivot，j位置是最后一个小于pivot的位置，交换两者</span>
        <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> left<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//返回pivot元素的位置</span>
        <span class="token keyword">return</span> j<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//交换两索引元素</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> index1<span class="token punctuation">,</span> <span class="token keyword">int</span> index2<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> temp <span class="token operator">=</span> nums<span class="token punctuation">[</span>index1<span class="token punctuation">]</span><span class="token punctuation">;</span>
        nums<span class="token punctuation">[</span>index1<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>index2<span class="token punctuation">]</span><span class="token punctuation">;</span>
        nums<span class="token punctuation">[</span>index2<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)，<code>n</code>是数组长度。</li><li>空间复杂度：O(1)，原地排序，没有借助额外空间。</li></ul><p><strong>方法二</strong>：优先队列（堆）</p><p>优先队列的思路时很朴素的。因为第<code>k</code>大元素，<strong>其实就是整个数组排序以后，后半部分最小的那个元素</strong>，因此我们可以<strong>维护一个最小堆（小顶堆）</strong>：</p><ul><li>遍历将数组元素加入小顶堆，当堆大小大于<code>k</code>时，删除堆顶。遍历结束，堆顶就是第<code>k</code>大元素。</li></ul><p>优先队列的写法很多（列举一下最小堆和最大堆），大同小异，没有本质区别。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findKthLargest</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        PriorityQueue<span class="token operator">&lt;</span>Integer<span class="token operator">></span> heap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> num <span class="token operator">:</span> nums<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            head<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>heap<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span>k<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                heap<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> head<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><h2 id="0221-最大正方形"><a href="#0221-最大正方形" class="headerlink" title="0221. 最大正方形"></a>0221. 最大正方形</h2><h2 id="0227-基本计算器-II"><a href="#0227-基本计算器-II" class="headerlink" title="0227. 基本计算器 II"></a>0227. 基本计算器 II</h2><h2 id="0229-求众数-II"><a href="#0229-求众数-II" class="headerlink" title="0229. 求众数 II"></a>0229. 求众数 II</h2><p><strong>题目地址</strong>:</p><p><strong>方法一</strong>：</p><p><strong>代码</strong></p><p><strong>复杂度分析</strong></p><h2 id="0230-二叉搜索树中第-K-小的元素"><a href="#0230-二叉搜索树中第-K-小的元素" class="headerlink" title="0230. 二叉搜索树中第 K 小的元素"></a>0230. 二叉搜索树中第 K 小的元素</h2><h2 id="0236-二叉树的最近公共祖先"><a href="#0236-二叉树的最近公共祖先" class="headerlink" title="0236. 二叉树的最近公共祖先"></a>0236. 二叉树的最近公共祖先</h2><h2 id="0238-除自身以外数组的乘积"><a href="#0238-除自身以外数组的乘积" class="headerlink" title="0238. 除自身以外数组的乘积"></a>0238. 除自身以外数组的乘积</h2><h2 id="0240-搜索二维矩阵-II"><a href="#0240-搜索二维矩阵-II" class="headerlink" title="0240. 搜索二维矩阵 II"></a>0240. 搜索二维矩阵 II</h2><h2 id="0279-完全平方数"><a href="#0279-完全平方数" class="headerlink" title="0279. 完全平方数"></a>0279. 完全平方数</h2><h2 id="0309-最佳买卖股票时机含冷冻期"><a href="#0309-最佳买卖股票时机含冷冻期" class="headerlink" title="0309. 最佳买卖股票时机含冷冻期"></a>0309. 最佳买卖股票时机含冷冻期</h2><h2 id="0322-零钱兑换"><a href="#0322-零钱兑换" class="headerlink" title="0322. 零钱兑换"></a>0322. 零钱兑换</h2><h2 id="0328-奇偶链表"><a href="#0328-奇偶链表" class="headerlink" title="0328. 奇偶链表"></a>0328. 奇偶链表</h2><p><strong>题目地址</strong>:</p><p><strong>方法一</strong>：</p><p><strong>代码</strong></p><p><strong>复杂度分析</strong></p><h2 id="0334-递增的三元子序列"><a href="#0334-递增的三元子序列" class="headerlink" title="0334. 递增的三元子序列"></a>0334. 递增的三元子序列</h2><h2 id="0337-打家劫舍-III"><a href="#0337-打家劫舍-III" class="headerlink" title="0337. 打家劫舍 III"></a>0337. 打家劫舍 III</h2><h2 id="0343-整数拆分"><a href="#0343-整数拆分" class="headerlink" title="0343. 整数拆分"></a>0343. 整数拆分</h2><h2 id="0365-水壶问题"><a href="#0365-水壶问题" class="headerlink" title="0365. 水壶问题"></a>0365. 水壶问题</h2><h2 id="0371-两整数之和"><a href="#0371-两整数之和" class="headerlink" title="0371 两整数之和"></a>0371 两整数之和</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/sum-of-two-integers/">https://leetcode-cn.com/problems/sum-of-two-integers/</a></p><p><strong>方法一</strong>：</p><p><strong>代码</strong></p><p><strong>复杂度分析</strong></p><h2 id="0378-有序矩阵中第-K-小的元素"><a href="#0378-有序矩阵中第-K-小的元素" class="headerlink" title="0378. 有序矩阵中第 K 小的元素"></a>0378. 有序矩阵中第 K 小的元素</h2><h2 id="0380-常数时间插入、删除和获取随机元素"><a href="#0380-常数时间插入、删除和获取随机元素" class="headerlink" title="0380. 常数时间插入、删除和获取随机元素"></a>0380. 常数时间插入、删除和获取随机元素</h2><h2 id="0394-字符串解码"><a href="#0394-字符串解码" class="headerlink" title="0394. 字符串解码"></a>0394. 字符串解码</h2><h2 id="0416-分割等和子集"><a href="#0416-分割等和子集" class="headerlink" title="0416. 分割等和子集"></a>0416. 分割等和子集</h2><h2 id="0437-路径总和-III"><a href="#0437-路径总和-III" class="headerlink" title="0437 路径总和 III"></a>0437 路径总和 III</h2><p><strong>题目地址</strong>:</p><p><strong>方法一</strong>：</p><p><strong>代码</strong></p><p><strong>复杂度分析</strong></p><h2 id="0445-两数相加-II"><a href="#0445-两数相加-II" class="headerlink" title="0445. 两数相加 II"></a>0445. 两数相加 II</h2><h2 id="0454-四数相加-II"><a href="#0454-四数相加-II" class="headerlink" title="0454. 四数相加 II"></a>0454. 四数相加 II</h2><h2 id="0464-我能赢么"><a href="#0464-我能赢么" class="headerlink" title="0464. 我能赢么"></a>0464. 我能赢么</h2><h2 id="0494-目标和"><a href="#0494-目标和" class="headerlink" title="0494. 目标和"></a>0494. 目标和</h2><h2 id="0516-最长回文子序列"><a href="#0516-最长回文子序列" class="headerlink" title="0516. 最长回文子序列"></a>0516. 最长回文子序列</h2><h2 id="0513-找树左下角的值"><a href="#0513-找树左下角的值" class="headerlink" title="0513. 找树左下角的值"></a>0513. 找树左下角的值</h2><h2 id="0518-零钱兑换-II"><a href="#0518-零钱兑换-II" class="headerlink" title="0518. 零钱兑换 II"></a>0518. 零钱兑换 II</h2><h2 id="0547-朋友圈"><a href="#0547-朋友圈" class="headerlink" title="0547. 朋友圈"></a>0547. 朋友圈</h2><p><strong>题目地址</strong>:</p><p><strong>方法一</strong>：</p><p><strong>代码</strong></p><p><strong>复杂度分析</strong></p><h2 id="0560-和为-K-的子数组"><a href="#0560-和为-K-的子数组" class="headerlink" title="0560. 和为 K 的子数组"></a>0560. 和为 K 的子数组</h2><h2 id="0609-在系统中查找重复文件"><a href="#0609-在系统中查找重复文件" class="headerlink" title="0609. 在系统中查找重复文件"></a>0609. 在系统中查找重复文件</h2><h2 id="0611-有效三角形的个数"><a href="#0611-有效三角形的个数" class="headerlink" title="0611. 有效三角形的个数"></a>0611. 有效三角形的个数</h2><h2 id="0686-重复叠加字符串匹配"><a href="#0686-重复叠加字符串匹配" class="headerlink" title="0686. 重复叠加字符串匹配"></a>0686. 重复叠加字符串匹配</h2><h2 id="0718-最长重复子数组"><a href="#0718-最长重复子数组" class="headerlink" title="0718. 最长重复子数组"></a>0718. 最长重复子数组</h2><h2 id="0754-到达终点数字"><a href="#0754-到达终点数字" class="headerlink" title="0754. 到达终点数字"></a>0754. 到达终点数字</h2><h2 id="0785-判断二分图"><a href="#0785-判断二分图" class="headerlink" title="0785. 判断二分图"></a>0785. 判断二分图</h2><h2 id="0816-模糊坐标"><a href="#0816-模糊坐标" class="headerlink" title="0816. 模糊坐标"></a>0816. 模糊坐标</h2><h2 id="0820-单词的压缩编码"><a href="#0820-单词的压缩编码" class="headerlink" title="0820. 单词的压缩编码"></a>0820. 单词的压缩编码</h2><h2 id="0875-爱吃香蕉的珂珂"><a href="#0875-爱吃香蕉的珂珂" class="headerlink" title="0875. 爱吃香蕉的珂珂"></a>0875. 爱吃香蕉的珂珂</h2><h2 id="0877-石子游戏"><a href="#0877-石子游戏" class="headerlink" title="0877. 石子游戏"></a>0877. 石子游戏</h2><p><strong>题目地址</strong>:</p><p><strong>方法一</strong>：</p><p><strong>代码</strong></p><p><strong>复杂度分析</strong></p><h2 id="0886-可能的二分法"><a href="#0886-可能的二分法" class="headerlink" title="0886. 可能的二分法"></a>0886. 可能的二分法</h2><h2 id="0900-RLE-迭代器"><a href="#0900-RLE-迭代器" class="headerlink" title="0900. RLE 迭代器"></a>0900. RLE 迭代器</h2><h2 id="0911-在线选举"><a href="#0911-在线选举" class="headerlink" title="0911. 在线选举"></a>0911. 在线选举</h2><h2 id="0912-排序数组"><a href="#0912-排序数组" class="headerlink" title="0912. 排序数组"></a>0912. 排序数组</h2><h2 id="0930-和相同的二元子数组"><a href="#0930-和相同的二元子数组" class="headerlink" title="0930. 和相同的二元子数组"></a>0930. 和相同的二元子数组</h2><p><strong>题目地址</strong>:<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-subarrays-with-sum/">https://leetcode-cn.com/problems/binary-subarrays-with-sum/</a></p><p><strong>方法一</strong>：哈希表前缀和</p><p>假设原数组的前缀和数组为<code>sum</code>，且子数组<code>(i,j]</code>的区间和为<code>goal</code>，那么<code>sum[j]-sum[i]=goal</code>，因此我们可以枚举<code>j</code>，每次查询满足该等式的<code>i</code>的数量。</p><p><strong>具体地，我们用哈希表记录每一种前缀和出现的次数，假设我们当前枚举到元素<code>nums[j]</code>，我们只需要查询哈希表中元素<code>sum[j]-goal</code>的数量即可</strong>，这些元素的数量即对应了以当前<code>j</code>值为右边界的满足条件的子数组的数量。最后这些元素的总数量即为所有和为<code>goal</code>的子数组的数量。</p><p>在实际代码中，我们实时更新哈希表，以防止出现<code>i&gt;=j</code>的情况。</p><p><strong>代码</strong></p><pre class="language-java"><code class="language-java"><span class="token comment" spellcheck="true">//哈希表前缀和</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">numSubarraysWithSum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> goal<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//前缀和</span>
        <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        Map<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> Integer<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//满足条件的子数组数量</span>
        <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//遍历所有前缀</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> num <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//先放入前缀和</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span> map<span class="token punctuation">.</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//更新前缀和</span>
            sum <span class="token operator">+=</span> num<span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//计算当前前缀为右边界满足条件的子数组数目</span>
            res <span class="token operator">+=</span> map<span class="token punctuation">.</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span>sum <span class="token operator">-</span> goal<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre><p><strong>复杂度分析</strong></p><ul><li>时间复杂度：O(n)。</li><li>空间复杂度：O(n)。</li></ul><h2 id="0935-骑士拨号器"><a href="#0935-骑士拨号器" class="headerlink" title="0935. 骑士拨号器"></a>0935. 骑士拨号器</h2><h2 id="0978-最长湍流子数组"><a href="#0978-最长湍流子数组" class="headerlink" title="0978. 最长湍流子数组"></a>0978. 最长湍流子数组</h2><h2 id="0987-二叉树的垂序遍历"><a href="#0987-二叉树的垂序遍历" class="headerlink" title="0987. 二叉树的垂序遍历"></a>0987. 二叉树的垂序遍历</h2><h2 id="1011-在-D-天内送达包裹的能力"><a href="#1011-在-D-天内送达包裹的能力" class="headerlink" title="1011. 在 D 天内送达包裹的能力"></a>1011. 在 D 天内送达包裹的能力</h2><h2 id="1014-最佳观光组合"><a href="#1014-最佳观光组合" class="headerlink" title="1014. 最佳观光组合"></a>1014. 最佳观光组合</h2><p><strong>题目地址</strong>:</p><p><strong>方法一</strong>：</p><p><strong>代码</strong></p><p><strong>复杂度分析</strong></p><h2 id="1015-可被-K-整除的最小整数"><a href="#1015-可被-K-整除的最小整数" class="headerlink" title="1015. 可被 K 整除的最小整数"></a>1015. 可被 K 整除的最小整数</h2><h2 id="1019-链表中的下一个更大节点"><a href="#1019-链表中的下一个更大节点" class="headerlink" title="1019. 链表中的下一个更大节点"></a>1019. 链表中的下一个更大节点</h2><h2 id="1020-飞地的数量"><a href="#1020-飞地的数量" class="headerlink" title="1020. 飞地的数量"></a>1020. 飞地的数量</h2><h2 id="1023-驼峰式匹配"><a href="#1023-驼峰式匹配" class="headerlink" title="1023. 驼峰式匹配"></a>1023. 驼峰式匹配</h2><h2 id="1031-两个非重叠子数组的最大和"><a href="#1031-两个非重叠子数组的最大和" class="headerlink" title="1031. 两个非重叠子数组的最大和"></a>1031. 两个非重叠子数组的最大和</h2><h2 id="1104-二叉树寻路"><a href="#1104-二叉树寻路" class="headerlink" title="1104. 二叉树寻路"></a>1104. 二叉树寻路</h2><h2 id="1131-绝对值表达式的最大值"><a href="#1131-绝对值表达式的最大值" class="headerlink" title="1131.绝对值表达式的最大值"></a>1131.绝对值表达式的最大值</h2><h2 id="1186-删除一次得到子数组最大和"><a href="#1186-删除一次得到子数组最大和" class="headerlink" title="1186. 删除一次得到子数组最大和"></a>1186. 删除一次得到子数组最大和</h2><h2 id="1218-最长定差子序列"><a href="#1218-最长定差子序列" class="headerlink" title="1218. 最长定差子序列"></a>1218. 最长定差子序列</h2><p><strong>题目地址</strong>:</p><p><strong>方法一</strong>：</p><p><strong>代码</strong></p><p><strong>复杂度分析</strong></p><h2 id="1227-飞机座位分配概率"><a href="#1227-飞机座位分配概率" class="headerlink" title="1227. 飞机座位分配概率"></a>1227. 飞机座位分配概率</h2><h2 id="1261-在受污染的二叉树中查找元素"><a href="#1261-在受污染的二叉树中查找元素" class="headerlink" title="1261. 在受污染的二叉树中查找元素"></a>1261. 在受污染的二叉树中查找元素</h2><h2 id="1262-可被三整除的最大和"><a href="#1262-可被三整除的最大和" class="headerlink" title="1262. 可被三整除的最大和"></a>1262. 可被三整除的最大和</h2><h2 id="1297-子串的最大出现次数"><a href="#1297-子串的最大出现次数" class="headerlink" title="1297. 子串的最大出现次数"></a>1297. 子串的最大出现次数</h2><h2 id="1310-子数组异或查询"><a href="#1310-子数组异或查询" class="headerlink" title="1310. 子数组异或查询"></a>1310. 子数组异或查询</h2><h2 id="1334-阈值距离内邻居最少的城市"><a href="#1334-阈值距离内邻居最少的城市" class="headerlink" title="1334. 阈值距离内邻居最少的城市"></a>1334. 阈值距离内邻居最少的城市</h2><h2 id="1371-每个元音包含偶数次的最长子字符串"><a href="#1371-每个元音包含偶数次的最长子字符串" class="headerlink" title="1371.每个元音包含偶数次的最长子字符串"></a>1371.每个元音包含偶数次的最长子字符串</h2><h2 id="1381-设计一个支持增量操作的栈"><a href="#1381-设计一个支持增量操作的栈" class="headerlink" title="1381. 设计一个支持增量操作的栈"></a>1381. 设计一个支持增量操作的栈</h2><p><strong>题目地址</strong>:</p><p><strong>方法一</strong>：</p><p><strong>代码</strong></p><p><strong>复杂度分析</strong></p><h2 id="1558-得到目标数组的最少函数调用次数"><a href="#1558-得到目标数组的最少函数调用次数" class="headerlink" title="1558. 得到目标数组的最少函数调用次数"></a>1558. 得到目标数组的最少函数调用次数</h2><h2 id="1574-删除最短的子数组使剩余数组有序"><a href="#1574-删除最短的子数组使剩余数组有序" class="headerlink" title="1574. 删除最短的子数组使剩余数组有序"></a>1574. 删除最短的子数组使剩余数组有序</h2><h2 id="1631-最小体力消耗路径"><a href="#1631-最小体力消耗路径" class="headerlink" title="1631. 最小体力消耗路径"></a>1631. 最小体力消耗路径</h2><h2 id="1658-将-x-减到-0-的最小操作数"><a href="#1658-将-x-减到-0-的最小操作数" class="headerlink" title="1658. 将 x 减到 0 的最小操作数"></a>1658. 将 x 减到 0 的最小操作数</h2></div><hr><div class="tag_share" style="display:block"><div class="post-meta__tag-list" style="display:inline-block"><div class="article-tag"><a href="/tags/LeetCode/"><span class="chip bg-color">LeetCode</span> </a><a href="/tags/LeetCode-medium/"><span class="chip bg-color">LeetCode-medium</span></a></div></div><div class="post_share" style="zoom:80%;width:fit-content;display:inline-block;float:right;margin:-.15rem 0"><link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css"><div id="article-share"></div></div></div><style>#reward{margin:40px 0;text-align:center}#reward .reward-link{font-size:1.4rem;line-height:38px}#reward .btn-floating:hover{box-shadow:0 6px 12px rgba(0,0,0,.2),0 5px 15px rgba(0,0,0,.2)}#rewardModal{width:320px;height:350px}#rewardModal .reward-title{margin:15px auto;padding-bottom:5px}#rewardModal .modal-content{padding:10px}#rewardModal .close{position:absolute;right:15px;top:15px;color:rgba(0,0,0,.5);font-size:1.3rem;line-height:20px;cursor:pointer}#rewardModal .close:hover{color:#ef5350;transform:scale(1.3);-moz-transform:scale(1.3);-webkit-transform:scale(1.3);-o-transform:scale(1.3)}#rewardModal .reward-tabs{margin:0 auto;width:210px}.reward-tabs .tabs{height:38px;margin:10px auto;padding-left:0}.reward-content ul{padding-left:0!important}.reward-tabs .tabs .tab{height:38px;line-height:38px}.reward-tabs .tab a{color:#fff;background-color:#ccc}.reward-tabs .tab a:hover{background-color:#ccc;color:#fff}.reward-tabs .wechat-tab .active{color:#fff!important;background-color:#22ab38!important}.reward-tabs .alipay-tab .active{color:#fff!important;background-color:#019fe8!important}.reward-tabs .reward-img{width:210px;height:210px}</style><div id="reward"><a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close modal-close"><i class="fas fa-times"></i></a><h4 class="reward-title">给点吧！</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs row"><li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li><li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li></ul><div id="alipay"><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/createblog/alipay.ou2hknykqkg.png" class="reward-img" alt="支付宝打赏二维码"></div><div id="wechat"><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/createblog/wechat.54pag1rjudg0.png" class="reward-img" alt="微信打赏二维码"></div></div></div></div></div></div><script>$(function(){$(".tabs").tabs()})</script></div></div><style>.valine-card{margin:1.5rem auto}.valine-card .card-content{padding:20px 20px 5px 20px}#vcomments textarea{box-sizing:border-box;background:url(https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/hexo/comment_bg.xfqkznzj4w0.png) 100% 100% no-repeat}#vcomments p{margin:2px 2px 10px;font-size:1.05rem;line-height:1.78rem}#vcomments blockquote p{text-indent:.2rem}#vcomments a{padding:0 2px;color:#4cbf30;font-weight:500;text-decoration:none}#vcomments img{max-width:100%;height:auto;cursor:pointer}#vcomments ol li{list-style-type:decimal}#vcomments ol,ul{display:block;padding-left:2em;word-spacing:.05rem}#vcomments ul li,ol li{display:list-item;line-height:1.8rem;font-size:1rem}#vcomments ul li{list-style-type:disc}#vcomments ul ul li{list-style-type:circle}#vcomments table,td,th{padding:12px 13px;border:1px solid #dfe2e5}#vcomments table,td,th{border:0}table tr:nth-child(2n),thead{background-color:#fafafa}#vcomments table th{background-color:#f2f2f2;min-width:80px}#vcomments table td{min-width:80px}#vcomments h1{font-size:1.85rem;font-weight:700;line-height:2.2rem}#vcomments h2{font-size:1.65rem;font-weight:700;line-height:1.9rem}#vcomments h3{font-size:1.45rem;font-weight:700;line-height:1.7rem}#vcomments h4{font-size:1.25rem;font-weight:700;line-height:1.5rem}#vcomments h5{font-size:1.1rem;font-weight:700;line-height:1.4rem}#vcomments h6{font-size:1rem;line-height:1.3rem}#vcomments p{font-size:1rem;line-height:1.5rem}#vcomments hr{margin:12px 0;border:0;border-top:1px solid #ccc}#vcomments blockquote{margin:15px 0;border-left:5px solid #42b983;padding:1rem .8rem .3rem .8rem;color:#666;background-color:rgba(66,185,131,.1)}#vcomments pre{font-family:monospace,monospace;padding:1.2em;margin:.5em 0;background:#272822;overflow:auto;border-radius:.3em;tab-size:4}#vcomments code{font-family:monospace,monospace;padding:1px 3px;font-size:.92rem;color:#e96900;background-color:#f8f8f8;border-radius:2px}#vcomments pre code{font-family:monospace,monospace;padding:0;color:#e8eaf6;background-color:#272822}#vcomments pre[class*=language-]{padding:1.2em;margin:.5em 0}#vcomments code[class*=language-],pre[class*=language-]{color:#e8eaf6}#vcomments [type=checkbox]:not(:checked),[type=checkbox]:checked{position:inherit;margin-left:-1.3rem;margin-right:.4rem;margin-top:-1px;vertical-align:middle;left:unset;visibility:visible}#vcomments b,strong{font-weight:700}#vcomments dfn{font-style:italic}#vcomments small{font-size:85%}#vcomments cite{font-style:normal}#vcomments mark{background-color:#fcf8e3;padding:.2em}#vcomments table,td,th{padding:12px 13px;border:1px solid #dfe2e5}table tr:nth-child(2n),thead{background-color:#fafafa}#vcomments table th{background-color:#f2f2f2;min-width:80px}#vcomments table td{min-width:80px}#vcomments [type=checkbox]:not(:checked),[type=checkbox]:checked{position:inherit;margin-left:-1.3rem;margin-right:.4rem;margin-top:-1px;vertical-align:middle;left:unset;visibility:visible}</style><div class="card valine-card" data-aos="fade-up"><div class="comment_headling" style="font-size:20px;font-weight:700;position:relative;padding-left:20px;top:15px;padding-bottom:5px"><i class="fas fa-comments fa-fw" aria-hidden="true"></i> <span>评论</span></div><div id="vcomments" class="card-content" style="display:grid"></div></div><script src="/libs/valine/av-min.js"></script><script src="/libs/valine/Valine.min.js"></script><script>new Valine({el:"#vcomments",appId:"DORpC5bDUoaXmJQyhtMU0fyi-gzGzoHsz",appKey:"gFvTRDzcAQ8FLAzRP6bLlliG",notify:!1,verify:!1,visitor:!0,avatar:"monsterid",pageSize:"10",lang:"zh-cn",placeholder:"说点什么呗"})</script><div id="to_comment" class="comment-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#vcomments" title="ֱ������"><i class="fas fa-comments"></i></a></div><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fas fa-chevron-left"></i>&nbsp;上一篇</div><div class="card"><a href="/posts/45852.html"><div class="card-image"><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/hexo/10.3h8s4eyt1pu0.jpg" class="responsive-img" alt="LeetCode高频考题刷题笔记-简单"> <span class="card-title">LeetCode高频考题刷题笔记-简单</span></div></a><div class="card-content article-content"><div class="summary block-with-text">LeetCode算法刷题，高频简单题目</div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2021-03-14 </span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E5%88%B7%E9%A2%98/" class="post-category">数据结构与算法刷题</a></span></div></div><div class="card-action article-tags"><a href="/tags/LeetCode-easy/"><span class="chip bg-color">LeetCode-easy</span> </a><a href="/tags/LeetCode/"><span class="chip bg-color">LeetCode</span></a></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color">下一篇&nbsp;<i class="fas fa-chevron-right"></i></div><div class="card"><a href="/posts/43449.html"><div class="card-image"><img src="https://cdn.jsdelivr.net/gh/wangxinzhi0/PicX-image@master/hexo/8.66pckd4d60o0.jpg" class="responsive-img" alt="hugo博客搭建"> <span class="card-title">hugo博客搭建</span></div></a><div class="card-content article-content"><div class="summary block-with-text">hugo静态博客框架，even主题搭建个人博客</div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2020-10-19 </span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" class="post-category">个人博客</a></span></div></div><div class="card-action article-tags"><a href="/tags/hugo/"><span class="chip bg-color">hugo</span></a></div></div></div></div></article></div><script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script><script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script><script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script><script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div class="toc-widget card" style="background-color:#fff"><div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div><div id="floating-toc-btn" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color"><i class="fas fa-list-ul"></i></a></div><script src="/libs/tocbot/tocbot.min.js"></script><script>$(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4, h5'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4, h5').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });</script></main><footer class="page-footer bg-color"><link rel="stylesheet" href="/libs/aplayer/APlayer.min.css"><style>.aplayer .aplayer-lrc p{font-size:13px;font-weight:1400;line-height:30px!important}.aplayer .aplayer-lrc p.aplayer-lrc-current{font-size:25px;color:#42b983}</style><div><div class="row"><meting-js class="col l8 offset-l2 m10 offset-m1 s12" server="netease" type="playlist" id="6905947490" fixed='true' autoplay='false' theme='#42b983' loop='all''all' order='list' preload='auto' volume='0.7' list-folded='true' ></div></div><script src="/libs/aplayer/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><div class="container row center-align" style="margin-bottom:15px!important"><div class="col s12 m8 l8 copy-right">Copyright&nbsp;&copy; <span id="year">2021</span> <span id="year">2021</span> <a href="/about" target="_blank">王新志</a> |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a> |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a><br>&nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span class="white-color">114k</span>&nbsp;字 |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv" class="white-color"></span>&nbsp;次 |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv" class="white-color"></span>&nbsp;人<br><span id="sitetime">载入运行时间...</span><script>function siteTime(){var e=36e5,t=24*e,n=new Date,o="2021",r=n.getFullYear(),a=n.getMonth()+1,i=n.getDate(),l=n.getHours(),m=n.getMinutes(),M=n.getSeconds(),g=Date.UTC(o,"5","20","0","0","0"),d=Date.UTC(r,a,i,l,m,M)-g,s=Math.floor(d/31536e6),u=Math.floor(d/t-365*s),T=Math.floor((d-(365*s+u)*t)/e),c=Math.floor((d-(365*s+u)*t-T*e)/6e4),f=Math.floor((d-(365*s+u)*t-T*e-6e4*c)/1e3);o==r?(document.getElementById("year").innerHTML=r,document.getElementById("sitetime").innerHTML="本站已安全运行 "+u+" 天 "+T+" 小时 "+c+" 分钟 "+f+" 秒"):(document.getElementById("year").innerHTML=o+" - "+r,document.getElementById("sitetime").innerHTML="本站已安全运行 "+s+" 年 "+u+" 天 "+T+" 小时 "+c+" 分钟 "+f+" 秒")}setInterval(siteTime,1e3)</script><br><span id="icp"><img src="/medias/icp.png" style="vertical-align:text-bottom"> <a href="http://beian.miit.gov.cn/" target="_blank">京ICP备404号</a></span></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/wangxinzhi0/" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fab fa-github"></i> </a><a href="mailto:xinzhi_wang0@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope-open"></i> </a><a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1761039972" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1761039972" data-position="top" data-delay="50"><i class="fab fa-qq"></i> </a><a href="https://www.zhihu.com/people/zhi-ge-38-58" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/zhi-ge-38-58" data-position="top" data-delay="50"><i class="fab fa-zhihu1">知</i> </a><a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fas fa-rss"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script type="text/javascript">$(function(){!function(t,s,i){"use strict";$.ajax({url:t,dataType:"xml",success:function(t){var e=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),n=document.getElementById(s),r=document.getElementById(i);n.addEventListener("input",function(){var f='<ul class="search-result-list">',m=this.value.trim().toLowerCase().split(/[\s\-]+/);r.innerHTML="",this.value.trim().length<=0||(e.forEach(function(t){var n,e,r,s,i,l=!0,a=t.title.trim().toLowerCase(),c=t.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),u=0===(u=t.url).indexOf("/")?t.url:"/"+u,o=-1,h=-1;""!==a&&""!==c&&m.forEach(function(t,e){n=a.indexOf(t),o=c.indexOf(t),n<0&&o<0?l=!1:(o<0&&(o=0),0===e&&(h=o))}),l&&(f+="<li><a href='"+u+"' class='search-result-title'>"+a+"</a>",e=t.content.trim().replace(/<[^>]+>/g,""),0<=h&&(s=h+80,(r=h-20)<0&&(r=0),0===r&&(s=100),s>e.length&&(s=e.length),i=e.substr(r,s),m.forEach(function(t){var e=new RegExp(t,"gi");i=i.replace(e,'<em class="search-keyword">'+t+"</em>")}),f+='<p class="search-result">'+i+"...</p>"),f+="</li>")}),f+="</ul>",r.innerHTML=f)})}})}("/search.xml","searchInput","searchResult")})</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-arrow-up"></i></a></div><script src="/libs/materialize/materialize.min.js"></script><script src="/libs/masonry/masonry.pkgd.min.js"></script><script src="/libs/aos/aos.js"></script><script src="/libs/scrollprogress/scrollProgress.min.js"></script><script src="/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="/js/matery.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/libs/others/clicklove.js" async></script><script async src="/libs/others/busuanzi.pure.mini.js"></script><script type="text/javascript" color="0,0,255" pointcolor="0,0,255" opacity="0.7" zindex="-1" count="99" src="/libs/background/canvas-nest.js"></script><script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async></script><script src="/libs/instantpage/instantpage.js" type="module"></script><script type="text/javascript" src="\js\snow.js"></script><script src="//cdn.jsdelivr.net/npm/js-base64/base64.min.js"></script><script>const hasAttr = (e,a) => a.some(_=> e.attr(_)!==undefined);
        $('a').each(function() {
          const $this = $(this);
          if(hasAttr($this,["data-fancybox","ignore-external-link"])) return;
          const href = $this.attr('href');
          if (href && href.match('^((http|https|thunder|qqdl|ed2k|Flashget|qbrowser|ftp|rtsp|mms)://)')) {
            const strs = href.split('/');
            if (strs.length >= 3) {
                const host = strs[2];
                if (host !== '' || window.location.host) {
                    $this.attr('href', '/go.html?u='+Base64.encode(href)+'').attr('rel', 'external nofollow noopener noreferrer');
                    if (true) {
                        $this.attr('target', '_blank');
                    }
                }
            }
          }
        });</script></body></html>